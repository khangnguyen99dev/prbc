"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[22],{12:(A,v,c)=>{c.d(v,{w:()=>_});var n=c(1571),h=c(6895);function e(d,u){if(1&d&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&d){const l=u.$implicit;n.xp6(1),n.Oqu(l)}}function Z(d,u){if(1&d&&(n.TgZ(0,"div",2)(1,"div",3),n._uU(2," Error "),n.qZA(),n.TgZ(3,"div",4),n.YNc(4,e,2,1,"p",5),n.qZA(),n._UZ(5,"div",6),n.qZA()),2&d){const l=n.oxw(2);n.xp6(4),n.Q6J("ngForOf",l.errorMessages)}}function f(d,u){if(1&d&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&d){const l=u.$implicit;n.xp6(1),n.Oqu(l)}}function p(d,u){if(1&d&&(n.TgZ(0,"div",4),n.YNc(1,f,2,1,"p",5),n.qZA()),2&d){const l=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",l.errorMessages)}}function m(d,u){if(1&d){const l=n.EpF();n.TgZ(0,"div",2)(1,"div",7),n.NdJ("click",function(){n.CHM(l);const y=n.oxw(2);return n.KtG(y.toggleErrors())}),n._uU(2),n.TgZ(3,"span"),n._uU(4,"(Click here to show)"),n.qZA()(),n.YNc(5,p,2,1,"div",8),n._UZ(6,"div",6),n.qZA()}if(2&d){const l=n.oxw(2);n.xp6(2),n.hij(" Sorry, system find ",l.errorMessages.length," errors. "),n.xp6(3),n.Q6J("ngIf",l.showErrors)}}function T(d,u){if(1&d&&(n.ynx(0),n.YNc(1,Z,6,1,"div",1),n.YNc(2,m,7,2,"div",1),n.BQk()),2&d){const l=n.oxw();n.xp6(1),n.Q6J("ngIf",1===l.errorMessages.length),n.xp6(1),n.Q6J("ngIf",l.errorMessages.length>1)}}function M(d,u){if(1&d&&(n.TgZ(0,"div",2)(1,"div",9),n._uU(2," Success "),n.qZA(),n.TgZ(3,"div",10)(4,"p"),n._uU(5),n.qZA()(),n._UZ(6,"div",6),n.qZA()),2&d){const l=n.oxw();n.xp6(5),n.Oqu(l.successMessage)}}let _=(()=>{const u=class{constructor(){this.errorMessages=[],this.successMessage="",this.showErrors=!1}toggleErrors(){this.showErrors=!this.showErrors}};let d=u;return u.\u0275fac=function(y){return new(y||u)},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-alert"]],inputs:{errorMessages:"errorMessages",successMessage:"successMessage"},decls:2,vars:2,consts:[[4,"ngIf"],["role","alert",4,"ngIf"],["role","alert"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-red-400","rounded-b","bg-red-100","px-4","py-3","text-red-700"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2","cursor-pointer",3,"click"],["class","border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700",4,"ngIf"],[1,"bg-green-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-green-400","rounded-b","bg-green-100","px-4","py-3","text-green-700"]],template:function(y,b){1&y&&(n.YNc(0,T,3,2,"ng-container",0),n.YNc(1,M,7,1,"div",1)),2&y&&(n.Q6J("ngIf",b.errorMessages.length>0),n.xp6(1),n.Q6J("ngIf",""!==b.successMessage))},dependencies:[h.sg,h.O5]}),d})()},507:(A,v,c)=>{c.d(v,{u:()=>Z});var n=c(6895),h=c(2605),e=c(1571);let Z=(()=>{const p=class{};let f=p;return p.\u0275fac=function(M){return new(M||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[n.ez,h.Bz]}),f})()},22:(A,v,c)=>{c.r(v),c.d(v,{ManagerModule:()=>V});var n=c(6895),h=c(2605),e=c(1571),Z=c(6690),f=c(5861),p=c(1822),m=c(2340),T=c(6548),M=c(12),_=c(433);function d(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",17)(1,"button",18),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.save())}),e._uU(2),e.qZA()()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.saving),e.xp6(1),e.hij(" ",i.saving?"Saving...":"Save Changes"," ")}}let u=(()=>{const o=class{constructor(t,r,s){this.router=t,this.route=r,this.permissionService=s,this.modelId=null,this.addingCurrency=!1,this.currencyName="",this.currencyCode="",this.currencyRate=0,this.currencySymbol="",this.currencyDecimalMark=".",this.currencyThousandSeparator=",",this.isDefaultCurrency=!1,this.lastDefaultRate=0,this.errorMessages=[],this.successMessage="",this.settingUp=!0,this.successSetup=!1,this.saving=!1}getCurrencyName(t){return null==t.code?"":t.code+" - "+t.name}save(){var t=this;return(0,f.Z)(function*(){if(t.saving)return!1;t.errorMessages=[];try{t.saving=!0;const r={id:t.modelId,name:t.currencyName,code:t.currencyCode,rate:t.currencyRate,symbol:t.currencySymbol,decimal_mark:t.currencyDecimalMark,thousands_separator:t.currencyThousandSeparator},g=yield(yield p.Z.put(`${m.N.api_url}/settings/currencies/${t.modelId}`,r,{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`,"Content-Type":"application/json",Accept:"application/json"}})).data;if(g.error)return t.errorMessages.push(g.error_message),window.scrollTo(0,0),t.saving=!1,void t.clearMessages();t.successMessage=g.success_message,setTimeout(()=>{t.successMessage="",t.saving=!1},3500),window.scrollTo(0,0)}catch(r){console.log(r),422==r.response.status?Object.keys(r.response.data.errors).forEach(s=>{t.errorMessages.push(r.response.data.errors[s])}):t.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),t.saving=!1,t.clearMessages()}})()}ngOnInit(){this.setup(),this.route.queryParams.subscribe(t=>{t.success_message&&(window.scrollTo(0,0),this.successMessage="Currency created successfully",this.clearMessages())})}setupSelectize(){const t=this;$(function(){$("#decimal_mark").selectize()[0].selectize.destroy(),$("#thousand_separator").selectize()[0].selectize.destroy(),$("#decimal_mark").selectize({onChange:w=>{t.currencyDecimalMark=w}})[0].selectize.setValue(t.currencyDecimalMark,!0),$("#thousand_separator").selectize({onChange:w=>{t.currencyThousandSeparator=w}})[0].selectize.setValue(t.currencyThousandSeparator,!0)})}clearMessages(){setTimeout(()=>{this.successMessage=""},3500)}setup(){var t=this;return(0,f.Z)(function*(){try{const s=yield(yield p.Z.get(`${m.N.api_url}/settings/currencies/${t.modelId}`,{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`}})).data;if(t.settingUp=!1,s.error)return t.errorMessages.push(s.error_message),window.scrollTo(0,0),void t.clearMessages();console.log(s),t.currencyName=s.currency.name,t.currencyCode=s.currency.currency_code,t.currencyRate=s.currency.rate,t.currencySymbol=s.currency.symbol,t.currencyDecimalMark=s.currency.decimal_mark,t.currencyThousandSeparator=s.currency.thousands_separator,t.isDefaultCurrency=s.currency.default,t.lastDefaultRate=s.currency.last_default_rate,t.setupSelectize(),t.successSetup=!0}catch(r){console.log(r),t.errorMessages=["Sorry, something went wrong. Please try again later."],window.scrollTo(0,0),t.settingUp=!1}})()}};let a=o;return o.\u0275fac=function(r){return new(r||o)(e.Y36(h.F0),e.Y36(h.gz),e.Y36(T.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-currency-details"]],inputs:{modelId:"modelId"},decls:56,vars:10,consts:[[3,"errorMessages","successMessage"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-auto"],[1,"card","pb-2.5"],["id","basic_settings",1,"card-header"],[1,"card-title"],[1,"card-body","grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center","flex-wrap","lg:flex-nowrap","gap-2.5"],[1,"form-label","max-w-56"],[1,"text-danger"],["type","text","placeholder","Enter name",1,"input",3,"ngModel","disabled","ngModelChange"],["type","text","placeholder","Enter currency code",1,"input",3,"ngModel","disabled","ngModelChange"],["placeholder","Enter rate","type","number","onkeypress","return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46",1,"input",3,"ngModel","disabled","ngModelChange"],["type","text","placeholder","Enter symbol",1,"input",3,"ngModel","ngModelChange"],["name","decimal_mark","id","decimal_mark",1,"w-full"],["value",""],["name","thousand_separator","id","thousand_separator",1,"w-full"],["class","card-body flex justify-end",4,"ngIf"],[1,"card-body","flex","justify-end"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(r,s){1&r&&(e._UZ(0,"app-alert",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Currency Information "),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9," Name "),e.TgZ(10,"span",8),e._uU(11,"\xa0*"),e.qZA()(),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(x){return s.currencyName=x}),e.qZA()(),e.TgZ(13,"div",6)(14,"label",7),e._uU(15," Currency Code "),e.TgZ(16,"span",8),e._uU(17,"\xa0*"),e.qZA()(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(x){return s.currencyCode=x}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",7),e._uU(21," Rate (Main) "),e.TgZ(22,"span",8),e._uU(23,"\xa0*"),e.qZA()(),e.TgZ(24,"input",11),e.NdJ("ngModelChange",function(x){return s.currencyRate=x}),e.qZA()(),e.TgZ(25,"div",6)(26,"label",7),e._uU(27," Symbol "),e.TgZ(28,"span",8),e._uU(29,"\xa0*"),e.qZA()(),e.TgZ(30,"input",12),e.NdJ("ngModelChange",function(x){return s.currencySymbol=x}),e.qZA()(),e.TgZ(31,"div",6)(32,"label",7),e._uU(33," Decimal Mark "),e.TgZ(34,"span",8),e._uU(35,"\xa0*"),e.qZA()(),e.TgZ(36,"select",13)(37,"option",14),e._uU(38,"Select Decimal Mark"),e.qZA(),e.TgZ(39,"option"),e._uU(40,","),e.qZA(),e.TgZ(41,"option"),e._uU(42,"."),e.qZA()()(),e.TgZ(43,"div",6)(44,"label",7),e._uU(45," Thousand Separator "),e.TgZ(46,"span",8),e._uU(47,"\xa0*"),e.qZA()(),e.TgZ(48,"select",15)(49,"option",14),e._uU(50,"Select Thousand Separator"),e.qZA(),e.TgZ(51,"option"),e._uU(52,","),e.qZA(),e.TgZ(53,"option"),e._uU(54,"."),e.qZA()()()(),e.YNc(55,d,3,2,"div",16),e.qZA()()),2&r&&(e.Q6J("errorMessages",s.errorMessages)("successMessage",s.successMessage),e.xp6(12),e.Q6J("ngModel",s.currencyName)("disabled",s.isDefaultCurrency),e.xp6(6),e.Q6J("ngModel",s.currencyCode)("disabled",!0),e.xp6(6),e.Q6J("ngModel",s.currencyRate)("disabled",s.isDefaultCurrency),e.xp6(6),e.Q6J("ngModel",s.currencySymbol),e.xp6(25),e.Q6J("ngIf",s.permissionService.hasPermission("Settings - Master Data - Can Update Currency")))},dependencies:[n.O5,M.w,_.YN,_.Kr,_.Fj,_.wV,_.JJ,_.On]}),a})();var l=c(5439),C=c(9602),y=c(4909);function b(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(3);return e.KtG(r.save())}),e._uU(1),e.qZA()}if(2&a){const i=e.oxw(3);e.Q6J("disabled",i.isLoading),e.xp6(1),e.hij(" ",i.isLoading?"isLoading...":"Add Changes"," ")}}function I(a,o){if(1&a&&(e.TgZ(0,"div",34),e.YNc(1,b,2,2,"button",35),e.qZA()),2&a){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.permissionService.hasPermission("Settings - Master Data - Currency - Can Create Currency Rate Period"))}}function k(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(3);return e.KtG(r.update())}),e._uU(1),e.qZA()}if(2&a){const i=e.oxw(3);e.Q6J("disabled",i.isLoading),e.xp6(1),e.hij(" ",i.isLoading?"Updating...":"Update Changes"," ")}}function J(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",37)(1,"button",38),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.cancel())}),e._uU(2,"Cancel"),e.qZA(),e.YNc(3,k,2,2,"button",35),e.qZA()}if(2&a){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf",i.permissionService.hasPermission("Settings - Master Data - Currency - Can Update Currency Rate Period"))}}function q(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",47)(1,"a",48),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.editCurrencyRatePeriod(r))}),e.TgZ(2,"span",49),e._UZ(3,"i",50),e.qZA(),e.TgZ(4,"span",51),e._uU(5," Edit "),e.qZA()()()}}function N(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",47)(1,"a",48),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.delete(r.id))}),e.TgZ(2,"span",49),e._UZ(3,"i",52),e.qZA(),e.TgZ(4,"span",51),e._uU(5," Remove "),e.qZA()()()}}function R(a,o){if(1&a&&(e.TgZ(0,"tr")(1,"td",39),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td",39),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.qZA(),e.TgZ(9,"td",40)(10,"div",41)(11,"div",42)(12,"button",43),e._UZ(13,"i",44),e.qZA(),e.TgZ(14,"div",45),e.YNc(15,q,6,0,"div",46),e.YNc(16,N,6,0,"div",46),e.qZA()()()()()),2&a){const i=o.$implicit,t=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,5,i.period_start,"dd/MM/y")," "),e.xp6(3),e.hij(" ",e.xi3(6,8,i.period_end,"dd/MM/y")," "),e.xp6(3),e.hij(" ",i.exchange_rate," "),e.xp6(7),e.Q6J("ngIf",t.permissionService.hasPermission("Settings - Master Data - Currency - Can Show Currency Rate Period")),e.xp6(1),e.Q6J("ngIf",t.permissionService.hasPermission("Settings - Master Data - Currency - Can Delete Currency Rate Period"))}}function D(a,o){1&a&&(e.TgZ(0,"tr")(1,"td",53),e._uU(2," No currency rate periods found "),e.qZA()())}function E(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"app-pagination",54),e.NdJ("selectedPage",function(r){e.CHM(i);const s=e.oxw(2);return e.KtG(s.selectedPage(r))}),e.qZA()}if(2&a){const i=e.oxw(2);e.Q6J("perPage",i.perPage)("totalItems",i.totalItems)("currentPage",i.page)}}function Y(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),e._uU(4),e.qZA()(),e.TgZ(5,"div",6)(6,"div",7)(7,"label",8),e._uU(8," Period Start "),e.TgZ(9,"span",9),e._uU(10,"\xa0*"),e.qZA()(),e.TgZ(11,"input",10),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(13);return e.KtG(r.open())})("ngModelChange",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.period_start=r)}),e.qZA(),e._UZ(12,"mat-datepicker",null,11),e.qZA(),e.TgZ(14,"div",7)(15,"label",8),e._uU(16," Period End "),e.TgZ(17,"span",9),e._uU(18,"\xa0*"),e.qZA()(),e.TgZ(19,"input",12),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(21);return e.KtG(r.open())})("ngModelChange",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.period_end=r)}),e.qZA(),e._UZ(20,"mat-datepicker",null,13),e.qZA(),e.TgZ(22,"div",7)(23,"label",8),e._uU(24," Exchange Rate "),e.TgZ(25,"span",9),e._uU(26,"\xa0*"),e.qZA()(),e.TgZ(27,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.exchange_rate=r)})("ngModelChange",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.exchange_rate=r)}),e.qZA()()(),e.YNc(28,I,2,1,"div",15),e.YNc(29,J,4,1,"div",16),e.qZA(),e.TgZ(30,"div",17)(31,"div",18)(32,"div",19)(33,"h3",20),e._uU(34),e.qZA()(),e.TgZ(35,"div",21)(36,"div",22)(37,"div",23)(38,"table",24)(39,"thead")(40,"tr")(41,"th",25),e._uU(42," Period Start "),e.qZA(),e.TgZ(43,"th",26),e._uU(44," Period End "),e.qZA(),e.TgZ(45,"th",26),e._uU(46," Exchange Rate "),e.qZA(),e._UZ(47,"th",27),e.qZA()(),e.TgZ(48,"tbody"),e.YNc(49,R,17,11,"tr",28),e.YNc(50,D,3,0,"tr",29),e.qZA()()(),e.TgZ(51,"div",30),e._UZ(52,"div",31),e.TgZ(53,"div",32),e.YNc(54,E,1,3,"app-pagination",33),e.qZA()()()()()()()}if(2&a){const i=e.MAs(13),t=e.MAs(21),r=e.oxw();e.xp6(4),e.hij(" ","create"==r.actionPage?"Add Currency Rate Period":"Update Currency Rate Period"," "),e.xp6(7),e.Q6J("matDatepicker",i)("ngModel",r.period_start),e.xp6(8),e.Q6J("matDatepicker",t)("ngModel",r.period_end),e.xp6(8),e.Q6J("ngModel",r.exchange_rate)("ngModel",r.exchange_rate),e.xp6(1),e.Q6J("ngIf","create"==r.actionPage),e.xp6(1),e.Q6J("ngIf","update"==r.actionPage),e.xp6(5),e.lnq(" Showing ",r.from," to ",r.to," of ",r.totalItems," currency rate periods "),e.xp6(15),e.Q6J("ngForOf",r.currencyRatePeriods),e.xp6(1),e.Q6J("ngIf",0==r.currencyRatePeriods.length),e.xp6(4),e.Q6J("ngIf",!r.isLoading)}}let j=(()=>{const o=class{constructor(t){this.permissionService=t,this.modelId="",this.isLoading=!1,this.settingUp=!0,this.successSetup=!1,this.page=1,this.totalItems=0,this.perPage=10,this.from=0,this.to=0,this.actionPage="create",this.period_start="",this.period_end="",this.exchange_rate="",this.currencyRatePeriods={},this.errorMessages=[],this.successMessage=""}selectedPage(t){this.page=t,this.setup()}delete(t){var r=this;return(0,f.Z)(function*(){if(confirm("Are you sure you want to delete this Currency Rate Period?")){r.isLoading=!0;try{const g=yield(yield p.Z.delete(`${m.N.api_url}/settings/currency-rate-periods/${t}`,{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`,"Content-Type":"application/json",Accept:"application/json"}})).data;if(g.error)return r.errorMessages.push(g.error_message),window.scrollTo(0,0),r.isLoading=!1,void r.clearMessages();r.successMessage="Successfully deleted Currency Rate Period!",r.setup(),setTimeout(()=>{r.successMessage=""},3500)}catch(s){console.log(s),422==s.response.status?Object.keys(s.response.data.errors).forEach(g=>{r.errorMessages.push(s.response.data.errors[g])}):r.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),r.isLoading=!1,r.clearMessages()}}})()}save(){var t=this;return(0,f.Z)(function*(){t.isLoading=!0,t.errorMessages=[],t.successMessage="";try{const s=yield(yield p.Z.post(`${m.N.api_url}/settings/currency-rate-periods`,{currency_id:t.modelId,period_start:l(t.period_start).format("YYYY-MM-DD"),period_end:l(t.period_end).format("YYYY-MM-DD"),exchange_rate:t.exchange_rate},{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`,"Content-Type":"application/json",Accept:"application/json"}})).data;if(s.error)return t.errorMessages.push(s.error_message),window.scrollTo(0,0),t.isLoading=!1,void t.clearMessages();t.period_start="",t.period_end="",t.exchange_rate="",t.successMessage="Successfully added Currency Rate Period!",window.scrollTo(0,0),t.setup(),setTimeout(()=>{t.successMessage=""},3500)}catch(r){console.log(r),422==r.response.status?Object.keys(r.response.data.errors).forEach(s=>{t.errorMessages.push(r.response.data.errors[s])}):t.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),t.isLoading=!1,t.clearMessages()}})()}update(){var t=this;return(0,f.Z)(function*(){t.isLoading=!0,t.errorMessages=[],t.successMessage="";try{const r={currency_id:t.modelId,period_start:l(t.period_start).format("YYYY-MM-DD"),period_end:l(t.period_end).format("YYYY-MM-DD"),exchange_rate:t.exchange_rate},g=yield(yield p.Z.put(`${m.N.api_url}/settings/currency-rate-periods/${t.currencyRatePeriodId}`,r,{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`,"Content-Type":"application/json",Accept:"application/json"}})).data;if(g.error)return t.errorMessages.push(g.error_message),window.scrollTo(0,0),t.isLoading=!1,void t.clearMessages();t.actionPage="create",t.period_start="",t.period_end="",t.exchange_rate="",t.successMessage="Successfully updated Currency Rate Period!",window.scrollTo(0,0),t.setup(),setTimeout(()=>{t.successMessage=""},3500)}catch(r){console.log(r),422==r.response.status?Object.keys(r.response.data.errors).forEach(s=>{t.errorMessages.push(r.response.data.errors[s])}):t.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),t.isLoading=!1,t.clearMessages()}})()}setup(){var t=this;return(0,f.Z)(function*(){t.isLoading=!0;try{const s=yield(yield p.Z.get(`${m.N.api_url}/settings/currency-rate-periods?page=${t.page}&currency_id=${t.modelId}`,{headers:{Authorization:`Bearer ${window.localStorage.getItem(m.N.api_token_identifier)}`,"Content-Type":"application/json",Accept:"application/json"}})).data;if(t.settingUp=!1,s.error)return t.errorMessages.push(s.error_message),void(t.isLoading=!1);t.successSetup=!0,t.currencyRatePeriods=s.currency_rate_periods.data,t.totalItems=s.currency_rate_periods.total,t.from=s.currency_rate_periods.from,t.to=s.currency_rate_periods.to,t.isLoading=!1}catch(r){console.log(r),422==r.response.status?Object.keys(r.response.data.errors).forEach(s=>{t.errorMessages.push(r.response.data.errors[s])}):t.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),t.isLoading=!1,t.clearMessages()}})()}editCurrencyRatePeriod(t){this.actionPage="update",this.currencyRatePeriodId=t.id,this.period_start=t.period_start,this.period_end=t.period_end,this.exchange_rate=t.exchange_rate,window.scrollTo(0,0)}cancel(){this.actionPage="create",this.period_start="",this.period_end="",this.exchange_rate="",window.scrollTo(0,0)}ngOnInit(){this.setup()}clearMessages(){setTimeout(()=>{this.successMessage=""},3500)}};let a=o;return o.\u0275fac=function(r){return new(r||o)(e.Y36(T.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-currency-rate-periods"]],inputs:{modelId:"modelId"},decls:2,vars:3,consts:[[3,"errorMessages","successMessage"],["class","grid gap-5 lg:gap-7.5 w-full mx-auto",4,"ngIf"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-auto"],[1,"card","pb-2.5"],["id","basic_settings",1,"card-header"],[1,"card-title"],[1,"card-body","grid","grid-cols-1","md:grid-cols-1","lg:grid-cols-1","gap-4"],[1,"flex","items-center","flex-wrap","lg:flex-nowrap","gap-2.5"],[1,"form-label","max-w-56"],[1,"text-danger"],["name","period_start","placeholder","Select Period Start",1,"input",3,"matDatepicker","ngModel","click","ngModelChange"],["periodStart",""],["name","period_end","placeholder","Select Period End",1,"input",3,"matDatepicker","ngModel","click","ngModelChange"],["periodEnd",""],["placeholder","Enter rate","type","number","onkeypress","return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46",1,"input",3,"ngModel","ngModelChange"],["class","card-body flex justify-end",4,"ngIf"],["class","card-body flex justify-end gap-2",4,"ngIf"],[1,"grid","gap-5","lg:gap-7.5"],[1,"card","card-grid","min-w-full"],[1,"card-header","flex-wrap","gap-2"],[1,"card-title","font-medium","text-sm"],[1,"card-body"],["data-datatable","true","data-datatable-page-size","20"],[1,"scrollable-x-auto"],["data-datatable-table","true",1,"table","table-auto","table-border"],[1,"min-w-[300px]"],[1,"min-w-[180px]"],[1,"w-[60px]"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer","justify-center","md:justify-between","flex-col","md:flex-row","gap-5","text-gray-600","text-2sm","font-medium"],[1,"flex","items-center","gap-2","order-2","md:order-1"],[1,"flex","items-center","gap-4","order-1","md:order-2"],[3,"perPage","totalItems","currentPage","selectedPage",4,"ngIf"],[1,"card-body","flex","justify-end"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card-body","flex","justify-end","gap-2"],[1,"btn","btn-light",3,"click"],[1,"text-gray-800","font-normal"],[1,"text-center"],["data-menu","true",1,"menu","flex-inline"],["data-menu-item-offset","0, 10px","data-menu-item-placement","bottom-end","data-menu-item-placement-rtl","bottom-start","data-menu-item-toggle","dropdown","data-menu-item-trigger","click|lg:click",1,"menu-item"],[1,"menu-toggle","btn","btn-sm","btn-icon","btn-light","btn-clear"],[1,"ki-filled","ki-dots-vertical"],["data-menu-dismiss","true",1,"menu-dropdown","menu-default","w-full","max-w-[175px]"],["class","menu-item",4,"ngIf"],[1,"menu-item"],[1,"menu-link",3,"click"],[1,"menu-icon"],[1,"ki-filled","ki-setting-2"],[1,"menu-title"],[1,"ki-filled","ki-trash"],["colspan","4",1,"text-center","text-gray-500","font-normal"],[3,"perPage","totalItems","currentPage","selectedPage"]],template:function(r,s){1&r&&(e._UZ(0,"app-alert",0),e.YNc(1,Y,55,15,"div",1)),2&r&&(e.Q6J("errorMessages",s.errorMessages)("successMessage",s.successMessage),e.xp6(1),e.Q6J("ngIf",!s.settingUp&&s.successSetup))},dependencies:[n.sg,n.O5,M.w,_.Fj,_.wV,_.JJ,_.On,C.Mq,C.hl,y.Q,n.uU]}),a})();function Q(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"app-currency-details",11),e.BQk()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("modelId",i.modelId)}}function z(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"app-currency-rate-periods",11),e.BQk()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("modelId",i.modelId)}}const P=function(a){return[a]},O=function(){return{tab:"currency_details"}},L=function(){return{tab:"currency_rate_periods"}};let F=(()=>{const o=class{constructor(t,r){this.headerService=t,this.route=r,this.modelId=0,this.currentTab="currency_details",this.headerService.setupHeader([{title:"Settings"},{title:"Master Data"},{title:"Currency Management",link:"/settings/master-data/currency-management"},{title:"Manager Currency"}])}ngOnInit(){this.modelId=this.route.snapshot.params.id,this.route.queryParams.subscribe(t=>{this.currentTab=t.tab??"currency_details"})}};let a=o;return o.\u0275fac=function(r){return new(r||o)(e.Y36(Z.r),e.Y36(h.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manager"]],decls:18,vars:16,consts:[[1,"container-fixed"],[1,"flex","items-center","flex-wrap","md:flex-nowrap","lg:items-end","justify-between","border-b","border-b-gray-200","dark:border-b-coal-100","gap-3","lg:gap-6","mb-2"],[1,"grid"],[1,"scrollable-x-auto"],["data-menu","true",1,"menu","gap-3"],[1,"menu-item","border-b-2","border-b-transparent","menu-item-active:border-b-primary","menu-item-here:border-b-primary"],["tabindex","0",1,"menu-link","gap-1.5","pb-2","lg:pb-4","px-2",3,"routerLink","queryParams"],[1,"menu-title","text-nowrap","font-medium","text-sm","text-gray-700","menu-item-active:text-primary","menu-item-active:font-semibold","menu-item-here:text-primary","menu-item-here:font-semibold","menu-item-show:text-primary","menu-link-hover:text-primary"],[1,"flex","items-center","justify-end","grow","lg:grow-0","lg:pb-4","gap-2.5","mb-3","lg:mb-0"],["routerLink","/settings/master-data/currency-management",1,"btn","btn-sm","btn-light"],[4,"ngIf"],[3,"modelId"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"span",7),e._uU(8," Currency details "),e.qZA()()(),e.TgZ(9,"div",5)(10,"a",6)(11,"span",7),e._uU(12," Currency Rate Periods "),e.qZA()()()()()(),e.TgZ(13,"div",8)(14,"button",9),e._uU(15," Back "),e.qZA()()(),e.YNc(16,Q,2,1,"ng-container",10),e.YNc(17,z,2,1,"ng-container",10),e.qZA()),2&r&&(e.xp6(5),e.ekj("active","currency_details"===s.currentTab),e.xp6(1),e.Q6J("routerLink",e.VKq(10,P,"/settings/master-data/currency-management/"+s.modelId))("queryParams",e.DdM(12,O)),e.xp6(3),e.ekj("active","currency_rate_periods"===s.currentTab),e.xp6(1),e.Q6J("routerLink",e.VKq(13,P,"/settings/master-data/currency-management/"+s.modelId))("queryParams",e.DdM(15,L)),e.xp6(6),e.Q6J("ngIf","currency_details"===s.currentTab),e.xp6(1),e.Q6J("ngIf","currency_rate_periods"===s.currentTab))},dependencies:[n.O5,h.rH,u,j]}),a})();var U=c(5730);let B=(()=>{const o=class{};let a=o;return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[n.ez,h.Bz,U.n,_.u5]}),a})();var S=c(3238),K=c(507);let G=(()=>{const o=class{};let a=o;return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:S.Ad,useValue:"en-GB"}],imports:[n.ez,h.Bz,U.n,_.u5,C.FA,S.XK,K.u]}),a})();const H=[{path:"",component:F}];let V=(()=>{const o=class{};let a=o;return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[n.ez,h.Bz.forChild(H),_.u5,B,G,h.Bz]}),a})()}}]);