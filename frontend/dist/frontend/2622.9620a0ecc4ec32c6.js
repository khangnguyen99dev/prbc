(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2622],{507:(oe,te,x)=>{"use strict";x.d(te,{u:()=>c});var R=x(6895),ee=x(2605),B=x(1571);let c=(()=>{const m=class{};let N=m;return m.\u0275fac=function(S){return new(S||m)},m.\u0275mod=B.oAB({type:m}),m.\u0275inj=B.cJS({imports:[R.ez,ee.Bz]}),N})()},2622:(oe,te,x)=>{"use strict";x.r(te),x.d(te,{GenerateQrCodeModule:()=>K});var R=x(6895),ee=x(5861),B=x(2340),c=x(1822),N=x(8259),a=(x(6969),x(1571)),Z=x(2605),S=x(433),Y=x(12);function ie(O,A){1&O&&(a.O4$(),a.TgZ(0,"svg",20),a._UZ(1,"circle",21)(2,"path",22),a.qZA())}function p(O,A){if(1&O){const W=a.EpF();a.TgZ(0,"div",23),a._UZ(1,"img",24),a.TgZ(2,"div",25)(3,"a",26),a.NdJ("click",function(){a.CHM(W);const E=a.oxw();return a.KtG(E.downloadQrCode())}),a.O4$(),a.TgZ(4,"svg",27),a._UZ(5,"path",28),a.qZA(),a._uU(6," Download QR Code "),a.qZA()()()}if(2&O){const W=a.oxw();a.xp6(1),a.Q6J("src",W.qrCode,a.LSH),a.xp6(2),a.Q6J("href",W.qrCode,a.LSH)}}function v(O,A){1&O&&(a.TgZ(0,"div",23)(1,"p",29),a._uU(2,"No QR code generated"),a.qZA()())}let h=(()=>{const A=class{constructor(D){this.router=D,this.errorMessages=[],this.successMessage="",this.loading=!1,this.bankList=[],this.selectedBank="",this.accountNumber="",this.amount=0,this.description="",this.accountName="kaneservice",this.qrCode=""}generateQrCode(){return this.clearMessages(),this.loading=!0,this.qrCode="",this.selectedBank&&this.amount&&this.accountNumber?this.amount<1e4?(this.errorMessages.push("Gi\xe1 tr\u1ecb t\u1ed1i thi\u1ec3u l\xe0 10,000 VND"),window.scrollTo(0,0),void(this.loading=!1)):void c.Z.post("https://api.vietqr.io/v2/generate",{accountNo:this.accountNumber,accountName:this.accountName,acqId:this.selectedBank,amount:this.amount,addInfo:this.description,format:"text",template:"compact"}).then(E=>{if(E.data.desc&&"00"!=E.data.code)return this.errorMessages.push(E.data.desc),void window.scrollTo(0,0);this.qrCode=E.data.data.qrDataURL,this.loading=!1}).catch(E=>{console.error(E),422==E.response.status?Object.keys(E.response.data.errors).forEach(H=>{this.errorMessages.push(E.response.data.errors[H])}):this.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),this.loading=!1,this.clearMessages()}):(this.errorMessages.push("Vui l\xf2ng ch\u1ecdn ng\xe2n h\xe0ng, nh\u1eadp s\u1ed1 ti\u1ec1n v\xe0 s\u1ed1 t\xe0i kho\u1ea3n"),this.loading=!1,void window.scrollTo(0,0))}clearMessages(){this.errorMessages=[],this.successMessage=""}getBankList(){c.Z.get("https://api.vietqr.io/v2/banks").then(D=>{this.bankList=D.data.data??[]}).catch(D=>{console.error(D)})}ngOnInit(){var D=this;return(0,ee.Z)(function*(){yield D.getBankList(),D.setupSelectize()})()}downloadQrCode(){const D=document.createElement("a");D.href=this.qrCode,D.download="qr-code.png",D.click(),this.qrCode=""}setupSelectize(){const D=this;N(function(){N("#bank").selectize({preload:!0,valueField:"bin",searchField:"shortName",labelField:"shortName",load:(q,j)=>{N.ajax({url:"https://api.vietqr.io/v2/banks",type:"GET",error:function(){j()},success:he=>{j(he?.data)},headers:{Authorization:`Bearer ${window.localStorage.getItem(B.N.api_token_identifier)}`,"Content-Type":"application/json"}})},onChange:q=>{D.selectedBank=q}})})}};let O=A;return A.\u0275fac=function(E){return new(E||A)(a.Y36(Z.F0))},A.\u0275cmp=a.Xpm({type:A,selectors:[["app-generate-qr-code"]],decls:32,vars:8,consts:[[1,"container","mx-auto","p-6"],[1,"bg-white","rounded-lg","shadow-lg","p-8","max-w-md","mx-auto"],[1,"text-2xl","font-bold","mb-6","text-gray-800"],[3,"errorMessages","successMessage"],[1,"space-y-6"],[1,"form-group"],["for","bank",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","bank","name","bank"],["value","","disabled","","selected",""],["for","accountNumber",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","accountNumber","name","accountNumber","placeholder","Enter account number",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],["for","amount",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["type","number","id","amount","name","amount","placeholder","Enter amount (minimum 10,000)","min","10000",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],[1,"absolute","right-3","top-2","text-gray-500"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","name","description","placeholder","Enter transfer description","rows","3",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:ring-primary","focus:border-primary",3,"ngModel","ngModelChange"],["type","button",1,"w-full","bg-primary","text-white","px-6","py-3","rounded-md","hover:bg-primary-dark","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["class","animate-spin h-5 w-5","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","mt-6",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-6"],["alt","QR Code",1,"mx-auto",3,"src"],[1,"mt-4","text-center"],["download","qr-code.png",1,"inline-flex","items-center","justify-center","bg-primary","text-white","px-6","py-3","rounded-md","hover:bg-primary-dark","transition-colors","gap-2",3,"href","click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],[1,"text-gray-500"]],template:function(E,H){1&E&&(a.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),a._uU(3,"Generate QR Code Payment"),a.qZA(),a._UZ(4,"app-alert",3),a.TgZ(5,"form",4)(6,"div",5)(7,"label",6),a._uU(8,"Select Bank"),a.qZA(),a.TgZ(9,"select",7)(10,"option",8),a._uU(11,"Choose a bank"),a.qZA()()(),a.TgZ(12,"div",5)(13,"label",9),a._uU(14,"Account Number"),a.qZA(),a.TgZ(15,"input",10),a.NdJ("ngModelChange",function(j){return H.accountNumber=j}),a.qZA()(),a.TgZ(16,"div",5)(17,"label",11),a._uU(18,"Amount (VND)"),a.qZA(),a.TgZ(19,"div",12)(20,"input",13),a.NdJ("ngModelChange",function(j){return H.amount=j}),a.qZA(),a.TgZ(21,"span",14),a._uU(22,"VND"),a.qZA()()(),a.TgZ(23,"div",5)(24,"label",15),a._uU(25,"Description"),a.qZA(),a.TgZ(26,"textarea",16),a.NdJ("ngModelChange",function(j){return H.description=j}),a.qZA()(),a.TgZ(27,"button",17),a.NdJ("click",function(){return H.generateQrCode()}),a.YNc(28,ie,3,0,"svg",18),a._uU(29," Generate QR Code "),a.qZA()(),a.YNc(30,p,7,2,"div",19),a.YNc(31,v,3,0,"div",19),a.qZA()()),2&E&&(a.xp6(4),a.Q6J("errorMessages",H.errorMessages)("successMessage",H.successMessage),a.xp6(11),a.Q6J("ngModel",H.accountNumber),a.xp6(5),a.Q6J("ngModel",H.amount),a.xp6(6),a.Q6J("ngModel",H.description),a.xp6(2),a.Q6J("ngIf",H.loading),a.xp6(2),a.Q6J("ngIf",H.qrCode),a.xp6(1),a.Q6J("ngIf",!H.qrCode))},dependencies:[R.O5,S._Y,S.YN,S.Kr,S.Fj,S.wV,S.JJ,S.JL,S.qQ,S.On,S.F,Y.w]}),O})();var C=x(5730),w=x(507),y=x(4859),k=x(4144),G=x(9602),V=x(3238),I=x(9549);const F=[{path:"",component:h}];let K=(()=>{const A=class{};let O=A;return A.\u0275fac=function(E){return new(E||A)},A.\u0275mod=a.oAB({type:A}),A.\u0275inj=a.cJS({imports:[R.ez,Z.Bz.forChild(F),S.u5,C.n,w.u,y.ot,k.c,G.FA,V.XK,I.lN]}),O})()},5064:function(oe,te,x){var R,ee;void 0!==(ee="function"==typeof(R=function(){var B={mixin:function(N){N.plugins={},N.prototype.initializePlugins=function(m){var a,Z,S,Y=this,ie=[];if(Y.plugins={names:[],settings:{},requested:{},loaded:{}},c.isArray(m))for(a=0,Z=m.length;a<Z;a++)"string"==typeof m[a]?ie.push(m[a]):(Y.plugins.settings[m[a].name]=m[a].options,ie.push(m[a].name));else if(m)for(S in m)m.hasOwnProperty(S)&&(Y.plugins.settings[S]=m[S],ie.push(S));for(;ie.length;)Y.require(ie.shift())},N.prototype.loadPlugin=function(m){var a=this,Z=a.plugins,S=N.plugins[m];if(!N.plugins.hasOwnProperty(m))throw new Error('Unable to find "'+m+'" plugin');Z.requested[m]=!0,Z.loaded[m]=S.fn.apply(a,[a.plugins.settings[m]||{}]),Z.names.push(m)},N.prototype.require=function(m){var a=this,Z=a.plugins;if(!a.plugins.loaded.hasOwnProperty(m)){if(Z.requested[m])throw new Error('Plugin has circular dependency ("'+m+'")');a.loadPlugin(m)}return Z.loaded[m]},N.define=function(m,a){N.plugins[m]={name:m,fn:a}}}},c={isArray:Array.isArray||function(N){return"[object Array]"===Object.prototype.toString.call(N)}};return B})?R.call(te,x,te,oe):R)&&(oe.exports=ee)},6969:function(oe,te,x){var R,ee,B;ee=[x(8259),x(9655),x(5064)],R=function(c,N,m){"use strict";var a=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,s=function(r){var i=0;if(3===r.nodeType){var o=r.data.search(n);if(o>=0&&r.data.length>0){var l=r.data.match(n),u=document.createElement("span");u.className="highlight";var d=r.splitText(o),P=(d.splitText(l[0].length),d.cloneNode(!0));u.appendChild(P),d.parentNode.replaceChild(u,d),i=1}}else if(1===r.nodeType&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&("highlight"!==r.className||"SPAN"!==r.tagName))for(var b=0;b<r.childNodes.length;++b)b+=s(r.childNodes[b]);return i};return e.each(function(){s(this)})}};c.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var Z=function(){};Z.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},Z.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=Z.prototype[t[n]]};var t,S=/Mac/.test(navigator.userAgent),h=37,y=39,V=8,K=S?91:17,O=S?18:17,E=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,H=function(e){return typeof e<"u"},q=function(e){return typeof e>"u"||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},j=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},ue_after=function(e,t,n){var s=e[t];e[t]=function(){var r=s.apply(e,arguments);return n.apply(e,arguments),r}},ve=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},me=function(e,t){var n;return function(){var s=this,r=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(s,r)},t)}},ge=function(e,t,n){var s,r=e.trigger,i={};for(s in e.trigger=function(){var o=arguments[0];if(-1===t.indexOf(o))return r.apply(e,arguments);i[o]=arguments},n.apply(e,[]),e.trigger=r,i)i.hasOwnProperty(s)&&r.apply(e,i[s])},de=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),s=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-s,t.length=s}return t},be=function(e){var t=null,n=function(s,r){var i,o,l,u,d,f,P,b;r=r||{},!(s=s||window.event||{}).metaKey&&!s.altKey&&(!r.force&&!1===e.data("grow")||(i=e.val(),s.type&&"keydown"===s.type.toLowerCase()&&(l=(o=s.keyCode)>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||32===o,46===o||o===V?(b=de(e[0])).length?i=i.substring(0,b.start)+i.substring(b.start+b.length):o===V&&b.start?i=i.substring(0,b.start-1)+i.substring(b.start+1):46===o&&typeof b.start<"u"&&(i=i.substring(0,b.start)+i.substring(b.start+1)):l&&(f=s.shiftKey,P=String.fromCharCode(s.keyCode),i+=P=f?P.toUpperCase():P.toLowerCase())),u=e.attr("placeholder"),!i&&u&&(i=u),(d=function(e,t){return e?(z.$testInput||(z.$testInput=c("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),z.$testInput.text(e),function(e,t,n){var s,r,i={};if(n)for(s=0,r=n.length;s<r;s++)i[n[s]]=e.css(n[s]);else i=e.css();t.css(i)}(t,z.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),z.$testInput.width()):0}(i,e)+4)!==t&&(t=d,e.width(d),e.triggerHandler("resize"))))};e.on("keydown keyup update blur",n),n()},Oe=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},z=function(e,t){var s,r,i,o,l=this;(o=e[0]).selectize=l;var u=window.getComputedStyle&&window.getComputedStyle(o,null);if(i=(i=u?u.getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",c.extend(l,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===o.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(i),eventNS:".selectize"+ ++z.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?l.onSearchChange:me(l.onSearchChange,t.loadThrottle)}),l.sifter=new N(this.options,{diacritics:t.diacritics}),l.settings.options){for(s=0,r=l.settings.options.length;s<r;s++)l.registerOption(l.settings.options[s]);delete l.settings.options}if(l.settings.optgroups){for(s=0,r=l.settings.optgroups.length;s<r;s++)l.registerOptionGroup(l.settings.optgroups[s]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return Z.mixin(z),typeof m<"u"?m.mixin(z):((t={explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'})||(t={}),console.error("Selectize: "+"Dependency MicroPlugin is missing"),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())),c.extend(z.prototype,{setup:function(){var o,l,u,d,f,P,b,Q,L,g,e=this,t=e.settings,n=e.eventNS,s=c(window),r=c(document),i=e.$input;if(b=e.settings.mode,Q=i.attr("class")||"",o=c("<div>").addClass(t.wrapperClass).addClass(Q).addClass(b),l=c("<div>").addClass(t.inputClass).addClass("items").appendTo(o),u=c('<input type="text" autocomplete="off" />').appendTo(l).attr("tabindex",i.is(":disabled")?"-1":e.tabIndex),P=c(t.dropdownParent||o),d=c("<div>").addClass(t.dropdownClass).addClass(b).hide().appendTo(P),f=c("<div>").addClass(t.dropdownContentClass).appendTo(d),(g=i.attr("id"))&&(u.attr("id",g+"-selectized"),c("label[for='"+g+"']").attr("for",g+"-selectized")),e.settings.copyClassesToDropdown&&d.addClass(Q),o.css({width:i[0].style.width}),e.plugins.names.length&&(L="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(L),d.addClass(L)),(null===t.maxItems||t.maxItems>1)&&1===e.tagType&&i.attr("multiple","multiple"),e.settings.placeholder&&u.attr("placeholder",t.placeholder),!e.settings.splitOn&&e.settings.delimiter){var ae=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+ae+"+\\s*")}i.attr("autocorrect")&&u.attr("autocorrect",i.attr("autocorrect")),i.attr("autocapitalize")&&u.attr("autocapitalize",i.attr("autocapitalize")),u[0].type=i[0].type,e.$wrapper=o,e.$control=l,e.$control_input=u,e.$dropdown=d,e.$dropdown_content=f,d.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(_){_.stopImmediatePropagation()}),d.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),d.on("mousedown click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),function(e,t,n,s){e.on(t,n,function(r){for(var i=r.target;i&&i.parentNode!==e[0];)i=i.parentNode;return r.currentTarget=i,s.apply(this,[r])})}(l,"mousedown","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),be(u),l.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),u.on({mousedown:function(_){_.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keyup:function(){return e.onKeyUp.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),r.on("keydown"+n,function(_){e.isCmdDown=_[S?"metaKey":"ctrlKey"],e.isCtrlDown=_[S?"altKey":"ctrlKey"],e.isShiftDown=_.shiftKey}),r.on("keyup"+n,function(_){_.keyCode===O&&(e.isCtrlDown=!1),16===_.keyCode&&(e.isShiftDown=!1),_.keyCode===K&&(e.isCmdDown=!1)}),r.on("mousedown"+n,function(_){if(e.isFocused){if(_.target===e.$dropdown[0]||_.target.parentNode===e.$dropdown[0])return!1;!e.$control.has(_.target).length&&_.target!==e.$control[0]&&e.blur(_.target)}}),s.on(["scroll"+n,"resize"+n].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),s.on("mousemove"+n,function(){e.ignoreHover=!1}),this.revertSettings={$children:i.children().detach(),tabindex:i.attr("tabindex")},i.attr("tabindex",-1).hide().after(e.$wrapper),c.isArray(t.items)&&(e.setValue(t.items),delete t.items),E&&i.on("invalid"+n,function(_){_.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,i.is(":disabled")&&e.disable(),e.on("change",this.onChange),i.data("selectize",e),i.addClass("selectized"),e.trigger("initialize"),!0===t.preload&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,n=e.settings.optgroupLabelField;e.settings.render=c.extend({},{optgroup:function(r){return'<div class="optgroup">'+r.html+"</div>"},optgroup_header:function(r,i){return'<div class="optgroup-header">'+i(r[n])+"</div>"},option:function(r,i){return'<div class="option">'+i(r[t])+"</div>"},item:function(r,i){return'<div class="item">'+i(r[t])+"</div>"},option_create:function(r,i){return'<div class="create">Add <strong>'+i(r.input)+"</strong>&hellip;</div>"}},e.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]])&&this.on(e,t)},onClick:function(e){var t=this;(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,n=e.isDefaultPrevented();if(c(e.target),t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():n||t.setActiveItem(null),!1}else n||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?e.preventDefault():t.settings.splitOn&&setTimeout(function(){var n=t.$control_input.val();if(n.match(t.settings.splitOn))for(var s=c.trim(n).split(t.settings.splitOn),r=0,i=s.length;r<i;r++)t.createItem(s[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var n=this;if(n.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(n.isCmdDown)return void n.selectAll();break;case 27:return void(n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!n.isOpen&&n.hasOptions)n.open();else if(n.$activeOption){n.ignoreHover=!0;var s=n.getAdjacentOption(n.$activeOption,1);s.length&&n.setActiveOption(s,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(n.$activeOption){n.ignoreHover=!0;var r=n.getAdjacentOption(n.$activeOption,-1);r.length&&n.setActiveOption(r,!0,!0)}return void e.preventDefault();case 13:return void(n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),e.preventDefault()));case h:return void n.advanceSelection(-1,e);case y:return void n.advanceSelection(1,e);case 9:return n.settings.selectOnTab&&n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),n.isFull()||e.preventDefault()),void(n.settings.create&&n.createItem()&&e.preventDefault());case V:case 46:return void n.deleteSelection(e)}!n.isFull()&&!n.isInputHidden||(S?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(s){n.apply(t,[e,s])})))},onFocus:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var s=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),t&&t.focus&&t.focus(),n.isBlurring=!1,n.ignoreFocus=!1,n.trigger("blur")};n.isBlurring=!0,n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,s):s()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,n,r=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(n=c(e.currentTarget)).hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):typeof(t=n.attr("data-value"))<"u"&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(t),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(t)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(s){t.loading=Math.max(t.loading-1,0),s&&s.length&&(t.addOption(s),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",s)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){ge(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var s,r,i,o,l,u,d,f,n=this;if("single"!==n.settings.mode){if(!(e=c(e)).length)return c(n.$activeItems).removeClass("active"),n.$activeItems=[],void(n.isFocused&&n.showInput());if("mousedown"===(s=t&&t.type.toLowerCase())&&n.isShiftDown&&n.$activeItems.length){for(f=n.$control.children(".active:last"),(o=Array.prototype.indexOf.apply(n.$control[0].childNodes,[f[0]]))>(l=Array.prototype.indexOf.apply(n.$control[0].childNodes,[e[0]]))&&(d=o,o=l,l=d),r=o;r<=l;r++)-1===n.$activeItems.indexOf(u=n.$control[0].childNodes[r])&&(c(u).addClass("active"),n.$activeItems.push(u));t.preventDefault()}else"mousedown"===s&&n.isCtrlDown||"keydown"===s&&this.isShiftDown?e.hasClass("active")?(i=n.$activeItems.indexOf(e[0]),n.$activeItems.splice(i,1),e.removeClass("active")):n.$activeItems.push(e.addClass("active")[0]):(c(n.$activeItems).removeClass("active"),n.$activeItems=[e.addClass("active")[0]]);n.hideInput(),this.isFocused||n.focus()}},setActiveOption:function(e,t,n){var s,r,i,o,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,(e=c(e)).length&&(u.$activeOption=e.addClass("active"),(t||!H(t))&&(s=u.$dropdown_content.height(),r=u.$activeOption.outerHeight(!0),t=u.$dropdown_content.scrollTop()||0,o=i=u.$activeOption.offset().top-u.$dropdown_content.offset().top+t,l=i-s+r,i+r>s+t?u.$dropdown_content.stop().animate({scrollTop:l},n?u.settings.scrollDuration:0):i<t&&u.$dropdown_content.stop().animate({scrollTop:o},n?u.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(e){var t,r,i,o=this,l=o.settings,u=this.getSearchOptions();if(l.score&&"function"!=typeof(i=o.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,r=o.sifter.search(e,c.extend(u,{score:i})),o.currentResults=r):r=c.extend(!0,{},o.currentResults),l.hideSelected)for(t=r.items.length-1;t>=0;t--)-1!==o.items.indexOf(q(r.items[t].id))&&r.items.splice(t,1);return r},refreshOptions:function(e){var t,n,s,r,i,o,l,u,d,f,P,b,M,T,Q,L;typeof e>"u"&&(e=!0);var g=this,ae=c.trim(g.$control_input.val()),_=g.search(ae),ne=g.$dropdown_content,le=g.$activeOption&&q(g.$activeOption.attr("data-value"));for(r=_.items.length,"number"==typeof g.settings.maxOptions&&(r=Math.min(r,g.settings.maxOptions)),i={},o=[],t=0;t<r;t++)for(u=g.render("option",l=g.options[_.items[t].id]),n=0,s=(f=c.isArray(d=l[g.settings.optgroupField]||"")?d:[d])&&f.length;n<s;n++)g.optgroups.hasOwnProperty(d=f[n])||(d=""),i.hasOwnProperty(d)||(i[d]=document.createDocumentFragment(),o.push(d)),i[d].appendChild(u);for(this.settings.lockOptgroupOrder&&o.sort(function(ce,pe){return(g.optgroups[ce].$order||0)-(g.optgroups[pe].$order||0)}),P=document.createDocumentFragment(),t=0,r=o.length;t<r;t++)g.optgroups.hasOwnProperty(d=o[t])&&i[d].childNodes.length?((b=document.createDocumentFragment()).appendChild(g.render("optgroup_header",g.optgroups[d])),b.appendChild(i[d]),P.appendChild(g.render("optgroup",c.extend({},g.optgroups[d],{html:Oe(b),dom:b})))):P.appendChild(i[d]);if(ne.html(P),g.settings.highlight&&(ne.removeHighlight(),_.query.length&&_.tokens.length))for(t=0,r=_.tokens.length;t<r;t++)a(ne,_.tokens[t].regex);if(!g.settings.hideSelected)for(t=0,r=g.items.length;t<r;t++)g.getOption(g.items[t]).addClass("selected");(M=g.canCreate(ae))&&(ne.prepend(g.render("option_create",{input:ae})),L=c(ne[0].childNodes[0])),g.hasOptions=_.items.length>0||M,g.hasOptions?(_.items.length>0?((Q=le&&g.getOption(le))&&Q.length?T=Q:"single"===g.settings.mode&&g.items.length&&(T=g.getOption(g.items[0])),(!T||!T.length)&&(T=L&&!g.settings.addPrecedence?g.getAdjacentOption(L,1):ne.find("[data-selectable]:first"))):T=L,g.setActiveOption(T),e&&!g.isOpen&&g.open()):(g.setActiveOption(null),e&&g.isOpen&&g.close())},addOption:function(e){var t,n,s,r=this;if(c.isArray(e))for(t=0,n=e.length;t<n;t++)r.addOption(e[t]);else(s=r.registerOption(e))&&(r.userOptions[s]=!0,r.lastQuery=null,r.trigger("option_add",s,e))},registerOption:function(e){var t=q(e[this.settings.valueField]);return!(typeof t>"u"||null===t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=q(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var s,r,i,o,l,u,d,n=this;if(e=q(e),i=q(t[n.settings.valueField]),null!==e&&n.options.hasOwnProperty(e)){if("string"!=typeof i)throw new Error("Value must be set in option data");d=n.options[e].$order,i!==e&&(delete n.options[e],-1!==(o=n.items.indexOf(e))&&n.items.splice(o,1,i)),t.$order=t.$order||d,n.options[i]=t,u=n.renderCache.option,(l=n.renderCache.item)&&(delete l[e],delete l[i]),u&&(delete u[e],delete u[i]),-1!==n.items.indexOf(i)&&(s=n.getItem(e),r=c(n.render("item",t)),s.hasClass("active")&&r.addClass("active"),s.replaceWith(r)),n.lastQuery=null,n.isOpen&&n.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=q(e);var s=n.renderCache.item,r=n.renderCache.option;s&&delete s[e],r&&delete r[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={};var t=e.options;c.each(e.options,function(n,s){-1==e.items.indexOf(n)&&delete t[n]}),e.options=e.sifter.items=t,e.lastQuery=null,e.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var n=this.$dropdown.find("[data-selectable]"),s=n.index(e)+t;return s>=0&&s<n.length?n.eq(s):c()},getElementWithValue:function(e,t){if(typeof(e=q(e))<"u"&&null!==e)for(var n=0,s=t.length;n<s;n++)if(t[n].getAttribute("data-value")===e)return c(t[n]);return c()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,s=0;s<n.length;s++)this.buffer.appendChild(n[s]);for(var r=c.isArray(e)?e:[e],i=(s=0,r.length);s<i;s++)this.isPending=s<i-1,this.addItem(r[s],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){ge(this,t?[]:["change"],function(){var s,r,i,f,P,o=this,l=o.settings.mode;e=q(e),-1===o.items.indexOf(e)?o.options.hasOwnProperty(e)&&("single"===l&&o.clear(t),("multi"!==l||!o.isFull())&&(s=c(o.render("item",o.options[e])),P=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(s),(!o.isPending||!P&&o.isFull())&&o.refreshState(),o.isSetup&&(i=o.$dropdown_content.find("[data-selectable]"),o.isPending||(r=o.getOption(e),f=o.getAdjacentOption(r,1).attr("data-value"),o.refreshOptions(o.isFocused&&"single"!==l),f&&o.setActiveOption(o.getOption(f))),!i.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,s),o.isPending||o.updateOriginalInput({silent:t})))):"single"===l&&o.close()})},removeItem:function(e,t){var s,r,i,n=this;s=e instanceof c?e:n.getItem(e),e=q(s.attr("data-value")),-1!==(r=n.items.indexOf(e))&&(s.remove(),s.hasClass("active")&&(i=n.$activeItems.indexOf(s[0]),n.$activeItems.splice(i,1)),n.items.splice(r,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(e)&&n.removeOption(e,t),r<n.caretPos&&n.setCaret(n.caretPos-1),n.refreshState(),n.updatePlaceholder(),n.updateOriginalInput({silent:t}),n.positionDropdown(),n.trigger("item_remove",e,s))},createItem:function(e,t){var n=this,s=n.caretPos;e=e||c.trim(n.$control_input.val()||"");var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof t&&(t=!0),!n.canCreate(e))return r(),!1;n.lock();var i="function"==typeof n.settings.create?this.settings.create:function(u){var d={};return d[n.settings.labelField]=u,d[n.settings.valueField]=u,d},o=ve(function(u){if(n.unlock(),!u||"object"!=typeof u)return r();var d=q(u[n.settings.valueField]);if("string"!=typeof d)return r();n.setTextboxValue(""),n.addOption(u),n.setCaret(s),n.addItem(d),n.refreshOptions(t&&"single"!==n.settings.mode),r(u)}),l=i.apply(this,[e,o]);return typeof l<"u"&&o(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!c.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,s,r,i=this;if(e=e||{},1===i.tagType){for(s=[],t=0,n=i.items.length;t<n;t++)r=i.options[i.items[t]][i.settings.labelField]||"",s.push('<option value="'+j(i.items[t])+'" selected="selected">'+j(r)+"</option>");!s.length&&!this.$input.attr("multiple")&&s.push('<option value="" selected="selected"></option>'),i.$input.html(s.join(""))}else i.$input.val(i.getValue()),i.$input.attr("value",i.$input.val());i.isSetup&&(e.silent||i.trigger("change",i.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring||e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),s=this.buffer||this.$control[0];s.insertBefore(e[0],0===t?s.firstChild:s.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,n,s,r,i,o,l,u,d,f=this;if(s=e&&e.keyCode===V?-1:1,r=de(f.$control_input[0]),f.$activeOption&&!f.settings.hideSelected&&(l=f.getAdjacentOption(f.$activeOption,-1).attr("data-value")),i=[],f.$activeItems.length){for(d=f.$control.children(".active:"+(s>0?"last":"first")),o=f.$control.children(":not(input)").index(d),s>0&&o++,t=0,n=f.$activeItems.length;t<n;t++)i.push(c(f.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(f.isFocused||"single"===f.settings.mode)&&f.items.length&&(s<0&&0===r.start&&0===r.length?i.push(f.items[f.caretPos-1]):s>0&&r.start===f.$control_input.val().length&&i.push(f.items[f.caretPos]));if(!i.length||"function"==typeof f.settings.onDelete&&!1===f.settings.onDelete.apply(f,[i]))return!1;for(typeof o<"u"&&f.setCaret(o);i.length;)f.removeItem(i.pop());return f.showInput(),f.positionDropdown(),f.refreshOptions(!0),l&&(u=f.getOption(l)).length&&f.setActiveOption(u),!0},advanceSelection:function(e,t){var n,s,r,i,l,u=this;0!==e&&(u.rtl&&(e*=-1),n=e>0?"last":"first",s=de(u.$control_input[0]),u.isFocused&&!u.isInputHidden?(i=u.$control_input.val().length,(e<0?0===s.start&&0===s.length:s.start===i)&&!i&&u.advanceCaret(e,t)):(l=u.$control.children(".active:"+n)).length&&(r=u.$control.children(":not(input)").index(l),u.setActiveItem(null),u.setCaret(e>0?r+1:r)))},advanceCaret:function(e,t){var r,n=this;0!==e&&(n.isShiftDown?(r=n.$control_input[e>0?"next":"prev"]()).length&&(n.hideInput(),n.setActiveItem(r),t&&t.preventDefault()):n.setCaret(n.caretPos+e))},setCaret:function(e){var n,s,i,o,t=this;if(e="single"===t.settings.mode?t.items.length:Math.max(0,Math.min(t.items.length,e)),!t.isPending)for(n=0,s=(i=t.$control.children(":not(input)")).length;n<s;n++)o=c(i[n]).detach(),n<e?t.$control_input.before(o):t.$control.append(o);t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),0==--z.count&&z.$testInput&&(z.$testInput.remove(),z.$testInput=void 0),c(window).off(t),c(document).off(t),c(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var n,i="",o=!1,l=this;return("option"===e||"item"===e)&&(o=!!(n=q(t[l.settings.valueField]))),o&&(H(l.renderCache[e])||(l.renderCache[e]={}),l.renderCache[e].hasOwnProperty(n))?l.renderCache[e][n]:(i=c(l.settings.render[e].apply(this,[t,j])),"option"===e||"option_create"===e?t[l.settings.disabledField]||i.attr("data-selectable",""):"optgroup"===e&&(i.attr("data-group",t[l.settings.optgroupValueField]||""),t[l.settings.disabledField]&&i.attr("data-disabled","")),("option"===e||"item"===e)&&i.attr("data-value",n||""),o&&(l.renderCache[e][n]=i[0]),i[0])},clearCache:function(e){typeof e>"u"?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return e.length&&("function"!=typeof n||n.apply(t,[e]))&&("string"!=typeof n||new RegExp(n).test(e))&&(!(n instanceof RegExp)||n.test(e))}}),z.count=0,z.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},c.fn.selectize=function(e){var t=c.fn.selectize.defaults,n=c.extend({},t,e),s=n.dataAttr,r=n.labelField,i=n.valueField,o=n.disabledField,l=n.optgroupField,u=n.optgroupLabelField,d=n.optgroupValueField;return this.each(function(){if(!this.selectize){var M=c(this),T=this.tagName.toLowerCase(),Q=M.attr("placeholder")||M.attr("data-placeholder");!Q&&!n.allowEmptyOption&&(Q=M.children('option[value=""]').text());var L={placeholder:Q,options:[],optgroups:[],items:[]};"select"===T?function(b,M){var T,Q,L,g,_=M.options,ne={},le=function(U){var J=s&&U.attr(s);return"string"==typeof J&&J.length?JSON.parse(J):null},ce=function(U,J){U=c(U);var re=q(U.val());if(re||n.allowEmptyOption){if(ne.hasOwnProperty(re)){if(J){var se=ne[re][l];se?c.isArray(se)?se.push(J):ne[re][l]=[se,J]:ne[re][l]=J}return}var X=le(U)||{};X[r]=X[r]||U.text(),X[i]=X[i]||re,X[o]=X[o]||U.prop("disabled"),X[l]=X[l]||J,ne[re]=X,_.push(X),U.is(":selected")&&M.items.push(re)}},pe=function(U){var J,re,se,X,fe;for((se=(U=c(U)).attr("label"))&&((X=le(U)||{})[u]=se,X[d]=se,X[o]=U.prop("disabled"),M.optgroups.push(X)),J=0,re=(fe=c("option",U)).length;J<re;J++)ce(fe[J],se)};for(M.maxItems=b.attr("multiple")?null:1,T=0,Q=(g=b.children()).length;T<Q;T++)"optgroup"===(L=g[T].tagName.toLowerCase())?pe(g[T]):"option"===L&&ce(g[T])}(M,L):function(b,M){var T,Q,L,g,ae=b.attr(s);if(ae)for(M.options=JSON.parse(ae),T=0,Q=M.options.length;T<Q;T++)M.items.push(M.options[T][i]);else{var _=c.trim(b.val()||"");if(!n.allowEmptyOption&&!_.length)return;for(T=0,Q=(L=_.split(n.delimiter)).length;T<Q;T++)(g={})[r]=L[T],g[i]=L[T],M.options.push(g);M.items=L}}(M,L),new z(M,c.extend(!0,{},t,L,e))}})},c.fn.selectize.defaults=z.defaults,c.fn.selectize.support={validity:E},z.define("drag_drop",function(e){if(!c.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=(n=t.lock,function(){var s=t.$control.data("sortable");return s&&s.disable(),n.apply(t,arguments)}),t.unlock=function(){var n=t.unlock;return function(){var s=t.$control.data("sortable");return s&&s.enable(),n.apply(t,arguments)}}(),t.setup=function(){var n=t.setup;return function(){n.apply(this,arguments);var s=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(r,i){i.placeholder.css("width",i.helper.css("width")),s.css({overflow:"visible"})},stop:function(){s.css({overflow:"hidden"});var r=t.$activeItems?t.$activeItems.slice():null,i=[];s.children("[data-value]").each(function(){i.push(c(this).attr("data-value"))}),t.setValue(i),t.setActiveItem(r)}})}}()}var n}),z.define("dropdown_header",function(e){var n,t=this;e=c.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(n){return'<div class="'+n.headerClass+'"><div class="'+n.titleRowClass+'"><span class="'+n.labelClass+'">'+n.title+'</span><a href="javascript:void(0)" class="'+n.closeClass+'">&times;</a></div></div>'}},e),t.setup=(n=t.setup,function(){n.apply(t,arguments),t.$dropdown_header=c(e.html(e)),t.$dropdown.prepend(t.$dropdown_header)})}),z.define("optgroup_columns",function(e){var r,t=this;e=c.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(r,i){var o=r.closest("[data-group]").find("[data-selectable]"),l=o.index(r)+i;return l>=0&&l<o.length?o.eq(l):c()},this.onKeyDown=(r=t.onKeyDown,function(i){var o,l,u,d;return!this.isOpen||i.keyCode!==h&&i.keyCode!==y?r.apply(this,arguments):(t.ignoreHover=!0,o=(d=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((l=(u=(d=i.keyCode===h?d.prev("[data-group]"):d.next("[data-group]")).find("[data-selectable]")).eq(Math.min(u.length-1,o))).length&&this.setActiveOption(l)))});var n=function(){var r,i=n.width,o=document;return typeof i>"u"&&((r=o.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',o.body.appendChild(r=r.firstChild),i=n.width=r.offsetWidth-r.clientWidth,o.body.removeChild(r)),i},s=function(){var r,i,o,l,u,d,f;if((i=(f=c("[data-group]",t.$dropdown_content)).length)&&t.$dropdown_content.width()){if(e.equalizeHeight){for(o=0,r=0;r<i;r++)o=Math.max(o,f.eq(r).height());f.css({height:o})}e.equalizeWidth&&(d=t.$dropdown_content.innerWidth()-n(),l=Math.round(d/i),f.css({width:l}),i>1&&(u=d-l*(i-1),f.eq(i-1).css({width:u})))}};(e.equalizeHeight||e.equalizeWidth)&&(ue_after(this,"positionDropdown",s),ue_after(this,"refreshOptions",s))}),z.define("remove_button",function(e){e=c.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var s,r,u,i,o,l;"single"!==this.settings.mode?(i=s=this,o='<a href="javascript:void(0)" class="'+(r=e).className+'" tabindex="-1" title="'+j(r.title)+'">'+r.label+"</a>",l=function(u,d){var f=u.search(/(<\/[^>]+>\s*)$/);return u.substring(0,f)+d+u.substring(f)},s.setup=(u=i.setup,function(){if(r.append){var d=i.settings.render.item;i.settings.render.item=function(f){return l(d.apply(s,arguments),o)}}u.apply(s,arguments),s.$control.on("click","."+r.className,function(f){if(f.preventDefault(),!i.isLocked){var P=c(f.currentTarget).parent();i.setActiveItem(P),i.deleteSelection()&&i.setCaret(i.items.length)}})})):function(s,r){r.className="remove-single";var u,i=s,o='<a href="javascript:void(0)" class="'+r.className+'" tabindex="-1" title="'+j(r.title)+'">'+r.label+"</a>",l=function(u,d){return c("<span>").append(u).append(d)};s.setup=(u=i.setup,function(){if(r.append){var d=c(i.$input.context).attr("id"),P=(c("#"+d),i.settings.render.item);i.settings.render.item=function(b){return l(P.apply(s,arguments),o)}}u.apply(s,arguments),s.$control.on("click","."+r.className,function(b){b.preventDefault(),!i.isLocked&&i.clear()})})}(this,e)}),z.define("restore_on_backspace",function(e){var n;e.text=e.text||function(n){return n[this.settings.labelField]},this.onKeyDown=(n=this.onKeyDown,function(s){var r,i;return s.keyCode===V&&""===this.$control_input.val()&&!this.$activeItems.length&&(r=this.caretPos-1)>=0&&r<this.items.length?(i=this.options[this.items[r]],this.deleteSelection(s)&&(this.setTextboxValue(e.text.apply(this,[i])),this.refreshOptions(!0)),void s.preventDefault()):n.apply(this,arguments)})}),z},void 0!==(B=R.apply(te,ee))&&(oe.exports=B)},9655:function(oe,te,x){var R,ee;R=function(){var B=function(p,v){this.items=p,this.settings=v||{diacritics:!0}};B.prototype.tokenize=function(p){if(!(p=a(String(p||"").toLowerCase()))||!p.length)return[];var v,h,C,w,y=[],k=p.split(/ +/);for(v=0,h=k.length;v<h;v++){if(C=Z(k[v]),this.settings.diacritics)for(w in Y)Y.hasOwnProperty(w)&&(C=C.replace(new RegExp(w,"g"),Y[w]));y.push({string:k[v],regex:new RegExp(C,"i")})}return y},B.prototype.iterator=function(p,v){(S(p)?Array.prototype.forEach||function(C){for(var w=0,y=this.length;w<y;w++)C(this[w],w,this)}:function(C){for(var w in this)this.hasOwnProperty(w)&&C(this[w],w,this)}).apply(p,[v])},B.prototype.getScoreFunction=function(p,v){var C,w,y,k;p=this.prepareSearch(p,v),k=p.options.nesting;var I,G=function(I,F){var K,O;return I&&-1!==(O=(I=String(I||"")).search(F.regex))?(K=F.string.length/I.length,0===O&&(K+=.5),K):0},V=(I=(C=p.options.fields).length)?1===I?function(F,K){return G(m(K,C[0],k),F)}:function(F,K){for(var O=0,A=0;O<I;O++)A+=G(m(K,C[O],k),F);return A/I}:function(){return 0};return(y=(w=p.tokens).length)?1===y?function(I){return V(w[0],I)}:"and"===p.options.conjunction?function(I){for(var F,K=0,O=0;K<y;K++){if((F=V(w[K],I))<=0)return 0;O+=F}return O/y}:function(I){for(var F=0,K=0;F<y;F++)K+=V(w[F],I);return K/y}:function(){return 0}},B.prototype.getSortFunction=function(p,v){var h,C,w,y,k,G,V,I,F,K,O;if(p=(w=this).prepareSearch(p,v),F=function(A,W){return"$score"===A?W.score:m(w.items[W.id],A,v.nesting)},k=[],O=!p.query&&v.sort_empty||v.sort)for(h=0,C=O.length;h<C;h++)(p.query||"$score"!==O[h].field)&&k.push(O[h]);if(p.query){for(K=!0,h=0,C=k.length;h<C;h++)if("$score"===k[h].field){K=!1;break}K&&k.unshift({field:"$score",direction:"desc"})}else for(h=0,C=k.length;h<C;h++)if("$score"===k[h].field){k.splice(h,1);break}for(I=[],h=0,C=k.length;h<C;h++)I.push("desc"===k[h].direction?-1:1);return(G=k.length)?1===G?(y=k[0].field,V=I[0],function(A,W){return V*c(F(y,A),F(y,W))}):function(A,W){var D,E,j;for(D=0;D<G;D++)if(E=I[D]*c(F(j=k[D].field,A),F(j,W)))return E;return 0}:null},B.prototype.prepareSearch=function(p,v){if("object"==typeof p)return p;var h=(v=N({},v)).fields,C=v.sort,w=v.sort_empty;return h&&!S(h)&&(v.fields=[h]),C&&!S(C)&&(v.sort=[C]),w&&!S(w)&&(v.sort_empty=[w]),{options:v,query:String(p||"").toLowerCase(),tokens:this.tokenize(p),total:0,items:[]}},B.prototype.search=function(p,v){var w,y,G,V,h=this;return p=(y=this.prepareSearch(p,v)).query,V=(v=y.options).score||h.getScoreFunction(y),h.iterator(h.items,p.length?function(I,F){w=V(I),(!1===v.filter||w>0)&&y.items.push({score:w,id:F})}:function(I,F){y.items.push({score:1,id:F})}),(G=h.getSortFunction(y,v))&&y.items.sort(G),y.total=y.items.length,"number"==typeof v.limit&&(y.items=y.items.slice(0,v.limit)),y};var c=function(p,v){return"number"==typeof p&&"number"==typeof v?p>v?1:p<v?-1:0:(p=ie(String(p||"")))>(v=ie(String(v||"")))?1:v>p?-1:0},N=function(p,v){var h,C,w,y;for(h=1,C=arguments.length;h<C;h++)if(y=arguments[h])for(w in y)y.hasOwnProperty(w)&&(p[w]=y[w]);return p},m=function(p,v,h){if(p&&v){if(!h)return p[v];for(var C=v.split(".");C.length&&(p=p[C.shift()]););return p}},a=function(p){return(p+"").replace(/^\s+|\s+$|/g,"")},Z=function(p){return(p+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},S=Array.isArray||typeof $<"u"&&$.isArray||function(p){return"[object Array]"===Object.prototype.toString.call(p)},Y={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\u{10301}\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},ie=function(){var p,v,h,C,w="",y={};for(h in Y)if(Y.hasOwnProperty(h))for(w+=C=Y[h].substring(2,Y[h].length-1),p=0,v=C.length;p<v;p++)y[C.charAt(p)]=h;var k=new RegExp("["+w+"]","g");return function(G){return G.replace(k,function(V){return y[V]}).toLowerCase()}}();return B},void 0!==(ee=R.call(te,x,te,oe))&&(oe.exports=ee)}}]);