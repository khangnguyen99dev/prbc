"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4466],{507:(_,h,t)=>{t.d(h,{u:()=>p});var f=t(6895),g=t(2605),v=t(1571);let p=(()=>{const c=class{};let C=c;return c.\u0275fac=function(M){return new(M||c)},c.\u0275mod=v.oAB({type:c}),c.\u0275inj=v.cJS({imports:[f.ez,g.Bz]}),C})()},4466:(_,h,t)=>{t.r(h),t.d(h,{CreateModule:()=>F});var f=t(6895),g=t(2605),v=t(1822),p=t(2340),y=(t(8259),t(5937),t(5439)),e=t(1571),M=t(6690),x=t(6548),U=t(2013),d=t(433),z=t(12),Z=t(9602);function E(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",12)(1,"label",13),e._uU(2," Date Active "),e.TgZ(3,"span",14),e._uU(4,"\xa0*"),e.qZA()(),e.TgZ(5,"input",28),e.NdJ("click",function(){e.CHM(r);const n=e.MAs(7);return e.KtG(n.open())})("ngModelChange",function(n){e.CHM(r);const a=e.oxw();return e.KtG(a.form.date_active=n)}),e.qZA(),e._UZ(6,"mat-datepicker",29,30),e.TgZ(8,"div",31),e._uU(9," (Start date active) "),e.qZA()()}if(2&s){const r=e.MAs(7),i=e.oxw();e.xp6(5),e.Q6J("matDatepicker",r)("ngModel",i.form.date_active)}}function S(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.createRecurringOperationalCost())}),e._uU(1),e.qZA()}if(2&s){const r=e.oxw();e.Q6J("disabled",r.loading),e.xp6(1),e.hij(" ",r.loading?"Saving...":"Save Changes"," ")}}let J=(()=>{const o=class{constructor(i,n,a,u){this.router=i,this.headerService=n,this.permissionService=a,this.notificationService=u,this.errorMessages=[],this.successMessage="",this.form={name:"",code:"",description:"",entity_id:"",cost_amount_in_local_currency:"",active:0,date_active:y(new Date).format("YYYY-MM-DD")},this.loading=!1,this.headerService.setupHeader([{title:"Settings"},{title:"Recurring Operational Cost",link:"/settings/recurring-operational-cost"},{title:"New Recurring Operational Cost"}])}createRecurringOperationalCost(){this.errorMessages=[],this.successMessage="",this.loading=!0,1==this.form.active&&(this.form.date_active=y(this.form.date_active).format("YYYY-MM-DD"));const i=new FormData;i.append("name",this.form.name),i.append("code",this.form.code),i.append("description",this.form.description),i.append("entity_id",this.form.entity_id),i.append("cost_amount_in_local_currency",this.form.cost_amount_in_local_currency),i.append("active",this.form.active),i.append("date_active",this.form.date_active),v.Z.post(`${p.N.api_url}/settings/recurring-operational-costs`,i,{headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:`Bearer ${window.localStorage.getItem(p.N.api_token_identifier)}`}}).then(n=>{if(n.data.error)return this.errorMessages.push(n.data.error_message),window.scrollTo(0,0),this.loading=!1,void this.clearMessages();this.notificationService.fetchNotifications(),this.router.navigateByUrl("/settings/recurring-operational-cost/"+n.data.recurring_operational_cost.id+"?success_message=true")}).catch(n=>{console.error(n),422==n.response.status?Object.keys(n.response.data.errors).forEach(a=>{this.errorMessages.push(n.response.data.errors[a])}):this.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),this.loading=!1,this.clearMessages()})}clearMessages(){setTimeout(()=>{this.successMessage=""},3500)}ngAfterViewInit(){this.setupSelectize()}setupSelectize(){const i=this;$(function(){$("#entity_selectize").selectize()[0].selectize.destroy(),$("#entity_selectize").selectize({preload:!0,valueField:"id",searchField:"label",labelField:"label",load:(m,T)=>{$("#fetching_entity").show(),$.ajax({url:`${p.N.api_url}/settings/entities?search_selectize=${m}`,type:"GET",error:function(){T(),$("#fetching_entity").hide()},success:b=>{T(b?.entities?.data),$("#fetching_entity").hide()},headers:{Authorization:`Bearer ${window.localStorage.getItem(p.N.api_token_identifier)}`,"Content-Type":"application/json"}})},onChange:m=>{i.form.entity_id=m}}),$("#active_selectize").selectize({onChange:m=>{console.log(m),i.form.active=m}})})}};let s=o;return o.\u0275fac=function(n){return new(n||o)(e.Y36(g.F0),e.Y36(M.r),e.Y36(x.$),e.Y36(U.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create"]],decls:62,vars:8,consts:[[1,"container-fixed"],[1,"flex","flex-wrap","items-center","lg:items-end","justify-between","gap-5","pb-7.5"],[1,"flex","flex-col","justify-center","gap-2"],[1,"text-xl","font-medium","leading-none","text-gray-900"],[1,"flex","items-center","gap-2.5"],["routerLink","/settings/recurring-operational-cost",1,"btn","btn-sm","btn-light"],[3,"errorMessages","successMessage"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-auto"],[1,"card","pb-2.5"],["id","basic_settings",1,"card-header"],[1,"card-title"],[1,"card-body","grid","grid-cols-1","gap-4"],[1,"flex","items-center","flex-wrap","lg:flex-nowrap","gap-2.5"],[1,"form-label","max-w-56"],[1,"text-danger"],["id","fetching_entity",1,"pt-2","text-sm",2,"display","none"],["name","entity_selectize","id","entity_selectize",1,"w-full"],["value",""],["type","number","onkeypress","return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46","placeholder","Enter cost amount in local currency",1,"input",3,"ngModel","ngModelChange"],["name","active","id","active_selectize",1,"w-full"],["value","1"],["value","0"],["class","flex items-center flex-wrap lg:flex-nowrap gap-2.5",4,"ngIf"],["type","text","placeholder","Enter name",1,"input",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter code",1,"input",3,"ngModel","ngModelChange"],["rows","3","placeholder","Enter description",1,"textarea","text-2sm","text-gray-600","font-normal",3,"ngModel","ngModelChange"],[1,"flex","justify-end"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["name","date_active","placeholder","Select Date Active",1,"input",3,"matDatepicker","ngModel","click","ngModelChange"],["hidden",""],["date_active",""],[1,"text-gray-500","text-xs","whitespace-nowrap"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4," New Recurring Operational Cost "),e.qZA()(),e.TgZ(5,"div",4)(6,"a",5),e._uU(7," Back "),e.qZA()()(),e._UZ(8,"app-alert",6),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"h3",10),e._uU(13," Recurring Operational Cost Information "),e.qZA()(),e.TgZ(14,"div",11)(15,"div",12)(16,"label",13),e._uU(17," Entity "),e.TgZ(18,"span",14),e._uU(19,"\xa0*"),e.qZA()(),e.TgZ(20,"p",15),e._uU(21,"Fetching Entities..."),e.qZA(),e.TgZ(22,"select",16)(23,"option",17),e._uU(24,"Select Entity"),e.qZA()()(),e.TgZ(25,"div",12)(26,"label",13),e._uU(27," Cost Amount in Local Currency "),e.TgZ(28,"span",14),e._uU(29,"\xa0*"),e.qZA()(),e.TgZ(30,"input",18),e.NdJ("ngModelChange",function(l){return a.form.cost_amount_in_local_currency=l}),e.qZA()(),e.TgZ(31,"div",12)(32,"label",13),e._uU(33," Active "),e.TgZ(34,"span",14),e._uU(35,"\xa0*"),e.qZA()(),e.TgZ(36,"select",19)(37,"option",17),e._uU(38,"Select Active"),e.qZA(),e.TgZ(39,"option",20),e._uU(40,"Active"),e.qZA(),e.TgZ(41,"option",21),e._uU(42,"Inactive"),e.qZA()()(),e.YNc(43,E,10,2,"div",22),e.TgZ(44,"div",12)(45,"label",13),e._uU(46," Name "),e.TgZ(47,"span",14),e._uU(48,"\xa0*"),e.qZA()(),e.TgZ(49,"input",23),e.NdJ("ngModelChange",function(l){return a.form.name=l}),e.qZA()(),e.TgZ(50,"div",12)(51,"label",13),e._uU(52," Code "),e.TgZ(53,"span",14),e._uU(54,"\xa0*"),e.qZA()(),e.TgZ(55,"input",24),e.NdJ("ngModelChange",function(l){return a.form.code=l}),e.qZA()(),e.TgZ(56,"div",12)(57,"label",13),e._uU(58," Description "),e.qZA(),e.TgZ(59,"textarea",25),e.NdJ("ngModelChange",function(l){return a.form.description=l}),e.qZA()(),e.TgZ(60,"div",26),e.YNc(61,S,2,2,"button",27),e.qZA()()()()()),2&n&&(e.xp6(8),e.Q6J("errorMessages",a.errorMessages)("successMessage",a.successMessage),e.xp6(22),e.Q6J("ngModel",a.form.cost_amount_in_local_currency),e.xp6(13),e.Q6J("ngIf",1==a.form.active),e.xp6(6),e.Q6J("ngModel",a.form.name),e.xp6(6),e.Q6J("ngModel",a.form.code),e.xp6(4),e.Q6J("ngModel",a.form.description),e.xp6(2),e.Q6J("ngIf",a.permissionService.hasPermission("Settings - Can Create Recurring Operational Cost")))},dependencies:[f.O5,g.rH,d.YN,d.Kr,d.Fj,d.wV,d.JJ,d.On,z.w,Z.Mq,Z.hl]}),s})();var D=t(5730),N=t(507),w=t(4859),O=t(4144),A=t(3238),Y=t(9549);const B=[{path:"",component:J}];let F=(()=>{const o=class{};let s=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:A.Ad,useValue:"en-GB"}],imports:[f.ez,g.Bz.forChild(B),d.u5,D.n,N.u,w.ot,O.c,Z.FA,A.XK,Y.lN,g.Bz]}),s})()}}]);