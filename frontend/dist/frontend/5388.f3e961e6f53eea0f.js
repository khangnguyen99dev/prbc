"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5388],{12:(M,x,r)=>{r.d(x,{w:()=>b});var t=r(1571),u=r(6895);function h(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const g=l.$implicit;t.xp6(1),t.Oqu(g)}}function f(i,l){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3),t._uU(2," Error "),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,h,2,1,"p",5),t.qZA(),t._UZ(5,"div",6),t.qZA()),2&i){const g=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",g.errorMessages)}}function e(i,l){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const g=l.$implicit;t.xp6(1),t.Oqu(g)}}function p(i,l){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,e,2,1,"p",5),t.qZA()),2&i){const g=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",g.errorMessages)}}function T(i,l){if(1&i){const g=t.EpF();t.TgZ(0,"div",2)(1,"div",7),t.NdJ("click",function(){t.CHM(g);const m=t.oxw(2);return t.KtG(m.toggleErrors())}),t._uU(2),t.TgZ(3,"span"),t._uU(4,"(Click here to show)"),t.qZA()(),t.YNc(5,p,2,1,"div",8),t._UZ(6,"div",6),t.qZA()}if(2&i){const g=t.oxw(2);t.xp6(2),t.hij(" Sorry, system find ",g.errorMessages.length," errors. "),t.xp6(3),t.Q6J("ngIf",g.showErrors)}}function v(i,l){if(1&i&&(t.ynx(0),t.YNc(1,f,6,1,"div",1),t.YNc(2,T,7,2,"div",1),t.BQk()),2&i){const g=t.oxw();t.xp6(1),t.Q6J("ngIf",1===g.errorMessages.length),t.xp6(1),t.Q6J("ngIf",g.errorMessages.length>1)}}function _(i,l){if(1&i&&(t.TgZ(0,"div",2)(1,"div",9),t._uU(2," Success "),t.qZA(),t.TgZ(3,"div",10)(4,"p"),t._uU(5),t.qZA()(),t._UZ(6,"div",6),t.qZA()),2&i){const g=t.oxw();t.xp6(5),t.Oqu(g.successMessage)}}let b=(()=>{const l=class{constructor(){this.errorMessages=[],this.successMessage="",this.showErrors=!1}toggleErrors(){this.showErrors=!this.showErrors}};let i=l;return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-alert"]],inputs:{errorMessages:"errorMessages",successMessage:"successMessage"},decls:2,vars:2,consts:[[4,"ngIf"],["role","alert",4,"ngIf"],["role","alert"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-red-400","rounded-b","bg-red-100","px-4","py-3","text-red-700"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2","cursor-pointer",3,"click"],["class","border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700",4,"ngIf"],[1,"bg-green-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-green-400","rounded-b","bg-green-100","px-4","py-3","text-green-700"]],template:function(m,Z){1&m&&(t.YNc(0,v,3,2,"ng-container",0),t.YNc(1,_,7,1,"div",1)),2&m&&(t.Q6J("ngIf",Z.errorMessages.length>0),t.xp6(1),t.Q6J("ngIf",""!==Z.successMessage))},dependencies:[u.sg,u.O5]}),i})()},507:(M,x,r)=>{r.d(x,{u:()=>f});var t=r(6895),u=r(2605),h=r(1571);let f=(()=>{const p=class{};let e=p;return p.\u0275fac=function(_){return new(_||p)},p.\u0275mod=h.oAB({type:p}),p.\u0275inj=h.cJS({imports:[t.ez,u.Bz]}),e})()},5388:(M,x,r)=>{r.r(x),r.d(x,{NotificationModule:()=>$});var t=r(6895),u=r(2605),h=r(1822),f=r(2340),e=r(1571),p=r(6690),T=r(2013),v=r(12),_=r(4909);function b(n,o){1&n&&(e.TgZ(0,"div",22),e.O4$(),e.TgZ(1,"svg",23),e._UZ(2,"path",24),e.qZA(),e.kcU(),e.TgZ(3,"span",25),e._uU(4,"Check icon"),e.qZA()())}function i(n,o){1&n&&(e.TgZ(0,"div",26),e.O4$(),e.TgZ(1,"svg",23),e._UZ(2,"path",27),e.qZA(),e.kcU(),e.TgZ(3,"span",25),e._uU(4,"Error icon"),e.qZA()())}function l(n,o){1&n&&(e.TgZ(0,"div",28),e.O4$(),e.TgZ(1,"svg",23),e._UZ(2,"path",29),e.qZA(),e.kcU(),e.TgZ(3,"span",25),e._uU(4,"Warning icon"),e.qZA()())}function g(n,o){if(1&n&&(e.TgZ(0,"span",30),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const s=e.oxw().$implicit;e.xp6(1),e.hij(" (Created at ",e.xi3(2,1,s.created_at,"d/M/yyyy H:mm"),") ")}}function y(n,o){if(1&n&&(e.TgZ(0,"span",30),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const s=e.oxw().$implicit;e.xp6(1),e.AsE(" (Created at ",e.xi3(2,2,s.created_at,"d/M/yyyy H:mm"),") - (Read at ",e.xi3(3,5,s.read_at,"d/M/yyyy H:mm"),") ")}}function m(n,o){if(1&n){const s=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(s);const d=e.oxw().$implicit,c=e.oxw();return e.KtG(c.navigateTo(d))}),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"path",33),e.qZA()()}}function Z(n,o){if(1&n){const s=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(s);const d=e.oxw().$implicit,c=e.oxw();return e.KtG(c.markAsRead(d.id))}),e.TgZ(1,"span",25),e._uU(2,"Close"),e.qZA(),e.O4$(),e.TgZ(3,"svg",35),e._UZ(4,"path",36),e.qZA()()}}function N(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",14),e.YNc(2,b,5,0,"div",15),e.YNc(3,i,5,0,"div",16),e.YNc(4,l,5,0,"div",17),e.TgZ(5,"div",18),e._uU(6),e.YNc(7,g,3,4,"span",19),e.YNc(8,y,4,8,"span",19),e.qZA(),e.YNc(9,m,3,0,"div",20),e.YNc(10,Z,5,0,"button",21),e.qZA(),e.BQk()),2&n){const s=o.$implicit;e.xp6(1),e.MGl("id","toast-",s.data.type_icon,""),e.xp6(1),e.Q6J("ngIf","success"===s.data.type_icon),e.xp6(1),e.Q6J("ngIf","error"===s.data.type_icon),e.xp6(1),e.Q6J("ngIf","warning"===s.data.type_icon),e.xp6(2),e.hij(" ",s.data.message," "),e.xp6(1),e.Q6J("ngIf",!s.read_at),e.xp6(1),e.Q6J("ngIf",s.read_at),e.xp6(1),e.Q6J("ngIf",!s.read_at&&s.data.router_link),e.xp6(1),e.Q6J("ngIf",!s.read_at)}}function C(n,o){1&n&&(e.TgZ(0,"div",37),e._uU(1," No notifications found "),e.qZA())}function I(n,o){if(1&n){const s=e.EpF();e.TgZ(0,"app-pagination",38),e.NdJ("selectedPage",function(d){e.CHM(s);const c=e.oxw();return e.KtG(c.selectedPage(d))}),e.qZA()}if(2&n){const s=e.oxw();e.Q6J("perPage",s.perPage)("totalItems",s.totalItems)("currentPage",s.page)}}const A=function(){return["/notifications"]},U=function(){return{tab:"unread"}},E=function(){return{tab:"read"}};let P=(()=>{const o=class{constructor(a,d,c,w){this.route=a,this.router=d,this.headerService=c,this.notificationService=w,this.currentTab="unread",this.page=1,this.totalItems=0,this.perPage=10,this.notifications=[],this.loading=!1,this.errorMessages=[],this.successMessage="",this.headerService.setupHeader([{title:"Notifications"}])}ngOnInit(){this.route.queryParams.subscribe(a=>{this.currentTab=a.tab??"unread",this.getNotifications()})}getNotifications(){this.loading=!0,h.Z.get(`${f.N.api_url}/notifications`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.localStorage.getItem(f.N.api_token_identifier)}`},params:{page:this.page,per_page:this.perPage,tab:this.currentTab}}).then(a=>{if(a.data.error)return this.errorMessages.push(a.data.error_message),window.scrollTo(0,0),this.loading=!1,void this.clearMessages();this.notifications=a.data.notifications.data,this.totalItems=a.data.notifications.total,this.loading=!1}).catch(a=>{console.error(a),422==a.response.status?Object.keys(a.response.data.errors).forEach(d=>{this.errorMessages.push(a.response.data.errors[d])}):this.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),this.loading=!1,this.clearMessages()})}markAsRead(a,d=!0){h.Z.post(`${f.N.api_url}/notifications/mark-as-read`,{id:a},{headers:{Authorization:`Bearer ${window.localStorage.getItem(f.N.api_token_identifier)}`}}).then(c=>{if(c.data.error)return this.errorMessages.push(c.data.error_message),window.scrollTo(0,0),this.loading=!1,void this.clearMessages();d&&(this.successMessage=c.data.success_message,this.page=1,this.getNotifications(),window.scrollTo(0,0),setTimeout(()=>{this.successMessage="",this.loading=!1},3500)),this.notificationService.fetchNotifications()}).catch(c=>{console.error(c),422==c.response.status?Object.keys(c.response.data.errors).forEach(w=>{this.errorMessages.push(c.response.data.errors[w])}):this.errorMessages.push("Sorry, something went wrong. Please try again later."),window.scrollTo(0,0),this.loading=!1,this.clearMessages()})}clearMessages(){setTimeout(()=>{this.successMessage=""},3500)}selectedPage(a){this.page=a,this.getNotifications()}navigateTo(a){this.markAsRead(a.id,!1),this.router.navigate([a?.data?.router_link])}};let n=o;return o.\u0275fac=function(d){return new(d||o)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.r),e.Y36(T.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-notification"]],decls:19,vars:17,consts:[[1,"container-fixed"],[1,"flex","items-center","flex-wrap","md:flex-nowrap","lg:items-end","justify-between","border-b","border-b-gray-200","dark:border-b-coal-100","gap-3","lg:gap-6","mb-2"],[1,"grid"],[1,"scrollable-x-auto"],["data-menu","true",1,"menu","gap-3"],[1,"menu-item","border-b-2","border-b-transparent","menu-item-active:border-b-primary","menu-item-here:border-b-primary"],["tabindex","0",1,"menu-link","gap-1.5","pb-2","lg:pb-4","px-2",3,"routerLink","queryParams"],[1,"menu-title","text-nowrap","font-medium","text-sm","text-gray-700","menu-item-active:text-primary","menu-item-active:font-semibold","menu-item-here:text-primary","menu-item-here:font-semibold","menu-item-show:text-primary","menu-link-hover:text-primary"],[3,"errorMessages","successMessage"],[1,"mt-4"],[4,"ngFor","ngForOf"],["class","text-center text-gray-500 font-normal mt-4",4,"ngIf"],[1,"flex","items-center","justify-end","gap-4","order-1","md:order-2"],[3,"perPage","totalItems","currentPage","selectedPage",4,"ngIf"],["role","alert",1,"flex","items-center","w-full","p-4","mb-4","text-gray-500","bg-white","rounded-lg","shadow","dark:text-gray-400","dark:bg-gray-800",3,"id"],["class","inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200",4,"ngIf"],["class","inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200",4,"ngIf"],["class","inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-orange-500 bg-orange-100 rounded-lg dark:bg-orange-700 dark:text-orange-200",4,"ngIf"],[1,"ms-3","text-sm","font-normal","text-black"],["class","text-xs text-gray-500",4,"ngIf"],["style","cursor: pointer;",3,"click",4,"ngIf"],["type","button","class","ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","data-dismiss-target","#toast-success","aria-label","Close",3,"click",4,"ngIf"],[1,"inline-flex","items-center","justify-center","flex-shrink-0","w-8","h-8","text-green-500","bg-green-100","rounded-lg","dark:bg-green-800","dark:text-green-200"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"],[1,"sr-only"],[1,"inline-flex","items-center","justify-center","flex-shrink-0","w-8","h-8","text-red-500","bg-red-100","rounded-lg","dark:bg-red-800","dark:text-red-200"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"],[1,"inline-flex","items-center","justify-center","flex-shrink-0","w-8","h-8","text-orange-500","bg-orange-100","rounded-lg","dark:bg-orange-700","dark:text-orange-200"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 0 1-2 0V6a1 1 0 0 1 2 0v5Z"],[1,"text-xs","text-gray-500"],[2,"cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"],["type","button","data-dismiss-target","#toast-success","aria-label","Close",1,"ms-auto","-mx-1.5","-my-1.5","bg-white","text-gray-400","hover:text-gray-900","rounded-lg","focus:ring-2","focus:ring-gray-300","p-1.5","hover:bg-gray-100","inline-flex","items-center","justify-center","h-8","w-8","dark:text-gray-500","dark:hover:text-white","dark:bg-gray-800","dark:hover:bg-gray-700",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"text-center","text-gray-500","font-normal","mt-4"],[3,"perPage","totalItems","currentPage","selectedPage"]],template:function(d,c){1&d&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"span",7),e._uU(8," Unread "),e.qZA()()(),e.TgZ(9,"div",5)(10,"a",6)(11,"span",7),e._uU(12," Read "),e.qZA()()()()()()(),e._UZ(13,"app-alert",8),e.TgZ(14,"div",9),e.YNc(15,N,11,9,"ng-container",10),e.YNc(16,C,2,0,"div",11),e.qZA(),e.TgZ(17,"div",12),e.YNc(18,I,1,3,"app-pagination",13),e.qZA()()),2&d&&(e.xp6(5),e.ekj("active","unread"===c.currentTab),e.xp6(1),e.Q6J("routerLink",e.DdM(13,A))("queryParams",e.DdM(14,U)),e.xp6(3),e.ekj("active","read"===c.currentTab),e.xp6(1),e.Q6J("routerLink",e.DdM(15,A))("queryParams",e.DdM(16,E)),e.xp6(3),e.Q6J("errorMessages",c.errorMessages)("successMessage",c.successMessage),e.xp6(2),e.Q6J("ngForOf",c.notifications),e.xp6(1),e.Q6J("ngIf",0==c.notifications.length),e.xp6(2),e.Q6J("ngIf",!c.loading))},dependencies:[t.sg,t.O5,u.rH,v.w,_.Q,t.uU]}),n})();var O=r(433),J=r(5730),Q=r(507),j=r(4859),Y=r(4144),B=r(9602),k=r(3238),F=r(9549);const L=[{path:"",component:P}];let $=(()=>{const o=class{};let n=o;return o.\u0275fac=function(d){return new(d||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:k.Ad,useValue:"en-GB"}],imports:[t.ez,u.Bz.forChild(L),O.u5,J.n,Q.u,j.ot,Y.c,B.FA,k.XK,F.lN,u.Bz]}),n})()}}]);