(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5937],{5937:function(oe,ae,le){var V,Q,j;Q=[le(8259)],V=function(d){"use strict";var W=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(r){var s=0;if(3===r.nodeType){var o=r.data.search(i);if(o>=0&&r.data.length>0){var a=r.data.match(i),l=document.createElement("span");l.className="highlight";var u=r.splitText(o),h=(u.splitText(a[0].length),u.cloneNode(!0));l.appendChild(h),u.parentNode.replaceChild(l,u),s=1}}else if(1===r.nodeType&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&("highlight"!==r.className||"SPAN"!==r.tagName))for(var g=0;g<r.childNodes.length;++g)g+=n(r.childNodes[g]);return s};return e.each(function(){n(this)})}};d.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var N=function(){};N.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){const t=this._events=this._events||{};if(e in t)for(var i=0;i<t[e].length;i++)t[e][i].apply(this,Array.prototype.slice.call(arguments,1))}},N.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=N.prototype[t[i]]};var U_mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(t){var i,n,r,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},ue.isArray(t))for(i=0,n=t.length;i<n;i++)"string"==typeof t[i]?o.push(t[i]):(s.plugins.settings[t[i].name]=t[i].options,o.push(t[i].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(s.plugins.settings[r]=t[r],o.push(r));for(;o.length;)s.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(t){var i=this,n=i.plugins;if(!i.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');i.loadPlugin(t)}return n.loaded[t]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}},ue={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},D=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};D.prototype.tokenize=function(e,t){if(!(e=pe(String(e||"").toLowerCase()))||!e.length)return[];var i,n,r,s,o=[],a=e.split(/ +/);for(i=0,n=a.length;i<n;i++){if(r=de(a[i]),this.settings.diacritics)for(s in T)T.hasOwnProperty(s)&&(r=r.replace(new RegExp(s,"g"),T[s]));t&&(r="\\b"+r),o.push({string:a[i],regex:new RegExp(r,"i")})}return o},D.prototype.iterator=function(e,t){(K(e)?Array.prototype.forEach||function(n){for(var r=0,s=this.length;r<s;r++)n(this[r],r,this)}:function(n){for(var r in this)this.hasOwnProperty(r)&&n(this[r],r,this)}).apply(e,[t])},D.prototype.getScoreFunction=function(e,t){var n,r,s,o;e=this.prepareSearch(e,t),o=e.options.nesting;var u,a=function(u,c){var h,g;return u&&-1!==(g=(u=String(u||"")).search(c.regex))?(h=c.string.length/u.length,0===g&&(h+=.5),h):0},l=(u=(n=e.options.fields).length)?1===u?function(c,h){return a(R(h,n[0],o),c)}:function(c,h){for(var g=0,f=0;g<u;g++)f+=a(R(h,n[g],o),c);return f/u}:function(){return 0};return(s=(r=e.tokens).length)?1===s?function(u){return l(r[0],u)}:"and"===e.options.conjunction?function(u){for(var c,h=0,g=0;h<s;h++){if((c=l(r[h],u))<=0)return 0;g+=c}return g/s}:function(u){for(var c=0,h=0;c<s;c++)h+=l(r[c],u);return h/s}:function(){return 0}},D.prototype.getSortFunction=function(e,t){var i,n,r,s,o,a,l,u,c,h,g;if(e=(r=this).prepareSearch(e,t),c=function(f,v){return"$score"===f?v.score:R(r.items[v.id],f,t.nesting)},o=[],g=!e.query&&t.sort_empty||t.sort)for(i=0,n=g.length;i<n;i++)(e.query||"$score"!==g[i].field)&&o.push(g[i]);if(e.query){for(h=!0,i=0,n=o.length;i<n;i++)if("$score"===o[i].field){h=!1;break}h&&o.unshift({field:"$score",direction:"desc"})}else for(i=0,n=o.length;i<n;i++)if("$score"===o[i].field){o.splice(i,1);break}for(u=[],i=0,n=o.length;i<n;i++)u.push("desc"===o[i].direction?-1:1);return(a=o.length)?1===a?(s=o[0].field,l=u[0],function(f,v){return l*J(c(s,f),c(s,v))}):function(f,v){var w,O,_;for(w=0;w<a;w++)if(O=u[w]*J(c(_=o[w].field,f),c(_,v)))return O;return 0}:null},D.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var i=(t=ce({},t)).fields,n=t.sort,r=t.sort_empty;return i&&!K(i)&&(t.fields=[i]),n&&!K(n)&&(t.sort=[n]),r&&!K(r)&&(t.sort_empty=[r]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e,t.respect_word_boundaries),total:0,items:[]}},D.prototype.search=function(e,t){var r,s,a,l,i=this;return e=(s=this.prepareSearch(e,t)).query,l=(t=s.options).score||i.getScoreFunction(s),i.iterator(i.items,e.length?function(u,c){r=l(u),(!1===t.filter||r>0)&&s.items.push({score:r,id:c})}:function(u,c){s.items.push({score:1,id:c})}),(a=i.getSortFunction(s,t))&&s.items.sort(a),s.total=s.items.length,"number"==typeof t.limit&&(s.items=s.items.slice(0,t.limit)),s};var J=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=X(String(e||"")))>(t=X(String(t||"")))?1:t>e?-1:0},ce=function(e,t){var i,n,r,s;for(i=1,n=arguments.length;i<n;i++)if(s=arguments[i])for(r in s)s.hasOwnProperty(r)&&(e[r]=s[r]);return e},R=function(e,t,i){if(e&&t){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},pe=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},de=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},K=Array.isArray||typeof d<"u"&&d.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},T={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\u{10301}\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},X=function(){var e,t,i,n,r="",s={};for(i in T)if(T.hasOwnProperty(i))for(r+=n=T[i].substring(2,T[i].length-1),e=0,t=n.length;e<t;e++)s[n.charAt(e)]=i;var o=new RegExp("["+r+"]","g");return function(a){return a.replace(o,function(l){return s[l]}).toLowerCase()}}();function Z(e,t){return navigator.userAgentData?e===navigator.userAgentData.platform:t.test(navigator.userAgent)}var k=Z("macOS",/Mac/),M=37,ee=39,P=8,_e=k?91:17,be=k?18:17,ie=!Z("Android",/android/i)&&!!document.createElement("input").validity,ne=function(e){return typeof e<"u"},F=function(e){return typeof e>"u"||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},z=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},L_after=function(e,t,i){var n=e[t];e[t]=function(){var r=n.apply(e,arguments);return i.apply(e,arguments),r}},$e=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},xe=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},re=function(e,t,i){var n,r=e.trigger,s={};for(n in e.trigger=function(){var o=arguments[0];if(-1===t.indexOf(o))return r.apply(e,arguments);s[o]=arguments},i.apply(e,[]),e.trigger=r,s)s.hasOwnProperty(n)&&r.apply(e,s[n])},Y=function(e){var t={};if(void 0===e)return console.warn("WARN getInputSelection cannot locate input control"),t;if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},se=function(e,t){return e?(m.$testInput||(m.$testInput=d("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),d("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).append(m.$testInput).appendTo("body")),m.$testInput.text(e),function(e,t,i){var n,r,s={};if(i)for(n=0,r=i.length;n<r;n++)s[i[n]]=e.css(i[n]);else s=e.css();t.css(s)}(t,m.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),m.$testInput.width()):0},Ae=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},m=function(e,t){var n,r,s,o,a=this;(o=e[0]).selectize=a;var l=window.getComputedStyle&&window.getComputedStyle(o,null);if(s=(s=l?l.getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",d.extend(a,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===o.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++m.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",lastOpenTarget:!1,caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?a.onSearchChange:xe(a.onSearchChange,t.loadThrottle)}),a.sifter=new D(this.options,{diacritics:t.diacritics}),a.settings.options){for(n=0,r=a.settings.options.length;n<r;n++)a.registerOption(a.settings.options[n]);delete a.settings.options}if(a.settings.optgroups){for(n=0,r=a.settings.optgroups.length;n<r;n++)a.registerOptionGroup(a.settings.optgroups[n]);delete a.settings.optgroups}a.settings.mode=a.settings.mode||(1===a.settings.maxItems?"single":"multi"),"boolean"!=typeof a.settings.hideSelected&&(a.settings.hideSelected="multi"===a.settings.mode),a.initializePlugins(a.settings.plugins),a.setupCallbacks(),a.setupTemplates(),a.setup()};return N.mixin(m),U_mixin(m),d.extend(m.prototype,{setup:function(){var o,a,l,u,c,h,g,w,O,p,e=this,t=e.settings,i=e.eventNS,n=d(window),r=d(document),s=e.$input;if(g=e.settings.mode,w=s.attr("class")||"",o=d("<div>").addClass(t.wrapperClass).addClass(w+" selectize-control").addClass(g),a=d("<div>").addClass(t.inputClass+" selectize-input items").appendTo(o),l=d('<input type="select-one" autocomplete="new-password" autofill="no" />').appendTo(a).attr("tabindex",s.is(":disabled")?"-1":e.tabIndex),h=d(t.dropdownParent||o),u=d("<div>").addClass(t.dropdownClass).addClass(g+" selectize-dropdown").hide().appendTo(h),c=d("<div>").addClass(t.dropdownContentClass+" selectize-dropdown-content").attr("tabindex","-1").appendTo(u),(p=s.attr("id"))&&(l.attr("id",p+"-selectized"),d("label[for='"+p+"']").attr("for",p+"-selectized")),e.settings.copyClassesToDropdown&&u.addClass(w),o.css({width:s[0].style.width}),e.plugins.names.length&&(O="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(O),u.addClass(O)),(null===t.maxItems||t.maxItems>1)&&1===e.tagType&&s.attr("multiple","multiple"),e.settings.placeholder&&l.attr("placeholder",t.placeholder),e.settings.search||(l.attr("readonly",!0),l.attr("inputmode","none"),a.css("cursor","pointer")),!e.settings.splitOn&&e.settings.delimiter){var A=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+A+"+\\s*")}s.attr("autocorrect")&&l.attr("autocorrect",s.attr("autocorrect")),s.attr("autocapitalize")&&l.attr("autocapitalize",s.attr("autocapitalize")),s.is("input")&&(l[0].type=s[0].type),e.$wrapper=o,e.$control=a,e.$control_input=l,e.$dropdown=u,e.$dropdown_content=c,u.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(y){y.stopImmediatePropagation()}),u.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),u.on("mouseup click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),function(e,t,i,n){e.on(t,i,function(r){for(var s=r.target;s&&s.parentNode!==e[0];)s=s.parentNode;return r.currentTarget=s,n.apply(this,[r])})}(a,"mouseup","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),function(e){var t=null,i=function(n,r){var s,o,a,l,u,c,h,g,f;r=r||{},!(n=n||window.event||{}).metaKey&&!n.altKey&&(!r.force&&!1===e.data("grow")||(s=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(a=(o=n.keyCode)>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||32===o,46===o||o===P?(f=Y(e[0])).length?s=s.substring(0,f.start)+s.substring(f.start+f.length):o===P&&f.start?s=s.substring(0,f.start-1)+s.substring(f.start+1):46===o&&typeof f.start<"u"&&(s=s.substring(0,f.start)+s.substring(f.start+1)):a&&(h=n.shiftKey,g=String.fromCharCode(n.keyCode),s+=g=h?g.toUpperCase():g.toLowerCase())),c=(u=e.attr("placeholder"))?se(u,e)+4:0,(l=Math.max(se(s,e),c)+4)!==t&&(t=l,e.width(l),e.triggerHandler("resize"))))};e.on("keydown keyup update blur",i),i()}(l),a.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),l.on({mousedown:function(y){(""!==e.$control_input.val()||e.settings.openOnFocus)&&y.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},input:function(){return e.onInput.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),r.on("keydown"+i,function(y){e.isCmdDown=y[k?"metaKey":"ctrlKey"],e.isCtrlDown=y[k?"altKey":"ctrlKey"],e.isShiftDown=y.shiftKey}),r.on("keyup"+i,function(y){y.keyCode===be&&(e.isCtrlDown=!1),16===y.keyCode&&(e.isShiftDown=!1),y.keyCode===_e&&(e.isCmdDown=!1)}),r.on("mousedown"+i,function(y){if(e.isFocused){if(y.target===e.$dropdown[0]||y.target.parentNode===e.$dropdown[0])return!1;!e.$dropdown.has(y.target).length&&y.target!==e.$control[0]&&e.blur(y.target)}}),n.on(["scroll"+i,"resize"+i].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),n.on("mousemove"+i,function(){e.ignoreHover=e.settings.ignoreHover});var _=d("<div></div>"),x=s.children().detach();s.replaceWith(_),_.replaceWith(s),this.revertSettings={$children:x,tabindex:s.attr("tabindex")},s.attr("tabindex",-1).hide().after(e.$wrapper),Array.isArray(t.items)&&(e.lastValidValue=t.items,e.setValue(t.items),delete t.items),ie&&s.on("invalid"+i,function(y){y.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,s.is(":disabled")&&e.disable(),e.on("change",this.onChange),s.data("selectize",e),s.addClass("selectized"),e.trigger("initialize"),!0===t.preload&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,i=e.settings.valueField,n=e.settings.optgroupLabelField;e.settings.render=d.extend({},{optgroup:function(s){return'<div class="optgroup">'+s.html+"</div>"},optgroup_header:function(s,o){return'<div class="optgroup-header">'+o(s[n])+"</div>"},option:function(s,o){var a=s.classes?" "+s.classes:"";return"<div"+(s.styles?' style="'+s.styles+'"':"")+' class="option'+(a+=""===s[i]?" selectize-dropdown-emptyoptionlabel":"")+'">'+o(s[t])+"</div>"},item:function(s,o){return'<div class="item">'+o(s[t])+"</div>"},option_create:function(s,o){return'<div class="create">Add <strong>'+o(s.input)+"</strong>&#x2026;</div>"}},e.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]])&&this.on(e,t)},onClick:function(e){var t=this;t.isDropdownClosing||(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented();if(d(e.target),t.isFocused||i||window.setTimeout(function(){t.focus()},0),e.target!==t.$control_input[0]||""===t.$control_input.val())return"single"===t.settings.mode?t.isOpen?t.close():t.open():(i||t.setActiveItem(null),t.settings.openOnFocus||(t.isOpen&&e.target===t.lastOpenTarget?(t.close(),t.lastOpenTarget=!1):(t.isOpen||(t.refreshOptions(),t.open()),t.lastOpenTarget=e.target))),!1},onChange:function(){var e=this;""!==e.getValue()&&(e.lastValidValue=e.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?e.preventDefault():t.settings.splitOn&&setTimeout(function(){var i=t.$control_input.val();if(i.match(t.settings.splitOn))for(var n=i.trim().split(t.settings.splitOn),r=0,s=n.length;r<s;r++)t.createItem(n[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var i=this;if(i.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(i.isCmdDown)return void i.selectAll();break;case 27:return void(i.isOpen&&(e.preventDefault(),e.stopPropagation(),i.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!i.isOpen&&i.hasOptions)i.open();else if(i.$activeOption){i.ignoreHover=!0;var n=i.getAdjacentOption(i.$activeOption,1);n.length&&i.setActiveOption(n,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(i.$activeOption){i.ignoreHover=!0;var r=i.getAdjacentOption(i.$activeOption,-1);r.length&&i.setActiveOption(r,!0,!0)}return void e.preventDefault();case 13:return void(i.isOpen&&i.$activeOption&&(i.onOptionSelect({currentTarget:i.$activeOption}),e.preventDefault()));case M:return void i.advanceSelection(-1,e);case ee:return void i.advanceSelection(1,e);case 9:return i.settings.selectOnTab&&i.isOpen&&i.$activeOption&&(i.onOptionSelect({currentTarget:i.$activeOption}),i.isFull()||e.preventDefault()),void(i.settings.create&&i.createItem()&&i.settings.showAddOptionOnCreate&&e.preventDefault());case P:case 46:return void i.deleteSelection(e)}!i.isFull()&&!i.isInputHidden||(k?e.metaKey:e.ctrlKey)||e.preventDefault()}},onInput:function(e){var t=this,i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,r=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(i=d(e.currentTarget)).hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):typeof(t=i.attr("data-value"))<"u"&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(t),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(t)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(n){t.loading=Math.max(t.loading-1,0),n&&n.length&&(t.addOption(n),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",n)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){(Array.isArray(e)?e:[e]).join("")!==this.items.join("")&&re(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setMaxItems:function(e){0===e&&(e=null),this.settings.maxItems=e,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function(e,t){var n,r,s,o,a,l,u,c,i=this;if("single"!==i.settings.mode){if(!(e=d(e)).length)return d(i.$activeItems).removeClass("active"),i.$activeItems=[],void(i.isFocused&&i.showInput());if("mousedown"===(n=t&&t.type.toLowerCase())&&i.isShiftDown&&i.$activeItems.length){for(c=i.$control.children(".active:last"),(o=Array.prototype.indexOf.apply(i.$control[0].childNodes,[c[0]]))>(a=Array.prototype.indexOf.apply(i.$control[0].childNodes,[e[0]]))&&(u=o,o=a,a=u),r=o;r<=a;r++)-1===i.$activeItems.indexOf(l=i.$control[0].childNodes[r])&&(d(l).addClass("active"),i.$activeItems.push(l));t.preventDefault()}else"mousedown"===n&&i.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(s=i.$activeItems.indexOf(e[0]),i.$activeItems.splice(s,1),e.removeClass("active")):i.$activeItems.push(e.addClass("active")[0]):(d(i.$activeItems).removeClass("active"),i.$activeItems=[e.addClass("active")[0]]);i.hideInput(),this.isFocused||i.focus()}},setActiveOption:function(e,t,i){var n,r,s,o,a,l=this;l.$activeOption&&(l.$activeOption.removeClass("active"),l.trigger("dropdown_item_deactivate",l.$activeOption.attr("data-value"))),l.$activeOption=null,(e=d(e)).length&&(l.$activeOption=e.addClass("active"),l.isOpen&&l.trigger("dropdown_item_activate",l.$activeOption.attr("data-value")),(t||!ne(t))&&(n=l.$dropdown_content.height(),r=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,o=s=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t,a=s-n+r,s+r>n+t?l.$dropdown_content.stop().animate({scrollTop:a},i?l.settings.scrollDuration:0):s<t&&l.$dropdown_content.stop().animate({scrollTop:o},i?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:0}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;return e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0)),e},blur:function(e){return this.$control_input[0].blur(),this.onBlur(null,e),this},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting,filter:e.filter,respect_word_boundaries:e.respect_word_boundaries}},search:function(e){var t,r,s,o=this,a=o.settings,l=this.getSearchOptions();if(a.score&&"function"!=typeof(s=o.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(a.normalize&&(e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),o.lastQuery=e,r=o.sifter.search(e,d.extend(l,{score:s})),o.currentResults=r):r=d.extend(!0,{},o.currentResults),a.hideSelected)for(t=r.items.length-1;t>=0;t--)-1!==o.items.indexOf(F(r.items[t].id))&&r.items.splice(t,1);return r},refreshOptions:function(e){var t,i,n,r,s,o,a,l,u,c,h,g,f,v,w,O;typeof e>"u"&&(e=!0);var p=this,A=p.$control_input.val().trim(),_=p.search(A),x=p.$dropdown_content,y=p.$activeOption&&F(p.$activeOption.attr("data-value"));for(r=_.items.length,"number"==typeof p.settings.maxOptions&&(r=Math.min(r,p.settings.maxOptions)),s={},o=[],t=0;t<r;t++)for(l=p.render("option",a=p.options[_.items[t].id]),u=a[p.settings.optgroupField]||"",i=0,n=(c=Array.isArray(u)?u:[u])&&c.length;i<n;i++){var E;p.optgroups.hasOwnProperty(u=c[i])||"function"!=typeof p.settings.optionGroupRegister||(E=p.settings.optionGroupRegister.apply(p,[u]))&&p.registerOptionGroup(E),p.optgroups.hasOwnProperty(u)||(u=""),s.hasOwnProperty(u)||(s[u]=document.createDocumentFragment(),o.push(u)),s[u].appendChild(l)}for(this.settings.lockOptgroupOrder&&o.sort(function(B,b){return(p.optgroups[B]&&p.optgroups[B].$order||0)-(p.optgroups[b]&&p.optgroups[b].$order||0)}),h=document.createDocumentFragment(),t=0,r=o.length;t<r;t++)p.optgroups.hasOwnProperty(u=o[t])&&s[u].childNodes.length?((g=document.createDocumentFragment()).appendChild(p.render("optgroup_header",p.optgroups[u])),g.appendChild(s[u]),h.appendChild(p.render("optgroup",d.extend({},p.optgroups[u],{html:Ae(g),dom:g})))):h.appendChild(s[u]);if(x.html(h),p.settings.highlight&&(x.removeHighlight(),_.query.length&&_.tokens.length))for(t=0,r=_.tokens.length;t<r;t++)W(x,_.tokens[t].regex);if(!p.settings.hideSelected)for(p.$dropdown.find(".selected").removeClass("selected"),t=0,r=p.items.length;t<r;t++)p.getOption(p.items[t]).addClass("selected");"auto"!==p.settings.dropdownSize.sizeType&&p.isOpen&&p.setupDropdownHeight(),(f=p.canCreate(A))&&p.settings.showAddOptionOnCreate&&(x.prepend(p.render("option_create",{input:A})),O=d(x[0].childNodes[0])),p.hasOptions=_.items.length>0||f&&p.settings.showAddOptionOnCreate||p.settings.setFirstOptionActive,p.hasOptions?(_.items.length>0?(w=y&&p.getOption(y),""!==_.query&&p.settings.setFirstOptionActive?v=x.find("[data-selectable]:first"):""!==_.query&&w&&w.length?v=w:"single"===p.settings.mode&&p.items.length&&(v=p.getOption(p.items[0])),(!v||!v.length)&&(v=O&&!p.settings.addPrecedence?p.getAdjacentOption(O,1):x.find("[data-selectable]:first"))):v=O,p.setActiveOption(v),e&&!p.isOpen&&p.open()):(p.setActiveOption(null),e&&p.isOpen&&p.close())},addOption:function(e){var t,i,n,r=this;if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)r.addOption(e[t]);else(n=r.registerOption(e))&&(r.userOptions[n]=!0,r.lastQuery=null,r.trigger("option_add",n,e))},registerOption:function(e){var t=F(e[this.settings.valueField]);return!(typeof t>"u"||null===t||this.options.hasOwnProperty(t))&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=F(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var n,r,s,o,a,l,u,i=this;if(e=F(e),s=F(t[i.settings.valueField]),null!==e&&i.options.hasOwnProperty(e)){if("string"!=typeof s)throw new Error("Value must be set in option data");u=i.options[e].$order,s!==e&&(delete i.options[e],-1!==(o=i.items.indexOf(e))&&i.items.splice(o,1,s)),t.$order=t.$order||u,i.options[s]=t,l=i.renderCache.option,(a=i.renderCache.item)&&(delete a[e],delete a[s]),l&&(delete l[e],delete l[s]),-1!==i.items.indexOf(s)&&(n=i.getItem(e),r=d(i.render("item",t)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),i.lastQuery=null,i.isOpen&&i.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=F(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var i=t.options;d.each(t.options,function(n,r){-1==t.items.indexOf(n)&&delete i[n]}),t.options=t.sifter.items=i,t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return e.length>0?e.eq(0):d()},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),n=i.index(e)+t;return n>=0&&n<i.length?i.eq(n):d()},getElementWithValue:function(e,t){if(typeof(e=F(e))<"u"&&null!==e)for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-value")===e)return d(t[i]);return d()},getElementWithTextContent:function(e,t,i){if(typeof(e=F(e))<"u"&&null!==e)for(var n=0,r=i.length;n<r;n++){var s=i[n].textContent;if(1==t&&(s=null!==s?s.toLowerCase():null,e=e.toLowerCase()),s===e)return d(i[n])}return d()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},getFirstItemMatchedByTextContent:function(e,t){return this.getElementWithTextContent(e,t=null!==t&&!0===t,this.$dropdown_content.find("[data-selectable]"))},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var i=this.$control[0].childNodes,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var r=Array.isArray(e)?e:[e],s=(n=0,r.length);n<s;n++)this.isPending=n<s-1,this.addItem(r[n],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){re(this,t?[]:["change"],function(){var n,r,s,c,h,o=this,a=o.settings.mode;e=F(e),-1===o.items.indexOf(e)?o.options.hasOwnProperty(e)&&("single"===a&&o.clear(t),("multi"!==a||!o.isFull())&&(n=d(o.render("item",o.options[e])),h=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(n),(!o.isPending||!h&&o.isFull())&&o.refreshState(),o.isSetup&&(s=o.$dropdown_content.find("[data-selectable]"),o.isPending||(r=o.getOption(e),c=o.getAdjacentOption(r,1).attr("data-value"),o.refreshOptions(o.isFocused&&"single"!==a),c&&o.setActiveOption(o.getOption(c))),!s.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,n),o.isPending||o.updateOriginalInput({silent:t})))):"single"===a&&o.close()})},removeItem:function(e,t){var n,r,s,i=this;n=e instanceof d?e:i.getItem(e),e=F(n.attr("data-value")),-1!==(r=i.items.indexOf(e))&&(i.trigger("item_before_remove",e,n),n.remove(),n.hasClass("active")&&(n.removeClass("active"),s=i.$activeItems.indexOf(n[0]),i.$activeItems.splice(s,1),n.removeClass("active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(e)&&i.removeOption(e,t),r<i.caretPos&&i.setCaret(i.caretPos-1),i.refreshState(),i.updatePlaceholder(),i.updateOriginalInput({silent:t}),i.positionDropdown(),i.trigger("item_remove",e,n))},createItem:function(e,t){var i=this,n=i.caretPos;e=e||(i.$control_input.val()||"").trim();var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof t&&(t=!0),!i.canCreate(e))return r(),!1;i.lock();var s="function"==typeof i.settings.create?this.settings.create:function(l){var u={};u[i.settings.labelField]=l;var c=l;if(i.settings.formatValueToKey&&"function"==typeof i.settings.formatValueToKey&&(null===(c=i.settings.formatValueToKey.apply(this,[c]))||typeof c>"u"||"object"==typeof c||"function"==typeof c))throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.');return u[i.settings.valueField]=c,u},o=$e(function(l){if(i.unlock(),!l||"object"!=typeof l)return r();var u=F(l[i.settings.valueField]);if("string"!=typeof u)return r();i.setTextboxValue(""),i.addOption(l),i.setCaret(n),i.addItem(u),i.refreshOptions(t&&"single"!==i.settings.mode),r(l)}),a=s.apply(this,[e,o]);return typeof a<"u"&&o(a),!0},refreshItems:function(e){this.lastQuery=null,this.isSetup&&this.addItem(this.items,e),this.refreshState(),this.updateOriginalInput({silent:e})},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!d.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var n,r,s,o,a,u,c=this;e=e||{},1===c.tagType?(o=c.$input.find("option"),n=[],r=[],s=[],u=[],o.get().forEach(function(h){n.push(h.value)}),c.items.forEach(function(h){a=c.options[h][c.settings.labelField]||"",u.push(h),-1==n.indexOf(h)&&r.push('<option value="'+z(h)+'" selected="selected">'+z(a)+"</option>")}),s=n.filter(function(h){return u.indexOf(h)<0}).map(function(h){return'option[value="'+h+'"]'}),n.length-s.length+r.length===0&&!c.$input.attr("multiple")&&r.push('<option value="" selected="selected"></option>'),c.$input.find(s.join(", ")).remove(),c.$input.append(r.join(""))):(c.$input.val(c.getValue()),c.$input.attr("value",c.$input.val())),c.isSetup&&(e.silent||c.trigger("change",c.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.setupDropdownHeight(),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring&&e.$control_input[0].blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0);var i=e[0].getBoundingClientRect().width;this.settings.minWidth&&this.settings.minWidth>i&&(i=this.settings.minWidth),this.$dropdown.css({width:i,top:t.top,left:t.left})},setupDropdownHeight:function(){if("object"==typeof this.settings.dropdownSize&&"auto"!==this.settings.dropdownSize.sizeType){var e=this.settings.dropdownSize.sizeValue;if("numberItems"===this.settings.dropdownSize.sizeType){for(var t=this.$dropdown_content.find("*").not(".optgroup, .highlight").not(this.settings.ignoreOnDropwdownHeight),i=0,n=0,r=0,s=0,o=0;o<e;o++){var a=d(t[o]);if(0===a.length)break;if(i+=a.outerHeight(!0),typeof a.data("selectable")>"u"){if(a.hasClass("optgroup-header")){var l=window.getComputedStyle(a.parent()[0],":before");l&&(n=l.marginTop?Number(l.marginTop.replace(/\W*(\w)\w*/g,"$1")):0,r=l.marginBottom?Number(l.marginBottom.replace(/\W*(\w)\w*/g,"$1")):0,s=l.borderTopWidth?Number(l.borderTopWidth.replace(/\W*(\w)\w*/g,"$1")):0)}e++}}e=i+(this.$dropdown_content.css("padding-top")?Number(this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1")):0)+(this.$dropdown_content.css("padding-bottom")?Number(this.$dropdown_content.css("padding-bottom").replace(/\W*(\w)\w*/g,"$1")):0)+n+r+s+"px"}else if("fixedHeight"!==this.settings.dropdownSize.sizeType)return void console.warn('Selectize.js - Value of "sizeType" must be "fixedHeight" or "numberItems');this.$dropdown_content.css({height:e,maxHeight:"none"})}},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),n=this.buffer||this.$control[0];n.insertBefore(e[0],0===t?n.firstChild:n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,i,n,r,s,o,a,l,u,c=this;if(n=e&&e.keyCode===P?-1:1,r=Y(c.$control_input[0]),c.$activeOption&&!c.settings.hideSelected&&(a="string"==typeof c.settings.deselectBehavior&&"top"===c.settings.deselectBehavior?c.getFirstOption().attr("data-value"):c.getAdjacentOption(c.$activeOption,-1).attr("data-value")),s=[],c.$activeItems.length){for(u=c.$control.children(".active:"+(n>0?"last":"first")),o=c.$control.children(":not(input)").index(u),n>0&&o++,t=0,i=c.$activeItems.length;t<i;t++)s.push(d(c.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(c.isFocused||"single"===c.settings.mode)&&c.items.length&&(n<0&&0===r.start&&0===r.length?s.push(c.items[c.caretPos-1]):n>0&&r.start===c.$control_input.val().length&&s.push(c.items[c.caretPos]));if(!s.length||"function"==typeof c.settings.onDelete&&!1===c.settings.onDelete.apply(c,[s]))return!1;for(typeof o<"u"&&c.setCaret(o);s.length;)c.removeItem(s.pop());return c.showInput(),c.positionDropdown(),c.refreshOptions(!0),a&&(l=c.getOption(a)).length&&c.setActiveOption(l),!0},advanceSelection:function(e,t){var i,n,r,s,a,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=Y(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(s=l.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===s)&&!s&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+i)).length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?r+1:r)))},advanceCaret:function(e,t){var r,i=this;0!==e&&(i.isShiftDown?(r=i.$control_input[e>0?"next":"prev"]()).length&&(i.hideInput(),i.setActiveItem(r),t&&t.preventDefault()):i.setCaret(i.caretPos+e))},setCaret:function(e){var i,n,s,o,t=this;if(e="single"===t.settings.mode?t.items.length:Math.max(0,Math.min(t.items.length,e)),!t.isPending)for(i=0,n=(s=t.$control.children(":not(input)")).length;i<n;i++)o=d(s[i]).detach(),i<e?t.$control_input.before(o):t.$control.append(o);t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),0==--m.count&&m.$testInput&&(m.$testInput.remove(),m.$testInput=void 0),d(window).off(t),d(document).off(t),d(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,s="",o=!1,a=this;return("option"===e||"item"===e)&&(o=!!(i=F(t[a.settings.valueField]))),o&&(ne(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(i))?a.renderCache[e][i]:(s=d(a.settings.render[e].apply(this,[t,z])),"option"===e||"option_create"===e?t[a.settings.disabledField]||s.attr("data-selectable",""):"optgroup"===e&&(s.attr("data-group",t[a.settings.optgroupValueField]||""),t[a.settings.disabledField]&&s.attr("data-disabled","")),("option"===e||"item"===e)&&s.attr("data-value",i||""),o&&(a.renderCache[e][i]=s[0]),s[0])},clearCache:function(e){typeof e>"u"?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),m.count=0,m.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",respect_word_boundaries:!0,mode:null,wrapperClass:"",inputClass:"",dropdownClass:"",dropdownContentClass:"",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},normalize:!1,ignoreOnDropwdownHeight:"img, i",search:!0,render:{}},d.fn.selectize=function(e){var t=d.fn.selectize.defaults,i=d.extend({},t,e),n=i.dataAttr,r=i.labelField,s=i.valueField,o=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,u=i.optgroupValueField,h=function(g,f){var v,w,O,p,_=f.options,x={},y=function(b){var C=n&&b.attr(n),S=b.data(),I={};return"string"==typeof C&&C.length&&(function(e){try{JSON.parse(str)}catch{return!1}return!0}()?Object.assign(I,JSON.parse(C)):I[C]=C),Object.assign(I,S),I||null},E=function(b,C){b=d(b);var S=F(b.val());if(S||i.allowEmptyOption){if(x.hasOwnProperty(S)){if(C){var I=x[S][a];I?Array.isArray(I)?I.push(C):x[S][a]=[I,C]:x[S][a]=C}return}var $=y(b)||{};$[r]=$[r]||b.text(),$[s]=$[s]||S,$[o]=$[o]||b.prop("disabled"),$[a]=$[a]||C,$.styles=b.attr("style")||"",$.classes=b.attr("class")||"",x[S]=$,_.push($),b.is(":selected")&&f.items.push(S)}},B=function(b){var C,S,I,$,G;for((I=(b=d(b)).attr("label"))&&(($=y(b)||{})[l]=I,$[u]=I,$[o]=b.prop("disabled"),f.optgroups.push($)),C=0,S=(G=d("option",b)).length;C<S;C++)E(G[C],I)};for(f.maxItems=g.attr("multiple")?null:1,v=0,w=(p=g.children()).length;v<w;v++)"optgroup"===(O=p[v].tagName.toLowerCase())?B(p[v]):"option"===O&&E(p[v])};return this.each(function(){if(!this.selectize){var f=d(this),v=this.tagName.toLowerCase(),w=f.attr("placeholder")||f.attr("data-placeholder");if(!w&&!i.allowEmptyOption&&(w=f.children('option[value=""]').text()),i.allowEmptyOption&&i.showEmptyOptionInDropdown&&!f.children('option[value=""]').length){var O=f.html(),p=z(i.emptyOptionLabel||"--");f.html('<option value="">'+p+"</option>"+O)}var A={placeholder:w,options:[],optgroups:[],items:[]};"select"===v?h(f,A):function(g,f){var v,w,O,p,A=g.attr(n);if(A)for(f.options=JSON.parse(A),v=0,w=f.options.length;v<w;v++)f.items.push(f.options[v][s]);else{var _=(g.val()||"").trim();if(!i.allowEmptyOption&&!_.length)return;for(v=0,w=(O=_.split(i.delimiter)).length;v<w;v++)(p={})[r]=O[v],p[s]=O[v],f.options.push(p);f.items=O}}(f,A),new m(f,d.extend(!0,{},t,A,e)).settings_user=e}})},d.fn.selectize.defaults=m.defaults,d.fn.selectize.support={validity:ie},m.define("auto_position",function(){const t_top="top",t_bottom="bottom";this.positionDropdown=function(){const i=this.$control,n="body"===this.settings.dropdownParent?i.offset():i.position();n.top+=i.outerHeight(!0);const r=this.$dropdown.prop("scrollHeight")+5,a=this.$control.get(0).getBoundingClientRect().top+r+this.$wrapper.height()>window.innerHeight?t_top:t_bottom,l={width:i.outerWidth(),left:n.left};if(a===t_top){const u={bottom:n.top,top:"unset"};"body"===this.settings.dropdownParent&&(u.top=n.top-this.$dropdown.outerHeight(!0)-i.outerHeight(!0),u.bottom="unset"),Object.assign(l,u),this.$dropdown.addClass("selectize-position-top"),this.$control.addClass("selectize-position-top")}else Object.assign(l,{top:n.top,bottom:"unset"}),this.$dropdown.removeClass("selectize-position-top"),this.$control.removeClass("selectize-position-top");this.$dropdown.css(l)}}),m.define("auto_select_on_type",function(e){var i,t=this;t.onBlur=(i=t.onBlur,function(n){var r=t.getFirstItemMatchedByTextContent(t.lastValue,!0);return typeof r.attr("data-value")<"u"&&t.getValue()!==r.attr("data-value")&&t.setValue(r.attr("data-value")),i.apply(this,arguments)})}),m.define("autofill_disable",function(e){var i,t=this;t.setup=(i=t.setup,function(){i.apply(t,arguments),t.$control_input.attr({autocomplete:"new-password",autofill:"no"})})}),m.define("clear_button",function(e){var i,t=this;e=d.extend({title:"Clear",className:"clear",label:"\xd7",html:function(i){return'<a class="'+i.className+'" title="'+i.title+'"> '+i.label+"</a>"}},e),t.setup=(i=t.setup,function(){i.apply(t,arguments),t.$button_clear=d(e.html(e)),"single"===t.settings.mode&&t.$wrapper.addClass("single"),t.$wrapper.append(t.$button_clear),(""===t.getValue()||0===t.getValue().length)&&t.$wrapper.find("."+e.className).css("display","none"),t.on("change",function(){""===t.getValue()||0===t.getValue().length?t.$wrapper.find("."+e.className).css("display","none"):t.$wrapper.find("."+e.className).css("display","")}),t.$wrapper.on("click","."+e.className,function(n){n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation(),!t.isLocked&&(t.clear(),t.$wrapper.find("."+e.className).css("display","none"))})})}),m.define("drag_drop",function(e){if(!d.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=(i=t.lock,function(){var n=t.$control.data("sortable");return n&&n.disable(),i.apply(t,arguments)}),t.unlock=function(){var i=t.unlock;return function(){var n=t.$control.data("sortable");return n&&n.enable(),i.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(r,s){s.placeholder.css("width",s.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var r=t.$activeItems?t.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(d(this).attr("data-value"))}),t.isFocused=!1,t.setValue(s),t.isFocused=!0,t.setActiveItem(r),t.positionDropdown()}})}}()}var i}),m.define("dropdown_header",function(e){var i,t=this;e=d.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(i){return'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a href="javascript:void(0)" class="'+i.closeClass+'">&#xd7;</a></div></div>'}},e),t.setup=(i=t.setup,function(){i.apply(t,arguments),t.$dropdown_header=d(e.html(e)),t.$dropdown.prepend(t.$dropdown_header),t.$dropdown_header.find("."+e.closeClass).on("click",function(){t.close()})})}),m.define("optgroup_columns",function(e){var r,t=this;e=d.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(r,s){var o=r.closest("[data-group]").find("[data-selectable]"),a=o.index(r)+s;return a>=0&&a<o.length?o.eq(a):d()},this.onKeyDown=(r=t.onKeyDown,function(s){var o,a,l,u;return!this.isOpen||s.keyCode!==M&&s.keyCode!==ee?r.apply(this,arguments):(t.ignoreHover=!0,o=(u=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((a=(l=(u=s.keyCode===M?u.prev("[data-group]"):u.next("[data-group]")).find("[data-selectable]")).eq(Math.min(l.length-1,o))).length&&this.setActiveOption(a)))});var i=function(){var r,s=i.width,o=document;return typeof s>"u"&&((r=o.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',o.body.appendChild(r=r.firstChild),s=i.width=r.offsetWidth-r.clientWidth,o.body.removeChild(r)),s},n=function(){var r,s,o,a,l,u,c;if((s=(c=d("[data-group]",t.$dropdown_content)).length)&&t.$dropdown_content.width()){if(e.equalizeHeight){for(o=0,r=0;r<s;r++)o=Math.max(o,c.eq(r).height());c.css({height:o})}e.equalizeWidth&&(u=t.$dropdown_content.innerWidth()-i(),a=Math.round(u/s),c.css({width:a}),s>1&&(l=u-a*(s-1),c.eq(s-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(L_after(this,"positionDropdown",n),L_after(this,"refreshOptions",n))}),m.define("remove_button",function(e){if("single"!==this.settings.mode){i=this,n=e=d.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},e),r=i,s='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+z(n.title)+'">'+n.label+"</a>",o=function(a,l){var u=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,u)+l+a.substring(u)},i.setup=(a=r.setup,function(){if(n.append){var l=r.settings.render.item;r.settings.render.item=function(u){return o(l.apply(i,arguments),s)}}a.apply(i,arguments),i.$control.on("click","."+n.className,function(u){if(u.preventDefault(),!r.isLocked){var c=d(u.currentTarget).parent();return r.setActiveItem(c),r.deleteSelection()&&r.setCaret(r.items.length),!1}})})}var i,n,a,r,s,o}),m.define("restore_on_backspace",function(e){var i;e.text=e.text||function(i){return i[this.settings.labelField]},this.onKeyDown=(i=this.onKeyDown,function(n){var r,s;return n.keyCode===P&&""===this.$control_input.val()&&!this.$activeItems.length&&(r=this.caretPos-1)>=0&&r<this.items.length?(s=this.options[this.items[r]],this.deleteSelection(n)&&(this.setTextboxValue(e.text.apply(this,[s])),this.refreshOptions(!0)),void n.preventDefault()):i.apply(this,arguments)})}),m.define("select_on_focus",function(e){var i,t=this;t.on("focus",(i=t.onFocus,function(n){var r=t.getItem(t.getValue()).text();return t.clear(),t.setTextboxValue(r),t.$control_input.select(),setTimeout(function(){t.settings.selectOnTab&&t.setActiveOption(t.getFirstItemMatchedByTextContent(r)),t.settings.score=null},0),i.apply(this,arguments)})),t.onBlur=function(){var i=t.onBlur;return function(n){return""===t.getValue()&&t.lastValidValue!==t.getValue()&&t.setValue(t.lastValidValue),setTimeout(function(){t.settings.score=function(){return function(){return 1}}},0),i.apply(this,arguments)}}(),t.settings.score=function(){return function(){return 1}}}),m.define("tag_limit",function(e){const t=this;e.tagLimit=e.tagLimit,this.onBlur=function(i){const n=t.onBlur;return function(r){if(n.apply(this,r),!r)return;const s=this.$control,o=s.find(".item"),a=e.tagLimit;void 0===a||o.length<=a||(o.toArray().forEach(function(l,u){u<a||d(l).hide()}),s.append("<span><b>"+(o.length-a)+"</b></span>"))}}(),this.onFocus=function(i){const n=t.onFocus;return function(r){if(n.apply(this,r),!r)return;const s=this.$control;s.find(".item").show(),s.find("span").remove()}}()}),m},void 0!==(j=V.apply(ae,Q))&&(oe.exports=j)}}]);