"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[888],{8888:(F,d,s)=>{s.r(d),s.d(d,{ShowMonthlyAmountModule:()=>Q});var l=s(6895),p=s(1822),g=s(2340),t=s(1571),r=s(2605),m=s(6690),h=s(6548),Z=s(12),_=s(4909);function f(a,n){if(1&a&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h1",6),t._uU(3),t.qZA()(),t.TgZ(4,"div",7)(5,"a",8),t._uU(6," Back "),t.qZA()()()),2&a){const e=t.oxw();t.xp6(3),t.HOy(" View Budget ",e.monthlyBudget.month,"/",e.monthlyBudget.year," (",e.monthlyBudget.start_date_formatted," to ",e.monthlyBudget.end_date_formatted,") "),t.xp6(2),t.MGl("routerLink","/settings/budget-management/",e.budget.id,"")}}const c=function(a){return["/purchase-requests/",a]};function x(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33)(10,"div"),t._uU(11),t.qZA()(),t.TgZ(12,"td",34)(13,"div",35)(14,"div",36)(15,"button",37),t._UZ(16,"i",38),t.qZA(),t.TgZ(17,"div",39)(18,"div",40)(19,"a",41)(20,"span",42),t._UZ(21,"i",43),t.qZA(),t.TgZ(22,"span",44),t._uU(23," View "),t.qZA()()()()()()()()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" ",e.pr_number," "),t.xp6(2),t.hij(" ",e.pr_name," "),t.xp6(2),t.hij(" ",e.pr_date_formatted," "),t.xp6(2),t.AsE(" ",e.amount_in_local_currency_formatted," ",e.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",e.status_color," badge-outline"),t.xp6(1),t.hij(" ",e.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(10,c,e.id))}}function A(a,n){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No purchase requests found "),t.qZA()())}function q(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(o){t.CHM(e);const u=t.oxw(2);return t.KtG(u.selectedPage(o,"plannedPurchaseRequests"))}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemPlannedPurchaseRequests)("currentPage",e.plannedPurchaseRequestsPage)}}function v(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33)(10,"div"),t._uU(11),t.qZA()(),t.TgZ(12,"td",34)(13,"div",35)(14,"div",36)(15,"button",37),t._UZ(16,"i",38),t.qZA(),t.TgZ(17,"div",39)(18,"div",40)(19,"a",41)(20,"span",42),t._UZ(21,"i",43),t.qZA(),t.TgZ(22,"span",44),t._uU(23," View "),t.qZA()()()()()()()()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" ",e.pr_number," "),t.xp6(2),t.hij(" ",e.pr_name," "),t.xp6(2),t.hij(" ",e.pr_date_formatted," "),t.xp6(2),t.AsE(" ",e.amount_in_local_currency_formatted," ",e.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",e.status_color," badge-outline"),t.xp6(1),t.hij(" ",e.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(10,c,e.id))}}function T(a,n){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No purchase requests found "),t.qZA()())}function P(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(o){t.CHM(e);const u=t.oxw(2);return t.KtG(u.selectedPage(o,"actualPurchaseRequests"))}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemActualPurchaseRequests)("currentPage",e.actualPurchaseRequestsPage)}}function b(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA()()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" ",e.recurring_operational_cost.name," "),t.xp6(2),t.hij(" ",e.recurring_operational_cost.code," "),t.xp6(2),t.hij(" ",e.date_formatted," "),t.xp6(2),t.hij(" ",e.cost_amount_in_local_currency_formatted," ")}}function y(a,n){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No recurring operational costs found "),t.qZA()())}function U(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(o){t.CHM(e);const u=t.oxw(2);return t.KtG(u.selectedPage(o,"recurringOperationalCosts"))}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemRecurringOperationalCosts)("currentPage",e.recurringOperationalCostsPage)}}function R(a,n){if(1&a&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),t._uU(4),t.qZA(),t.TgZ(5,"div",13),t._uU(6," Total Budget "),t.qZA()(),t.TgZ(7,"div",11)(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13),t._uU(11," Planned "),t.qZA()(),t.TgZ(12,"div",11)(13,"div",12),t._uU(14),t.qZA(),t.TgZ(15,"div",13),t._uU(16," Actual "),t.qZA()(),t.TgZ(17,"div",11)(18,"div",12),t._uU(19),t.qZA(),t.TgZ(20,"div",13),t._uU(21," Allotted "),t.qZA()(),t.TgZ(22,"div",11)(23,"div",12),t._uU(24),t.qZA(),t.TgZ(25,"div",13),t._uU(26," Available "),t.qZA()()(),t.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"h3",17),t._uU(31," Budget Information "),t.qZA()(),t.TgZ(32,"div",18)(33,"table",19)(34,"tbody")(35,"tr")(36,"td",20),t._uU(37," Entity Name "),t.qZA(),t.TgZ(38,"td",21),t._uU(39),t.qZA()(),t.TgZ(40,"tr")(41,"td",20),t._uU(42," Year "),t.qZA(),t.TgZ(43,"td",21),t._uU(44),t.qZA()(),t.TgZ(45,"tr")(46,"td",20),t._uU(47," Total Budget "),t.qZA(),t.TgZ(48,"td",21),t._uU(49),t.qZA()(),t.TgZ(50,"tr")(51,"td",20),t._uU(52," Status "),t.qZA(),t.TgZ(53,"td",21)(54,"div",22),t._uU(55),t.qZA()()()()()()(),t.TgZ(56,"div",15)(57,"div",16)(58,"h3",17),t._uU(59," Planned Purchase Requests "),t.qZA()(),t.TgZ(60,"div",23)(61,"table",24)(62,"thead")(63,"tr")(64,"th",25),t._uU(65," PR Number "),t.qZA(),t.TgZ(66,"th",26),t._uU(67," PR Name "),t.qZA(),t.TgZ(68,"th",26),t._uU(69," PR Date "),t.qZA(),t.TgZ(70,"th",27),t._uU(71," Amount "),t.qZA(),t.TgZ(72,"th",27),t._uU(73," Status "),t.qZA()()(),t.TgZ(74,"tbody"),t.YNc(75,x,24,12,"tr",28),t.YNc(76,A,3,0,"tr",29),t.qZA()()(),t.TgZ(77,"div",30)(78,"div",31),t.YNc(79,q,1,3,"app-pagination",32),t.qZA()()(),t.TgZ(80,"div",15)(81,"div",16)(82,"h3",17),t._uU(83," Actual Purchase Requests "),t.qZA()(),t.TgZ(84,"div",23)(85,"table",24)(86,"thead")(87,"tr")(88,"th",25),t._uU(89," PR Number "),t.qZA(),t.TgZ(90,"th",26),t._uU(91," PR Name "),t.qZA(),t.TgZ(92,"th",26),t._uU(93," PR Date "),t.qZA(),t.TgZ(94,"th",27),t._uU(95," Amount "),t.qZA(),t.TgZ(96,"th",27),t._uU(97," Status "),t.qZA()()(),t.TgZ(98,"tbody"),t.YNc(99,v,24,12,"tr",28),t.YNc(100,T,3,0,"tr",29),t.qZA()()(),t.TgZ(101,"div",30)(102,"div",31),t.YNc(103,P,1,3,"app-pagination",32),t.qZA()()(),t.TgZ(104,"div",15)(105,"div",16)(106,"h3",17),t._uU(107," Recurring Operational Costs "),t.qZA()(),t.TgZ(108,"div",23)(109,"table",24)(110,"thead")(111,"tr")(112,"th",25),t._uU(113," Name "),t.qZA(),t.TgZ(114,"th",26),t._uU(115," Code "),t.qZA(),t.TgZ(116,"th",26),t._uU(117," Date "),t.qZA(),t.TgZ(118,"th",27),t._uU(119," Amount "),t.qZA()()(),t.TgZ(120,"tbody"),t.YNc(121,b,9,4,"tr",28),t.YNc(122,y,3,0,"tr",29),t.qZA()()(),t.TgZ(123,"div",30)(124,"div",31),t.YNc(125,U,1,3,"app-pagination",32),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" ",e.monthlyBudget.budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.planned_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.actual_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.allotted_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.available_budget_amount_formatted," "),t.xp6(15),t.hij(" ",null==e.budget.entity?null:e.budget.entity.name," "),t.xp6(5),t.hij(" ",e.budget.year," "),t.xp6(5),t.AsE(" ",e.budget.total_budget_formatted," ",e.budget.currency," "),t.xp6(6),t.hij(" ",e.budget.status," "),t.xp6(20),t.Q6J("ngForOf",e.plannedPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==e.plannedPurchaseRequests?null:e.plannedPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!e.loading),t.xp6(20),t.Q6J("ngForOf",e.actualPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==e.actualPurchaseRequests?null:e.actualPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!e.loading),t.xp6(18),t.Q6J("ngForOf",e.recurringOperationalCosts),t.xp6(1),t.Q6J("ngIf",0==(null==e.recurringOperationalCosts?null:e.recurringOperationalCosts.length)),t.xp6(3),t.Q6J("ngIf",!e.loading)}}let C=(()=>{const n=class{constructor(i,o,u,Y){this.router=i,this.route=o,this.headerService=u,this.permissionService=Y,this.modelId=null,this.itemId=null,this.errorMessages=[],this.loading=!1,this.successMessage="",this.monthlyBudget=null,this.plannedPurchaseRequests=[],this.actualPurchaseRequests=[],this.recurringOperationalCosts=[],this.budget=null,this.plannedPurchaseRequestsPagination=null,this.actualPurchaseRequestsPagination=null,this.recurringOperationalCostsPagination=null,this.plannedPurchaseRequestsPage=1,this.actualPurchaseRequestsPage=1,this.recurringOperationalCostsPage=1,this.perPage=10,this.totalItemPlannedPurchaseRequests=0,this.totalItemActualPurchaseRequests=0,this.totalItemRecurringOperationalCosts=0}ngOnInit(){this.route.params.subscribe(i=>{this.modelId=i.id,this.itemId=i.itemId,this.getMonthlyBudget(),this.headerService.setupHeader([{title:"Settings"},{title:"Entity Budget",link:"/settings/budget-management"},{title:"View Budget",link:"/settings/budget-management/"+this.modelId},{title:"Show Monthly Amount"}])})}getMonthlyBudget(){this.loading=!0,p.Z.get(`${g.N.api_url}/settings/budgets/${this.modelId}/${this.itemId}?planned=${this.plannedPurchaseRequestsPage}&actual=${this.actualPurchaseRequestsPage}&recurring=${this.recurringOperationalCostsPage}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.localStorage.getItem(g.N.api_token_identifier)}`}}).then(i=>{i.data.error?this.errorMessages=i.data.error_message:(this.monthlyBudget=i.data.monthly,this.budget=i.data.budget,this.plannedPurchaseRequests=i.data.plannedPurchaseRequests.data,this.actualPurchaseRequests=i.data.actualPurchaseRequests.data,this.recurringOperationalCosts=i.data.recurringOperationalCosts.data,this.totalItemPlannedPurchaseRequests=i.data.plannedPurchaseRequests.total,this.totalItemActualPurchaseRequests=i.data.actualPurchaseRequests.total,this.totalItemRecurringOperationalCosts=i.data.recurringOperationalCosts.total)}).finally(()=>this.loading=!1)}selectedPage(i,o){"plannedPurchaseRequests"==o?this.plannedPurchaseRequestsPage=i:"actualPurchaseRequests"==o?this.actualPurchaseRequestsPage=i:"recurringOperationalCosts"==o&&(this.recurringOperationalCostsPage=i),this.getMonthlyBudget()}};let a=n;return n.\u0275fac=function(o){return new(o||n)(t.Y36(r.F0),t.Y36(r.gz),t.Y36(m.r),t.Y36(h.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-show-monthly-amount"]],inputs:{modelId:"modelId",itemId:"itemId"},decls:4,vars:4,consts:[[1,"container-fixed"],["class","flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5",4,"ngIf"],[3,"errorMessages","successMessage"],["class","grid gap-5 lg:gap-7.5 w-full mx-left",4,"ngIf"],[1,"flex","flex-wrap","items-center","lg:items-end","justify-between","gap-5","pb-7.5"],[1,"flex","flex-col","justify-center","gap-2"],[1,"text-xl","font-medium","leading-none","text-gray-900"],[1,"flex","items-center","gap-2.5"],[1,"btn","btn-sm","btn-light",3,"routerLink"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-left"],[1,"grid","grid-cols-5","gap-4","mb-7.5","w-full"],[1,"card","p-4","text-center","w-full"],[1,"text-2xl","font-semibold","text-primary","mb-2"],[1,"text-gray-600","text-sm"],[1,"flex","flex-col","gap-5"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-4","pb-2"],[1,"table-auto"],[1,"text-sm","text-gray-600","min-w-36","pb-5","pe-6"],[1,"text-sm","text-gray-800","pb-5"],[1,"badge","badge-sm","badge-success","badge-outline"],[1,"card-table","scrollable-x-auto"],["data-datatable-table","true",1,"table","table-auto","table-border"],[1,"min-w-[100px]"],[1,"min-w-[180px]"],[1,"min-w-[150px]"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer","justify-center","md:justify-between","flex-col","md:flex-row","gap-5","text-gray-600","text-2sm","font-medium"],[1,"flex","items-center","gap-4","order-1","md:order-2"],[3,"perPage","totalItems","currentPage","selectedPage",4,"ngIf"],[1,"text-gray-800","font-normal"],[1,"text-center"],["data-menu","true",1,"menu","flex-inline"],["data-menu-item-offset","0, 10px","data-menu-item-placement","bottom-end","data-menu-item-placement-rtl","bottom-start","data-menu-item-toggle","dropdown","data-menu-item-trigger","click|lg:click",1,"menu-item"],[1,"menu-toggle","btn","btn-sm","btn-icon","btn-light","btn-clear"],[1,"ki-filled","ki-dots-vertical"],["data-menu-dismiss","true",1,"menu-dropdown","menu-default","w-full","max-w-[175px]"],[1,"menu-item"],[1,"menu-link",3,"routerLink"],[1,"menu-icon"],[1,"ki-filled","ki-setting-2"],[1,"menu-title"],["colspan","7",1,"text-center","text-gray-500","font-normal"],[3,"perPage","totalItems","currentPage","selectedPage"]],template:function(o,u){1&o&&(t.TgZ(0,"div",0),t.YNc(1,f,7,5,"div",1),t._UZ(2,"app-alert",2),t.YNc(3,R,126,19,"div",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",!u.loading),t.xp6(1),t.Q6J("errorMessages",u.errorMessages)("successMessage",u.successMessage),t.xp6(1),t.Q6J("ngIf",!u.loading))},dependencies:[l.sg,l.O5,r.rH,Z.w,_.Q]}),a})();var I=s(433),w=s(5730),M=s(4859),j=s(4144),N=s(9602),O=s(3238),B=s(9549),S=s(507);const J=[{path:"",component:C}];let Q=(()=>{const n=class{};let a=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,r.Bz.forChild(J),I.u5,w.n,M.ot,j.c,N.FA,O.XK,B.lN,S.u]}),a})()}}]);