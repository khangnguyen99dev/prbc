"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8888],{12:(P,h,s)=>{s.d(h,{w:()=>q});var e=s(1571),Z=s(6895);function _(i,l){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const u=l.$implicit;e.xp6(1),e.Oqu(u)}}function t(i,l){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3),e._uU(2," Error "),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,_,2,1,"p",5),e.qZA(),e._UZ(5,"div",6),e.qZA()),2&i){const u=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",u.errorMessages)}}function p(i,l){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const u=l.$implicit;e.xp6(1),e.Oqu(u)}}function c(i,l){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,p,2,1,"p",5),e.qZA()),2&i){const u=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",u.errorMessages)}}function T(i,l){if(1&i){const u=e.EpF();e.TgZ(0,"div",2)(1,"div",7),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return e.KtG(m.toggleErrors())}),e._uU(2),e.TgZ(3,"span"),e._uU(4,"(Click here to show)"),e.qZA()(),e.YNc(5,c,2,1,"div",8),e._UZ(6,"div",6),e.qZA()}if(2&i){const u=e.oxw(2);e.xp6(2),e.hij(" Sorry, system find ",u.errorMessages.length," errors. "),e.xp6(3),e.Q6J("ngIf",u.showErrors)}}function x(i,l){if(1&i&&(e.ynx(0),e.YNc(1,t,6,1,"div",1),e.YNc(2,T,7,2,"div",1),e.BQk()),2&i){const u=e.oxw();e.xp6(1),e.Q6J("ngIf",1===u.errorMessages.length),e.xp6(1),e.Q6J("ngIf",u.errorMessages.length>1)}}function f(i,l){if(1&i&&(e.TgZ(0,"div",2)(1,"div",9),e._uU(2," Success "),e.qZA(),e.TgZ(3,"div",10)(4,"p"),e._uU(5),e.qZA()(),e._UZ(6,"div",6),e.qZA()),2&i){const u=e.oxw();e.xp6(5),e.Oqu(u.successMessage)}}let q=(()=>{const l=class{constructor(){this.errorMessages=[],this.successMessage="",this.showErrors=!1}toggleErrors(){this.showErrors=!this.showErrors}};let i=l;return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-alert"]],inputs:{errorMessages:"errorMessages",successMessage:"successMessage"},decls:2,vars:2,consts:[[4,"ngIf"],["role","alert",4,"ngIf"],["role","alert"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-red-400","rounded-b","bg-red-100","px-4","py-3","text-red-700"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,"bg-red-500","text-white","font-bold","rounded-t","px-4","py-2","cursor-pointer",3,"click"],["class","border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700",4,"ngIf"],[1,"bg-green-500","text-white","font-bold","rounded-t","px-4","py-2"],[1,"border","border-t-0","border-green-400","rounded-b","bg-green-100","px-4","py-3","text-green-700"]],template:function(m,v){1&m&&(e.YNc(0,x,3,2,"ng-container",0),e.YNc(1,f,7,1,"div",1)),2&m&&(e.Q6J("ngIf",v.errorMessages.length>0),e.xp6(1),e.Q6J("ngIf",""!==v.successMessage))},dependencies:[Z.sg,Z.O5]}),i})()},507:(P,h,s)=>{s.d(h,{u:()=>t});var e=s(6895),Z=s(2605),_=s(1571);let t=(()=>{const c=class{};let p=c;return c.\u0275fac=function(f){return new(f||c)},c.\u0275mod=_.oAB({type:c}),c.\u0275inj=_.cJS({imports:[e.ez,Z.Bz]}),p})()},8888:(P,h,s)=>{s.r(h),s.d(h,{ShowMonthlyAmountModule:()=>S});var e=s(6895),Z=s(1822),_=s(2340),t=s(1571),p=s(2605),c=s(6690),T=s(6548),x=s(12),f=s(4909);function q(a,r){if(1&a&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h1",6),t._uU(3),t.qZA()(),t.TgZ(4,"div",7)(5,"a",8),t._uU(6," Back "),t.qZA()()()),2&a){const n=t.oxw();t.xp6(3),t.HOy(" View Budget ",n.monthlyBudget.month,"/",n.monthlyBudget.year," (",n.monthlyBudget.start_date_formatted," to ",n.monthlyBudget.end_date_formatted,") "),t.xp6(2),t.MGl("routerLink","/settings/budget-management/",n.budget.id,"")}}const i=function(a){return["/purchase-requests/",a]};function l(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33)(10,"div"),t._uU(11),t.qZA()(),t.TgZ(12,"td",34)(13,"div",35)(14,"div",36)(15,"button",37),t._UZ(16,"i",38),t.qZA(),t.TgZ(17,"div",39)(18,"div",40)(19,"a",41)(20,"span",42),t._UZ(21,"i",43),t.qZA(),t.TgZ(22,"span",44),t._uU(23," View "),t.qZA()()()()()()()()),2&a){const n=r.$implicit;t.xp6(2),t.hij(" ",n.pr_number," "),t.xp6(2),t.hij(" ",n.pr_name," "),t.xp6(2),t.hij(" ",n.pr_date_formatted," "),t.xp6(2),t.AsE(" ",n.amount_in_local_currency_formatted," ",n.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",n.status_color," badge-outline"),t.xp6(1),t.hij(" ",n.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(10,i,n.id))}}function u(a,r){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No purchase requests found "),t.qZA()())}function A(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(d){t.CHM(n);const g=t.oxw(2);return t.KtG(g.selectedPage(d,"plannedPurchaseRequests"))}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("perPage",n.perPage)("totalItems",n.totalItemPlannedPurchaseRequests)("currentPage",n.plannedPurchaseRequestsPage)}}function m(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33)(10,"div"),t._uU(11),t.qZA()(),t.TgZ(12,"td",34)(13,"div",35)(14,"div",36)(15,"button",37),t._UZ(16,"i",38),t.qZA(),t.TgZ(17,"div",39)(18,"div",40)(19,"a",41)(20,"span",42),t._UZ(21,"i",43),t.qZA(),t.TgZ(22,"span",44),t._uU(23," View "),t.qZA()()()()()()()()),2&a){const n=r.$implicit;t.xp6(2),t.hij(" ",n.pr_number," "),t.xp6(2),t.hij(" ",n.pr_name," "),t.xp6(2),t.hij(" ",n.pr_date_formatted," "),t.xp6(2),t.AsE(" ",n.amount_in_local_currency_formatted," ",n.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",n.status_color," badge-outline"),t.xp6(1),t.hij(" ",n.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(10,i,n.id))}}function v(a,r){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No purchase requests found "),t.qZA()())}function b(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(d){t.CHM(n);const g=t.oxw(2);return t.KtG(g.selectedPage(d,"actualPurchaseRequests"))}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("perPage",n.perPage)("totalItems",n.totalItemActualPurchaseRequests)("currentPage",n.actualPurchaseRequestsPage)}}function y(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA()()),2&a){const n=r.$implicit;t.xp6(2),t.hij(" ",n.recurring_operational_cost.name," "),t.xp6(2),t.hij(" ",n.recurring_operational_cost.code," "),t.xp6(2),t.hij(" ",n.date_formatted," "),t.xp6(2),t.hij(" ",n.cost_amount_in_local_currency_formatted," ")}}function U(a,r){1&a&&(t.TgZ(0,"tr")(1,"td",45),t._uU(2," No recurring operational costs found "),t.qZA()())}function C(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"app-pagination",46),t.NdJ("selectedPage",function(d){t.CHM(n);const g=t.oxw(2);return t.KtG(g.selectedPage(d,"recurringOperationalCosts"))}),t.qZA()}if(2&a){const n=t.oxw(2);t.Q6J("perPage",n.perPage)("totalItems",n.totalItemRecurringOperationalCosts)("currentPage",n.recurringOperationalCostsPage)}}function I(a,r){if(1&a&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),t._uU(4),t.qZA(),t.TgZ(5,"div",13),t._uU(6," Total Budget "),t.qZA()(),t.TgZ(7,"div",11)(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13),t._uU(11," Planned "),t.qZA()(),t.TgZ(12,"div",11)(13,"div",12),t._uU(14),t.qZA(),t.TgZ(15,"div",13),t._uU(16," Actual "),t.qZA()(),t.TgZ(17,"div",11)(18,"div",12),t._uU(19),t.qZA(),t.TgZ(20,"div",13),t._uU(21," Allotted "),t.qZA()(),t.TgZ(22,"div",11)(23,"div",12),t._uU(24),t.qZA(),t.TgZ(25,"div",13),t._uU(26," Available "),t.qZA()()(),t.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"h3",17),t._uU(31," Budget Information "),t.qZA()(),t.TgZ(32,"div",18)(33,"table",19)(34,"tbody")(35,"tr")(36,"td",20),t._uU(37," Entity Name "),t.qZA(),t.TgZ(38,"td",21),t._uU(39),t.qZA()(),t.TgZ(40,"tr")(41,"td",20),t._uU(42," Year "),t.qZA(),t.TgZ(43,"td",21),t._uU(44),t.qZA()(),t.TgZ(45,"tr")(46,"td",20),t._uU(47," Total Budget "),t.qZA(),t.TgZ(48,"td",21),t._uU(49),t.qZA()(),t.TgZ(50,"tr")(51,"td",20),t._uU(52," Status "),t.qZA(),t.TgZ(53,"td",21)(54,"div",22),t._uU(55),t.qZA()()()()()()(),t.TgZ(56,"div",15)(57,"div",16)(58,"h3",17),t._uU(59," Planned Purchase Requests "),t.qZA()(),t.TgZ(60,"div",23)(61,"table",24)(62,"thead")(63,"tr")(64,"th",25),t._uU(65," PR Number "),t.qZA(),t.TgZ(66,"th",26),t._uU(67," PR Name "),t.qZA(),t.TgZ(68,"th",26),t._uU(69," PR Date "),t.qZA(),t.TgZ(70,"th",27),t._uU(71," Amount "),t.qZA(),t.TgZ(72,"th",27),t._uU(73," Status "),t.qZA()()(),t.TgZ(74,"tbody"),t.YNc(75,l,24,12,"tr",28),t.YNc(76,u,3,0,"tr",29),t.qZA()()(),t.TgZ(77,"div",30)(78,"div",31),t.YNc(79,A,1,3,"app-pagination",32),t.qZA()()(),t.TgZ(80,"div",15)(81,"div",16)(82,"h3",17),t._uU(83," Actual Purchase Requests "),t.qZA()(),t.TgZ(84,"div",23)(85,"table",24)(86,"thead")(87,"tr")(88,"th",25),t._uU(89," PR Number "),t.qZA(),t.TgZ(90,"th",26),t._uU(91," PR Name "),t.qZA(),t.TgZ(92,"th",26),t._uU(93," PR Date "),t.qZA(),t.TgZ(94,"th",27),t._uU(95," Amount "),t.qZA(),t.TgZ(96,"th",27),t._uU(97," Status "),t.qZA()()(),t.TgZ(98,"tbody"),t.YNc(99,m,24,12,"tr",28),t.YNc(100,v,3,0,"tr",29),t.qZA()()(),t.TgZ(101,"div",30)(102,"div",31),t.YNc(103,b,1,3,"app-pagination",32),t.qZA()()(),t.TgZ(104,"div",15)(105,"div",16)(106,"h3",17),t._uU(107," Recurring Operational Costs "),t.qZA()(),t.TgZ(108,"div",23)(109,"table",24)(110,"thead")(111,"tr")(112,"th",25),t._uU(113," Name "),t.qZA(),t.TgZ(114,"th",26),t._uU(115," Code "),t.qZA(),t.TgZ(116,"th",26),t._uU(117," Date "),t.qZA(),t.TgZ(118,"th",27),t._uU(119," Amount "),t.qZA()()(),t.TgZ(120,"tbody"),t.YNc(121,y,9,4,"tr",28),t.YNc(122,U,3,0,"tr",29),t.qZA()()(),t.TgZ(123,"div",30)(124,"div",31),t.YNc(125,C,1,3,"app-pagination",32),t.qZA()()()()()),2&a){const n=t.oxw();t.xp6(4),t.hij(" ",n.monthlyBudget.budget_amount_formatted," "),t.xp6(5),t.hij(" ",n.monthlyBudget.planned_budget_amount_formatted," "),t.xp6(5),t.hij(" ",n.monthlyBudget.actual_budget_amount_formatted," "),t.xp6(5),t.hij(" ",n.monthlyBudget.allotted_budget_amount_formatted," "),t.xp6(5),t.hij(" ",n.monthlyBudget.available_budget_amount_formatted," "),t.xp6(15),t.hij(" ",null==n.budget.entity?null:n.budget.entity.name," "),t.xp6(5),t.hij(" ",n.budget.year," "),t.xp6(5),t.AsE(" ",n.budget.total_budget_formatted," ",n.budget.currency," "),t.xp6(6),t.hij(" ",n.budget.status," "),t.xp6(20),t.Q6J("ngForOf",n.plannedPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==n.plannedPurchaseRequests?null:n.plannedPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!n.loading),t.xp6(20),t.Q6J("ngForOf",n.actualPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==n.actualPurchaseRequests?null:n.actualPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!n.loading),t.xp6(18),t.Q6J("ngForOf",n.recurringOperationalCosts),t.xp6(1),t.Q6J("ngIf",0==(null==n.recurringOperationalCosts?null:n.recurringOperationalCosts.length)),t.xp6(3),t.Q6J("ngIf",!n.loading)}}let R=(()=>{const r=class{constructor(o,d,g,Y){this.router=o,this.route=d,this.headerService=g,this.permissionService=Y,this.modelId=null,this.itemId=null,this.errorMessages=[],this.loading=!1,this.successMessage="",this.monthlyBudget=null,this.plannedPurchaseRequests=[],this.actualPurchaseRequests=[],this.recurringOperationalCosts=[],this.budget=null,this.plannedPurchaseRequestsPagination=null,this.actualPurchaseRequestsPagination=null,this.recurringOperationalCostsPagination=null,this.plannedPurchaseRequestsPage=1,this.actualPurchaseRequestsPage=1,this.recurringOperationalCostsPage=1,this.perPage=10,this.totalItemPlannedPurchaseRequests=0,this.totalItemActualPurchaseRequests=0,this.totalItemRecurringOperationalCosts=0}ngOnInit(){this.route.params.subscribe(o=>{this.modelId=o.id,this.itemId=o.itemId,this.getMonthlyBudget(),this.headerService.setupHeader([{title:"Settings"},{title:"Entity Budget",link:"/settings/budget-management"},{title:"View Budget",link:"/settings/budget-management/"+this.modelId},{title:"Show Monthly Amount"}])})}getMonthlyBudget(){this.loading=!0,Z.Z.get(`${_.N.api_url}/settings/budgets/${this.modelId}/${this.itemId}?planned=${this.plannedPurchaseRequestsPage}&actual=${this.actualPurchaseRequestsPage}&recurring=${this.recurringOperationalCostsPage}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.localStorage.getItem(_.N.api_token_identifier)}`}}).then(o=>{o.data.error?this.errorMessages=o.data.error_message:(this.monthlyBudget=o.data.monthly,this.budget=o.data.budget,this.plannedPurchaseRequests=o.data.plannedPurchaseRequests.data,this.actualPurchaseRequests=o.data.actualPurchaseRequests.data,this.recurringOperationalCosts=o.data.recurringOperationalCosts.data,this.totalItemPlannedPurchaseRequests=o.data.plannedPurchaseRequests.total,this.totalItemActualPurchaseRequests=o.data.actualPurchaseRequests.total,this.totalItemRecurringOperationalCosts=o.data.recurringOperationalCosts.total)}).finally(()=>this.loading=!1)}selectedPage(o,d){"plannedPurchaseRequests"==d?this.plannedPurchaseRequestsPage=o:"actualPurchaseRequests"==d?this.actualPurchaseRequestsPage=o:"recurringOperationalCosts"==d&&(this.recurringOperationalCostsPage=o),this.getMonthlyBudget()}};let a=r;return r.\u0275fac=function(d){return new(d||r)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(c.r),t.Y36(T.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-show-monthly-amount"]],inputs:{modelId:"modelId",itemId:"itemId"},decls:4,vars:4,consts:[[1,"container-fixed"],["class","flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5",4,"ngIf"],[3,"errorMessages","successMessage"],["class","grid gap-5 lg:gap-7.5 w-full mx-left",4,"ngIf"],[1,"flex","flex-wrap","items-center","lg:items-end","justify-between","gap-5","pb-7.5"],[1,"flex","flex-col","justify-center","gap-2"],[1,"text-xl","font-medium","leading-none","text-gray-900"],[1,"flex","items-center","gap-2.5"],[1,"btn","btn-sm","btn-light",3,"routerLink"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-left"],[1,"grid","grid-cols-5","gap-4","mb-7.5","w-full"],[1,"card","p-4","text-center","w-full"],[1,"text-2xl","font-semibold","text-primary","mb-2"],[1,"text-gray-600","text-sm"],[1,"flex","flex-col","gap-5"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-4","pb-2"],[1,"table-auto"],[1,"text-sm","text-gray-600","min-w-36","pb-5","pe-6"],[1,"text-sm","text-gray-800","pb-5"],[1,"badge","badge-sm","badge-success","badge-outline"],[1,"card-table","scrollable-x-auto"],["data-datatable-table","true",1,"table","table-auto","table-border"],[1,"min-w-[100px]"],[1,"min-w-[180px]"],[1,"min-w-[150px]"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer","justify-center","md:justify-between","flex-col","md:flex-row","gap-5","text-gray-600","text-2sm","font-medium"],[1,"flex","items-center","gap-4","order-1","md:order-2"],[3,"perPage","totalItems","currentPage","selectedPage",4,"ngIf"],[1,"text-gray-800","font-normal"],[1,"text-center"],["data-menu","true",1,"menu","flex-inline"],["data-menu-item-offset","0, 10px","data-menu-item-placement","bottom-end","data-menu-item-placement-rtl","bottom-start","data-menu-item-toggle","dropdown","data-menu-item-trigger","click|lg:click",1,"menu-item"],[1,"menu-toggle","btn","btn-sm","btn-icon","btn-light","btn-clear"],[1,"ki-filled","ki-dots-vertical"],["data-menu-dismiss","true",1,"menu-dropdown","menu-default","w-full","max-w-[175px]"],[1,"menu-item"],[1,"menu-link",3,"routerLink"],[1,"menu-icon"],[1,"ki-filled","ki-setting-2"],[1,"menu-title"],["colspan","7",1,"text-center","text-gray-500","font-normal"],[3,"perPage","totalItems","currentPage","selectedPage"]],template:function(d,g){1&d&&(t.TgZ(0,"div",0),t.YNc(1,q,7,5,"div",1),t._UZ(2,"app-alert",2),t.YNc(3,I,126,19,"div",3),t.qZA()),2&d&&(t.xp6(1),t.Q6J("ngIf",!g.loading),t.xp6(1),t.Q6J("errorMessages",g.errorMessages)("successMessage",g.successMessage),t.xp6(1),t.Q6J("ngIf",!g.loading))},dependencies:[e.sg,e.O5,p.rH,x.w,f.Q]}),a})();var M=s(433),w=s(5730),O=s(4859),N=s(4144),B=s(9602),E=s(3238),j=s(9549),J=s(507);const Q=[{path:"",component:R}];let S=(()=>{const r=class{};let a=r;return r.\u0275fac=function(d){return new(d||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[e.ez,p.Bz.forChild(Q),M.u5,w.n,O.ot,N.c,B.FA,E.XK,j.lN,J.u]}),a})()}}]);