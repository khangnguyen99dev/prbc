"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[908],{8928:(E,r,d)=>{d.r(r),d.d(r,{ViewModule:()=>j});var g=d(6895),c=d(1822),l=d(2340),Z=d(5439),t=d(1571),o=d(2605),h=d(6690),f=d(6548),p=d(12);const v=function(n,a){return["/settings/budget-management/view/",n,a]};function b(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t.TgZ(7,"td",31),t._uU(8),t.qZA(),t.TgZ(9,"td",31),t._uU(10),t.qZA(),t.TgZ(11,"td",31),t._uU(12),t.qZA(),t.TgZ(13,"td",31)(14,"div",24),t._uU(15),t.qZA()(),t.TgZ(16,"td",32)(17,"div",33)(18,"div",34)(19,"button",35),t._UZ(20,"i",36),t.qZA(),t.TgZ(21,"div",37)(22,"div",38)(23,"a",39)(24,"span",40),t._UZ(25,"i",41),t.qZA(),t.TgZ(26,"span",42),t._uU(27," View "),t.qZA()()()()()()()()),2&n){const i=a.$implicit,e=t.oxw(2);t.xp6(2),t.hij(" ",e.getMonthName(i.month)," "),t.xp6(2),t.AsE(" ",i.budget_amount_formatted," ",e.budget.currency," "),t.xp6(2),t.AsE(" ",i.planned_budget_amount_formatted," ",e.budget.currency," "),t.xp6(2),t.AsE(" ",i.actual_budget_amount_formatted," ",e.budget.currency," "),t.xp6(2),t.AsE(" ",i.allotted_budget_amount_formatted," ",e.budget.currency," "),t.xp6(2),t.AsE(" ",i.available_budget_amount_formatted," ",e.budget.currency," "),t.xp6(3),t.hij(" ",i.status," "),t.xp6(8),t.Q6J("routerLink",t.WLB(13,v,e.budget.id,i.id))}}const A=function(n){return["/settings/budget-management/edit/",n]};function x(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),t._uU(4),t.qZA(),t.TgZ(5,"div",13),t._uU(6," Total Budget "),t.qZA()(),t.TgZ(7,"div",11)(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13),t._uU(11," Planned "),t.qZA()(),t.TgZ(12,"div",11)(13,"div",12),t._uU(14),t.qZA(),t.TgZ(15,"div",13),t._uU(16," Actual "),t.qZA()(),t.TgZ(17,"div",11)(18,"div",12),t._uU(19),t.qZA(),t.TgZ(20,"div",13),t._uU(21," Allotted "),t.qZA()(),t.TgZ(22,"div",11)(23,"div",12),t._uU(24),t.qZA(),t.TgZ(25,"div",13),t._uU(26," Available "),t.qZA()()(),t.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"h3",17),t._uU(31," Budget Information "),t.qZA(),t.TgZ(32,"button",18),t._UZ(33,"i",19),t._uU(34," Edit Budget "),t.qZA()(),t.TgZ(35,"div",20)(36,"table",21)(37,"tbody")(38,"tr")(39,"td",22),t._uU(40," Entity Name "),t.qZA(),t.TgZ(41,"td",23),t._uU(42),t.qZA()(),t.TgZ(43,"tr")(44,"td",22),t._uU(45," Year "),t.qZA(),t.TgZ(46,"td",23),t._uU(47),t.qZA()(),t.TgZ(48,"tr")(49,"td",22),t._uU(50," Total Budget "),t.qZA(),t.TgZ(51,"td",23),t._uU(52),t.qZA()(),t.TgZ(53,"tr")(54,"td",22),t._uU(55," Status "),t.qZA(),t.TgZ(56,"td",23)(57,"div",24),t._uU(58),t.qZA()()()()()()(),t.TgZ(59,"div",15)(60,"div",16)(61,"h3",17),t._uU(62," Monthly Amounts "),t.qZA()(),t.TgZ(63,"div",25)(64,"table",26)(65,"thead")(66,"tr")(67,"th",27),t._uU(68," Month "),t.qZA(),t.TgZ(69,"th",28),t._uU(70," Amount "),t.qZA(),t.TgZ(71,"th",28),t._uU(72," Planned "),t.qZA(),t.TgZ(73,"th",28),t._uU(74," Actual "),t.qZA(),t.TgZ(75,"th",28),t._uU(76," Allotted "),t.qZA(),t.TgZ(77,"th",28),t._uU(78," Available "),t.qZA(),t.TgZ(79,"th",28),t._uU(80," Status "),t.qZA(),t.TgZ(81,"th",28),t._uU(82," Action "),t.qZA()()(),t.TgZ(83,"tbody"),t.YNc(84,b,28,16,"tr",29),t.qZA()()()()()()),2&n){const i=t.oxw();t.xp6(4),t.hij(" ",i.budget.total_budget_formatted||"0.00"," "),t.xp6(5),t.hij(" ",i.budget.total_planned_budget_amount_formatted||"0.00"," "),t.xp6(5),t.hij(" ",i.budget.total_actual_budget_amount_formatted||"0.00"," "),t.xp6(5),t.hij(" ",i.budget.total_allotted_budget_amount_formatted||"0.00"," "),t.xp6(5),t.hij(" ",i.budget.total_available_budget_amount_formatted||"0.00"," "),t.xp6(8),t.Q6J("routerLink",t.VKq(12,A,i.budget.id)),t.xp6(10),t.hij(" ",null==i.budget.entity?null:i.budget.entity.name," "),t.xp6(5),t.hij(" ",i.budget.year," "),t.xp6(5),t.AsE(" ",i.budget.total_budget_formatted," ",i.budget.currency," "),t.xp6(6),t.hij(" ",i.budget.status," "),t.xp6(26),t.Q6J("ngForOf",i.monthlyAmounts)}}function T(n,a){1&n&&(t.TgZ(0,"div",43),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"path",45)(3,"path",46),t.qZA(),t.kcU(),t.TgZ(4,"p",32),t._uU(5,"Loading..."),t.qZA()())}let U=(()=>{const a=class{constructor(e,s,u,I){this.router=e,this.route=s,this.headerService=u,this.permissionService=I,this.modelId=null,this.errorMessages=[],this.loading=!1,this.successMessage="",this.monthlyAmounts=[],this.budget=null,this.totalBudget=0,this.form={id:"",year:"",entity_id:"",currency:"SGD",monthly_amounts:[]},this.headerService.setupHeader([{title:"Settings"},{title:"Entity Budget",link:"/settings/budget-management"},{title:"View Budget"}])}ngOnInit(){this.route.params.subscribe(e=>{this.modelId=e.id,this.getBudget()}),this.route.queryParams.subscribe(e=>{e.success_message&&(window.scrollTo(0,0),this.successMessage="Entity budget created successfully",this.clearMessages())})}getBudget(){this.loading=!0,c.Z.get(`${l.N.api_url}/settings/budgets/${this.modelId}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.localStorage.getItem(l.N.api_token_identifier)}`}}).then(e=>{e.data.error?this.errorMessages=e.data.error_message:(this.budget=e.data.budget,this.totalBudget=e.data.budget.total_budget,this.monthlyAmounts=e.data.budget.monthly_amounts)}).catch(e=>{this.errorMessages=e.response.data.error_message}).finally(()=>{this.loading=!1})}getMonthName(e){return Z().month(e-1).format("MMMM")}clearMessages(){setTimeout(()=>{this.successMessage=""},3500)}};let n=a;return a.\u0275fac=function(s){return new(s||a)(t.Y36(o.F0),t.Y36(o.gz),t.Y36(h.r),t.Y36(f.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view"]],inputs:{modelId:"modelId"},decls:11,vars:4,consts:[[1,"container-fixed"],[1,"flex","flex-wrap","items-center","lg:items-end","justify-between","gap-5","pb-7.5"],[1,"flex","flex-col","justify-center","gap-2"],[1,"text-xl","font-medium","leading-none","text-gray-900"],[1,"flex","items-center","gap-2.5"],["routerLink","/settings/budget-management",1,"btn","btn-sm","btn-light"],[3,"errorMessages","successMessage"],["class","grid gap-5 lg:gap-7.5 w-full mx-left",4,"ngIf"],["class","p-5",4,"ngIf"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-left"],[1,"grid","grid-cols-5","gap-4","mb-7.5","w-full"],[1,"card","p-4","text-center","w-full"],[1,"text-2xl","font-semibold","text-primary","mb-2"],[1,"text-gray-600","text-sm"],[1,"flex","flex-col","gap-5"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"btn","btn-light","btn-sm",3,"routerLink"],[1,"ki-filled","ki-notepad-edit"],[1,"card-body","pt-4","pb-2"],[1,"table-auto"],[1,"text-sm","text-gray-600","min-w-36","pb-5","pe-6"],[1,"text-sm","text-gray-800","pb-5"],[1,"badge","badge-sm","badge-success","badge-outline"],[1,"card-table","scrollable-x-auto"],[1,"table"],[1,"min-w-52"],[1,"min-w-24"],[4,"ngFor","ngForOf"],[1,"text-sm","text-gray-800","font-normal"],[1,"lg:text-start"],[1,"text-center"],["data-menu","true",1,"menu","flex-inline"],["data-menu-item-offset","0, 10px","data-menu-item-placement","bottom-end","data-menu-item-placement-rtl","bottom-start","data-menu-item-toggle","dropdown","data-menu-item-trigger","click|lg:click",1,"menu-item"],[1,"menu-toggle","btn","btn-sm","btn-icon","btn-light","btn-clear"],[1,"ki-filled","ki-dots-vertical"],["data-menu-dismiss","true",1,"menu-dropdown","menu-default","w-full","max-w-[175px]"],[1,"menu-item"],[1,"menu-link",3,"routerLink"],[1,"menu-icon"],[1,"ki-filled","ki-setting-2"],[1,"menu-title"],[1,"p-5"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-10","h-10","m-auto","text-gray-200","animate-spin","dark:text-gray-600","fill-green-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"]],template:function(s,u){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4," View Budget "),t.qZA()(),t.TgZ(5,"div",4)(6,"a",5),t._uU(7," Back "),t.qZA()()(),t._UZ(8,"app-alert",6),t.YNc(9,x,85,14,"div",7),t.YNc(10,T,6,0,"div",8),t.qZA()),2&s&&(t.xp6(8),t.Q6J("errorMessages",u.errorMessages)("successMessage",u.successMessage),t.xp6(1),t.Q6J("ngIf",!u.loading),t.xp6(1),t.Q6J("ngIf",u.loading))},dependencies:[g.sg,g.O5,o.rH,p.w]}),n})();var y=d(433),q=d(5730),C=d(4859),M=d(4144),_=d(9602),m=d(3238),w=d(9549);const B=[{path:"",component:U}];let j=(()=>{const a=class{};let n=a;return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:m.Ad,useValue:"en-GB"}],imports:[g.ez,o.Bz.forChild(B),y.u5,q.n,C.ot,M.c,_.FA,m.XK,w.lN]}),n})()}}]);