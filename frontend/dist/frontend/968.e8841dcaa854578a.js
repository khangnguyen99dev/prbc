"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[968],{5176:(G,l,u)=>{u.r(l),u.d(l,{ShowMonthlyAmountModule:()=>F});var d=u(6895),h=u(1822),g=u(2340),t=u(1571),r=u(2605),m=u(6690),_=u(6548),Z=u(12),f=u(4909);function A(n,a){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h1",6),t._uU(3),t.qZA()(),t.TgZ(4,"div",7)(5,"a",8),t._uU(6," Back "),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.HOy(" View Budget ",e.monthlyBudget.month,"/",e.monthlyBudget.year," (",e.monthlyBudget.start_date_formatted," to ",e.monthlyBudget.end_date_formatted,") "),t.xp6(2),t.MGl("routerLink","/settings/country-budget/",e.countryBudget.id,"")}}function y(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33)(8,"div"),t._uU(9),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e.budget.entity?null:e.budget.entity.name," "),t.xp6(2),t.AsE(" ",e.month_formatted," ",e.year," "),t.xp6(2),t.AsE(" ",e.budget_amount_formatted," ",e.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",e.status_color," badge-outline"),t.xp6(1),t.hij(" ",e.status," ")}}function x(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",34),t._uU(2," No planned entity budget found "),t.qZA()())}function q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",35),t.NdJ("selectedPage",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedPage(o,"entityBudgetMonths"))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemEntityBudgetMonths)("currentPage",e.entityBudgetMonthsPage)}}const c=function(n){return["/purchase-requests/",n]};function T(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33),t._uU(10),t.qZA(),t.TgZ(11,"td",33)(12,"div"),t._uU(13),t.qZA()(),t.TgZ(14,"td",36)(15,"div",37)(16,"div",38)(17,"button",39),t._UZ(18,"i",40),t.qZA(),t.TgZ(19,"div",41)(20,"div",42)(21,"a",43)(22,"span",44),t._UZ(23,"i",45),t.qZA(),t.TgZ(24,"span",46),t._uU(25," View "),t.qZA()()()()()()()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e.entity?null:e.entity.name," "),t.xp6(2),t.hij(" ",e.pr_number," "),t.xp6(2),t.hij(" ",e.pr_name," "),t.xp6(2),t.hij(" ",e.pr_date_formatted," "),t.xp6(2),t.AsE(" ",e.amount_in_local_currency_formatted," ",e.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",e.status_color," badge-outline"),t.xp6(1),t.hij(" ",e.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(11,c,e.id))}}function v(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",47),t._uU(2," No purchase requests found "),t.qZA()())}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",35),t.NdJ("selectedPage",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedPage(o,"plannedPurchaseRequests"))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemPlannedPurchaseRequests)("currentPage",e.plannedPurchaseRequestsPage)}}function U(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33),t._uU(10),t.qZA(),t.TgZ(11,"td",33)(12,"div"),t._uU(13),t.qZA()(),t.TgZ(14,"td",36)(15,"div",37)(16,"div",38)(17,"button",39),t._UZ(18,"i",40),t.qZA(),t.TgZ(19,"div",41)(20,"div",42)(21,"a",43)(22,"span",44),t._UZ(23,"i",45),t.qZA(),t.TgZ(24,"span",46),t._uU(25," View "),t.qZA()()()()()()()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e.entity?null:e.entity.name," "),t.xp6(2),t.hij(" ",e.pr_number," "),t.xp6(2),t.hij(" ",e.pr_name," "),t.xp6(2),t.hij(" ",e.pr_date_formatted," "),t.xp6(2),t.AsE(" ",e.amount_in_local_currency_formatted," ",e.currency," "),t.xp6(2),t.Gre("badge badge-sm badge-",e.status_color," badge-outline"),t.xp6(1),t.hij(" ",e.status_alias," "),t.xp6(8),t.Q6J("routerLink",t.VKq(11,c,e.id))}}function b(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",47),t._uU(2," No purchase requests found "),t.qZA()())}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",35),t.NdJ("selectedPage",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedPage(o,"actualPurchaseRequests"))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemActualPurchaseRequests)("currentPage",e.actualPurchaseRequestsPage)}}function M(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",33),t._uU(8),t.qZA(),t.TgZ(9,"td",33),t._uU(10),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e.recurring_operational_cost.entity?null:e.recurring_operational_cost.entity.name," "),t.xp6(2),t.hij(" ",e.recurring_operational_cost.name," "),t.xp6(2),t.hij(" ",e.recurring_operational_cost.code," "),t.xp6(2),t.hij(" ",e.date_formatted," "),t.xp6(2),t.hij(" ",e.cost_amount_in_local_currency_formatted," ")}}function C(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",47),t._uU(2," No recurring operational costs found "),t.qZA()())}function R(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",35),t.NdJ("selectedPage",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedPage(o,"recurringOperationalCosts"))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("perPage",e.perPage)("totalItems",e.totalItemRecurringOperationalCosts)("currentPage",e.recurringOperationalCostsPage)}}function I(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),t._uU(4),t.qZA(),t.TgZ(5,"div",13),t._uU(6," Total Budget "),t.qZA()(),t.TgZ(7,"div",11)(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13),t._uU(11," Planned "),t.qZA()(),t.TgZ(12,"div",11)(13,"div",12),t._uU(14),t.qZA(),t.TgZ(15,"div",13),t._uU(16," Actual "),t.qZA()(),t.TgZ(17,"div",11)(18,"div",12),t._uU(19),t.qZA(),t.TgZ(20,"div",13),t._uU(21," Allotted "),t.qZA()(),t.TgZ(22,"div",11)(23,"div",12),t._uU(24),t.qZA(),t.TgZ(25,"div",13),t._uU(26," Available "),t.qZA()()(),t.TgZ(27,"div",14)(28,"div",15)(29,"div",16)(30,"h3",17),t._uU(31," Country Budget Information "),t.qZA()(),t.TgZ(32,"div",18)(33,"table",19)(34,"tbody")(35,"tr")(36,"td",20),t._uU(37," Country Name "),t.qZA(),t.TgZ(38,"td",21),t._uU(39),t.qZA()(),t.TgZ(40,"tr")(41,"td",20),t._uU(42," Year "),t.qZA(),t.TgZ(43,"td",21),t._uU(44),t.qZA()(),t.TgZ(45,"tr")(46,"td",20),t._uU(47," Total Budget "),t.qZA(),t.TgZ(48,"td",21),t._uU(49),t.qZA()(),t.TgZ(50,"tr")(51,"td",20),t._uU(52," Total Planned Entity "),t.qZA(),t.TgZ(53,"td",21),t._uU(54),t.qZA()(),t.TgZ(55,"tr")(56,"td",20),t._uU(57," Status "),t.qZA(),t.TgZ(58,"td",21)(59,"div",22),t._uU(60),t.qZA()()()()()()(),t.TgZ(61,"div",15)(62,"div",16)(63,"h3",17),t._uU(64," Planned Entity Budget "),t.qZA()(),t.TgZ(65,"div",23)(66,"table",24)(67,"thead")(68,"tr")(69,"th",25),t._uU(70," Entity Name "),t.qZA(),t.TgZ(71,"th",25),t._uU(72," Period "),t.qZA(),t.TgZ(73,"th",25),t._uU(74," Budget Amount "),t.qZA(),t.TgZ(75,"th",26),t._uU(76," Status "),t.qZA()()(),t.TgZ(77,"tbody"),t.YNc(78,y,10,9,"tr",27),t.YNc(79,x,3,0,"tr",28),t.qZA()()(),t.TgZ(80,"div",29)(81,"div",30),t.YNc(82,q,1,3,"app-pagination",31),t.qZA()()(),t.TgZ(83,"div",15)(84,"div",16)(85,"h3",17),t._uU(86," Planned Purchase Requests "),t.qZA()(),t.TgZ(87,"div",23)(88,"table",24)(89,"thead")(90,"tr")(91,"th",25),t._uU(92," Entity Name "),t.qZA(),t.TgZ(93,"th",25),t._uU(94," PR Number "),t.qZA(),t.TgZ(95,"th",32),t._uU(96," PR Name "),t.qZA(),t.TgZ(97,"th",32),t._uU(98," PR Date "),t.qZA(),t.TgZ(99,"th",26),t._uU(100," Amount "),t.qZA(),t.TgZ(101,"th",26),t._uU(102," Status "),t.qZA()()(),t.TgZ(103,"tbody"),t.YNc(104,T,26,13,"tr",27),t.YNc(105,v,3,0,"tr",28),t.qZA()()(),t.TgZ(106,"div",29)(107,"div",30),t.YNc(108,P,1,3,"app-pagination",31),t.qZA()()(),t.TgZ(109,"div",15)(110,"div",16)(111,"h3",17),t._uU(112," Actual Purchase Requests "),t.qZA()(),t.TgZ(113,"div",23)(114,"table",24)(115,"thead")(116,"tr")(117,"th",25),t._uU(118," Entity Name "),t.qZA(),t.TgZ(119,"th",25),t._uU(120," PR Number "),t.qZA(),t.TgZ(121,"th",32),t._uU(122," PR Name "),t.qZA(),t.TgZ(123,"th",32),t._uU(124," PR Date "),t.qZA(),t.TgZ(125,"th",26),t._uU(126," Amount "),t.qZA(),t.TgZ(127,"th",26),t._uU(128," Status "),t.qZA()()(),t.TgZ(129,"tbody"),t.YNc(130,U,26,13,"tr",27),t.YNc(131,b,3,0,"tr",28),t.qZA()()(),t.TgZ(132,"div",29)(133,"div",30),t.YNc(134,B,1,3,"app-pagination",31),t.qZA()()(),t.TgZ(135,"div",15)(136,"div",16)(137,"h3",17),t._uU(138," Recurring Operational Costs "),t.qZA()(),t.TgZ(139,"div",23)(140,"table",24)(141,"thead")(142,"tr")(143,"th",25),t._uU(144," Entity Name "),t.qZA(),t.TgZ(145,"th",25),t._uU(146," Name "),t.qZA(),t.TgZ(147,"th",32),t._uU(148," Code "),t.qZA(),t.TgZ(149,"th",32),t._uU(150," Date "),t.qZA(),t.TgZ(151,"th",26),t._uU(152," Amount "),t.qZA()()(),t.TgZ(153,"tbody"),t.YNc(154,M,11,5,"tr",27),t.YNc(155,C,3,0,"tr",28),t.qZA()()(),t.TgZ(156,"div",29)(157,"div",30),t.YNc(158,R,1,3,"app-pagination",31),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",e.monthlyBudget.budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.planned_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.actual_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.allotted_budget_amount_formatted," "),t.xp6(5),t.hij(" ",e.monthlyBudget.available_budget_amount_formatted," "),t.xp6(15),t.hij(" ",null==e.countryBudget.country?null:e.countryBudget.country.name," "),t.xp6(5),t.hij(" ",e.countryBudget.year," "),t.xp6(5),t.AsE(" ",e.countryBudget.total_budget_formatted," ",e.countryBudget.currency," "),t.xp6(5),t.AsE(" ",e.monthlyBudget.planned_entity_budget_amount_formatted," ",e.countryBudget.currency," "),t.xp6(6),t.hij(" ",e.countryBudget.status," "),t.xp6(18),t.Q6J("ngForOf",e.entityBudgetMonths),t.xp6(1),t.Q6J("ngIf",0==(null==e.entityBudgetMonths?null:e.entityBudgetMonths.length)),t.xp6(3),t.Q6J("ngIf",!e.loading),t.xp6(22),t.Q6J("ngForOf",e.plannedPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==e.plannedPurchaseRequests?null:e.plannedPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!e.loading),t.xp6(22),t.Q6J("ngForOf",e.actualPurchaseRequests),t.xp6(1),t.Q6J("ngIf",0==(null==e.actualPurchaseRequests?null:e.actualPurchaseRequests.length)),t.xp6(3),t.Q6J("ngIf",!e.loading),t.xp6(20),t.Q6J("ngForOf",e.recurringOperationalCosts),t.xp6(1),t.Q6J("ngIf",0==(null==e.recurringOperationalCosts?null:e.recurringOperationalCosts.length)),t.xp6(3),t.Q6J("ngIf",!e.loading)}}let w=(()=>{const a=class{constructor(i,o,s,$){this.router=i,this.route=o,this.headerService=s,this.permissionService=$,this.modelId=null,this.itemId=null,this.errorMessages=[],this.loading=!1,this.successMessage="",this.monthlyBudget=null,this.plannedPurchaseRequests=[],this.actualPurchaseRequests=[],this.recurringOperationalCosts=[],this.entityBudgetMonths=[],this.countryBudget=null,this.plannedPurchaseRequestsPagination=null,this.actualPurchaseRequestsPagination=null,this.recurringOperationalCostsPagination=null,this.entityBudgetMonthsPagination=null,this.plannedPurchaseRequestsPage=1,this.actualPurchaseRequestsPage=1,this.recurringOperationalCostsPage=1,this.entityBudgetMonthsPage=1,this.perPage=10,this.totalItemPlannedPurchaseRequests=0,this.totalItemActualPurchaseRequests=0,this.totalItemRecurringOperationalCosts=0,this.totalItemEntityBudgetMonths=0}ngOnInit(){this.route.params.subscribe(i=>{this.modelId=i.id,this.itemId=i.itemId,this.getMonthlyBudget(),this.headerService.setupHeader([{title:"Settings"},{title:"Country Budget",link:"/settings/country-budget"},{title:"View Country Budget",link:`/settings/country-budget/${this.modelId}`},{title:"Show Monthly Amount"}])})}getMonthlyBudget(){this.loading=!0,h.Z.get(`${g.N.api_url}/settings/country-budgets/${this.modelId}/${this.itemId}?planned=${this.plannedPurchaseRequestsPage}&actual=${this.actualPurchaseRequestsPage}&recurring=${this.recurringOperationalCostsPage}&entity=${this.entityBudgetMonthsPage}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.localStorage.getItem(g.N.api_token_identifier)}`}}).then(i=>{i.data.error?this.errorMessages=i.data.error_message:(this.monthlyBudget=i.data.monthly,this.countryBudget=i.data.countryBudget,this.plannedPurchaseRequests=i.data.plannedPurchaseRequests.data,this.actualPurchaseRequests=i.data.actualPurchaseRequests.data,this.recurringOperationalCosts=i.data.recurringOperationalCosts.data,this.entityBudgetMonths=i.data.entityBudgetMonths.data,this.totalItemPlannedPurchaseRequests=i.data.plannedPurchaseRequests.total,this.totalItemActualPurchaseRequests=i.data.actualPurchaseRequests.total,this.totalItemRecurringOperationalCosts=i.data.recurringOperationalCosts.total,this.totalItemEntityBudgetMonths=i.data.entityBudgetMonths.total)}).finally(()=>this.loading=!1)}selectedPage(i,o){"plannedPurchaseRequests"==o?this.plannedPurchaseRequestsPage=i:"actualPurchaseRequests"==o?this.actualPurchaseRequestsPage=i:"recurringOperationalCosts"==o?this.recurringOperationalCostsPage=i:"entityBudgetMonths"==o&&(this.entityBudgetMonthsPage=i),this.getMonthlyBudget()}};let n=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(r.F0),t.Y36(r.gz),t.Y36(m.r),t.Y36(_.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-show-monthly-amount"]],inputs:{modelId:"modelId",itemId:"itemId"},decls:4,vars:4,consts:[[1,"container-fixed"],["class","flex flex-wrap items-center lg:items-end justify-between gap-5 pb-7.5",4,"ngIf"],[3,"errorMessages","successMessage"],["class","grid gap-5 lg:gap-7.5 w-full mx-left",4,"ngIf"],[1,"flex","flex-wrap","items-center","lg:items-end","justify-between","gap-5","pb-7.5"],[1,"flex","flex-col","justify-center","gap-2"],[1,"text-xl","font-medium","leading-none","text-gray-900"],[1,"flex","items-center","gap-2.5"],[1,"btn","btn-sm","btn-light",3,"routerLink"],[1,"grid","gap-5","lg:gap-7.5","w-full","mx-left"],[1,"grid","grid-cols-5","gap-4","mb-7.5","w-full"],[1,"card","p-4","text-center","w-full"],[1,"text-2xl","font-semibold","text-primary","mb-2"],[1,"text-gray-600","text-sm"],[1,"flex","flex-col","gap-5"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-4","pb-2"],[1,"table-auto"],[1,"text-sm","text-gray-600","min-w-36","pb-5","pe-6"],[1,"text-sm","text-gray-800","pb-5"],[1,"badge","badge-sm","badge-success","badge-outline"],[1,"card-table","scrollable-x-auto"],["data-datatable-table","true",1,"table","table-auto","table-border"],[1,"min-w-[100px]"],[1,"min-w-[150px]"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer","justify-center","md:justify-between","flex-col","md:flex-row","gap-5","text-gray-600","text-2sm","font-medium"],[1,"flex","items-center","gap-4","order-1","md:order-2"],[3,"perPage","totalItems","currentPage","selectedPage",4,"ngIf"],[1,"min-w-[180px]"],[1,"text-gray-800","font-normal"],["colspan","4",1,"text-center","text-gray-500","font-normal"],[3,"perPage","totalItems","currentPage","selectedPage"],[1,"text-center"],["data-menu","true",1,"menu","flex-inline"],["data-menu-item-offset","0, 10px","data-menu-item-placement","bottom-end","data-menu-item-placement-rtl","bottom-start","data-menu-item-toggle","dropdown","data-menu-item-trigger","click|lg:click",1,"menu-item"],[1,"menu-toggle","btn","btn-sm","btn-icon","btn-light","btn-clear"],[1,"ki-filled","ki-dots-vertical"],["data-menu-dismiss","true",1,"menu-dropdown","menu-default","w-full","max-w-[175px]"],[1,"menu-item"],[1,"menu-link",3,"routerLink"],[1,"menu-icon"],[1,"ki-filled","ki-setting-2"],[1,"menu-title"],["colspan","7",1,"text-center","text-gray-500","font-normal"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.YNc(1,A,7,5,"div",1),t._UZ(2,"app-alert",2),t.YNc(3,I,159,24,"div",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",!s.loading),t.xp6(1),t.Q6J("errorMessages",s.errorMessages)("successMessage",s.successMessage),t.xp6(1),t.Q6J("ngIf",!s.loading))},dependencies:[d.sg,d.O5,r.rH,Z.w,f.Q]}),n})();var N=u(433),j=u(5730),S=u(4859),O=u(4144),J=u(9602),p=u(3238),Q=u(9549),E=u(507);const Y=[{path:"",component:w}];let F=(()=>{const a=class{};let n=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:p.Ad,useValue:"en-GB"}],imports:[d.ez,r.Bz.forChild(Y),N.u5,j.n,S.ot,O.c,J.FA,p.XK,Q.lN,E.u]}),n})()}}]);